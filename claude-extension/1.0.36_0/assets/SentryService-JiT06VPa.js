import{c as t,f as e,I as n,P as r,g as i,S as s,s as o}from"./permissions-DQjjgS8V.js";var a="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof globalThis?globalThis:{},c="1.9.0",u=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var l=function(t){var e=new Set([t]),n=new Set,r=t.match(u);if(!r)return function(){return!1};var i=+r[1],s=+r[2],o=+r[3];if(null!=r[4])return function(e){return e===t};function a(t){return n.add(t),!1}function c(t){return e.add(t),!0}return function(t){if(e.has(t))return!0;if(n.has(t))return!1;var r=t.match(u);if(!r)return a(t);var l=+r[1],d=+r[2],h=+r[3];return null!=r[4]||i!==l?a(t):0===i?s===d&&o<=h?c(t):a(t):s<=d?c(t):a(t)}}(c),d=c.split(".")[0],h=Symbol.for("opentelemetry.js.api."+d),p=a;function m(t,e,n,r){var i;void 0===r&&(r=!1);var s=p[h]=null!==(i=p[h])&&void 0!==i?i:{version:c};if(!r&&s[t]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(o.stack||o.message),!1}if(s.version!==c){o=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+c);return n.error(o.stack||o.message),!1}return s[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+c+"."),!0}function f(t){var e,n,r=null===(e=p[h])||void 0===e?void 0:e.version;if(r&&l(r))return null===(n=p[h])||void 0===n?void 0:n[t]}function g(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+c+".");var n=p[h];n&&delete n[t]}var _,v,b=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y("verbose",this._namespace,t)},t}();function y(t,e,n){var r=f("diag");if(r)return n.unshift(e),r[t].apply(r,function(t,e,n){if(2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(n),!1))}(v=_||(_={}))[v.NONE=0]="NONE",v[v.ERROR=30]="ERROR",v[v.WARN=50]="WARN",v[v.INFO=60]="INFO",v[v.DEBUG=70]="DEBUG",v[v.VERBOSE=80]="VERBOSE",v[v.ALL=9999]="ALL";var w=function(){function t(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=f("diag");if(r)return r[t].apply(r,function(t,e,n){if(2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(e),!1))}}var e=this;e.setLogger=function(t,n){var r,i,s;if(void 0===n&&(n={logLevel:_.INFO}),t===e){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(r=o.stack)&&void 0!==r?r:o.message),!1}"number"==typeof n&&(n={logLevel:n});var a=f("diag"),c=function(t,e){function n(n,r){var i=e[n];return"function"==typeof i&&t>=r?i.bind(e):function(){}}return t<_.NONE?t=_.NONE:t>_.ALL&&(t=_.ALL),e=e||{},{error:n("error",_.ERROR),warn:n("warn",_.WARN),info:n("info",_.INFO),debug:n("debug",_.DEBUG),verbose:n("verbose",_.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:_.INFO,t);if(a&&!n.suppressOverrideMessage){var u=null!==(s=(new Error).stack)&&void 0!==s?s:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+u),c.warn("Current logger will overwrite one already registered from "+u)}return m("diag",c,e,!0)},e.disable=function(){g("diag",e)},e.createComponentLogger=function(t){return new b(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),S=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(t,2);return[e[0],e[1]]})},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=new t(this._entries);try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=o.next();!a.done;a=o.next()){var c=a.value;s._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return s},t.prototype.clear=function(){return new t},t}(),x=Symbol("BaggageEntryMetadata"),E=w.instance();function T(t){return void 0===t&&(t={}),new S(new Map(Object.entries(t)))}function A(t){return Symbol.for(t)}var C,P,O=new(function(){return function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(t){return n._currentContext.get(t)},n.setValue=function(e,r){var i=new t(n._currentContext);return i._currentContext.set(e,r),i},n.deleteValue=function(e){var r=new t(n._currentContext);return r._currentContext.delete(e),r}}}()),k=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],L=function(){return function(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(console){var r=console[t];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,e)}}}for(var e=0;e<k.length;e++)this[k[e].n]=t(k[e].c)}}(),M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(){function t(){}return t.prototype.createGauge=function(t,e){return H},t.prototype.createHistogram=function(t,e){return W},t.prototype.createCounter=function(t,e){return V},t.prototype.createUpDownCounter=function(t,e){return q},t.prototype.createObservableGauge=function(t,e){return X},t.prototype.createObservableCounter=function(t,e){return K},t.prototype.createObservableUpDownCounter=function(t,e){return Y},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),N=function(){return function(){}}(),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.add=function(t,e){},e}(N),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.add=function(t,e){},e}(N),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.record=function(t,e){},e}(N),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.record=function(t,e){},e}(N),j=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e}(j),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e}(j),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e}(j),z=new R,V=new I,H=new U,W=new $,q=new D,K=new B,X=new F,Y=new G;(P=C||(C={}))[P.INT=0]="INT",P[P.DOUBLE=1]="DOUBLE";var J,Q,Z={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},tt={set:function(t,e,n){null!=t&&(t[e]=n)}},et=function(){function t(){}return t.prototype.active=function(){return O},t.prototype.with=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return e.call.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(r),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),nt="context",rt=new et,it=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return m(nt,t,w.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,function(t,e,n){if(2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t,e,n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(i),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return f(nt)||rt},t.prototype.disable=function(){this._getContextManager().disable(),g(nt,w.instance())},t}();(Q=J||(J={}))[Q.NONE=0]="NONE",Q[Q.SAMPLED=1]="SAMPLED";var st="0000000000000000",ot="00000000000000000000000000000000",at={traceId:ot,spanId:st,traceFlags:J.NONE},ct=function(){function t(t){void 0===t&&(t=at),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.addLink=function(t){return this},t.prototype.addLinks=function(t){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),ut=A("OpenTelemetry Context Key SPAN");function lt(t){return t.getValue(ut)||void 0}function dt(){return lt(it.getInstance().active())}function ht(t,e){return t.setValue(ut,e)}function pt(t){return t.deleteValue(ut)}function mt(t,e){return ht(t,new ct(e))}function ft(t){var e;return null===(e=lt(t))||void 0===e?void 0:e.spanContext()}var gt=/^([0-9a-f]{32})$/i,_t=/^[0-9a-f]{16}$/i;function vt(t){return gt.test(t)&&t!==ot}function bt(t){return vt(t.traceId)&&(e=t.spanId,_t.test(e)&&e!==st);var e}function yt(t){return new ct(t)}var wt=it.getInstance(),St=function(){function t(){}return t.prototype.startSpan=function(t,e,n){if(void 0===n&&(n=wt.active()),Boolean(null==e?void 0:e.root))return new ct;var r,i=n&&ft(n);return"object"==typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&bt(i)?new ct(i):new ct},t.prototype.startActiveSpan=function(t,e,n,r){var i,s,o;if(!(arguments.length<2)){2===arguments.length?o=e:3===arguments.length?(i=e,o=n):(i=e,s=n,o=r);var a=null!=s?s:wt.active(),c=this.startSpan(t,i,a),u=ht(a,c);return wt.with(u,o,void 0,c)}},t}();var xt,Et,Tt,At,Ct,Pt,Ot=new St,kt=function(){function t(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}return t.prototype.startSpan=function(t,e,n){return this._getTracer().startSpan(t,e,n)},t.prototype.startActiveSpan=function(t,e,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Ot},t}(),Lt=new(function(){function t(){}return t.prototype.getTracer=function(t,e,n){return new St},t}()),Mt=function(){function t(){}return t.prototype.getTracer=function(t,e,n){var r;return null!==(r=this.getDelegateTracer(t,e,n))&&void 0!==r?r:new kt(this,t,e,n)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Lt},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(t,e,n)},t}();(Et=xt||(xt={}))[Et.NOT_RECORD=0]="NOT_RECORD",Et[Et.RECORD=1]="RECORD",Et[Et.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(At=Tt||(Tt={}))[At.INTERNAL=0]="INTERNAL",At[At.SERVER=1]="SERVER",At[At.CLIENT=2]="CLIENT",At[At.PRODUCER=3]="PRODUCER",At[At.CONSUMER=4]="CONSUMER",(Pt=Ct||(Ct={}))[Pt.UNSET=0]="UNSET",Pt[Pt.OK=1]="OK",Pt[Pt.ERROR=2]="ERROR";var Rt=it.getInstance(),Nt=w.instance(),It=new(function(){function t(){}return t.prototype.getMeter=function(t,e,n){return z},t}()),Dt="metrics",Ut=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return m(Dt,t,w.instance())},t.prototype.getMeterProvider=function(){return f(Dt)||It},t.prototype.getMeter=function(t,e,n){return this.getMeterProvider().getMeter(t,e,n)},t.prototype.disable=function(){g(Dt,w.instance())},t}().getInstance(),$t=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),jt=A("OpenTelemetry Baggage Key");function Bt(t){return t.getValue(jt)||void 0}function Ft(){return Bt(it.getInstance().active())}function Gt(t,e){return t.setValue(jt,e)}function zt(t){return t.deleteValue(jt)}var Vt="propagation",Ht=new $t,Wt=function(){function t(){this.createBaggage=T,this.getBaggage=Bt,this.getActiveBaggage=Ft,this.setBaggage=Gt,this.deleteBaggage=zt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return m(Vt,t,w.instance())},t.prototype.inject=function(t,e,n){return void 0===n&&(n=tt),this._getGlobalPropagator().inject(t,e,n)},t.prototype.extract=function(t,e,n){return void 0===n&&(n=Z),this._getGlobalPropagator().extract(t,e,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){g(Vt,w.instance())},t.prototype._getGlobalPropagator=function(){return f(Vt)||Ht},t}().getInstance(),qt="trace",Kt=function(){function t(){this._proxyTracerProvider=new Mt,this.wrapSpanContext=yt,this.isSpanContextValid=bt,this.deleteSpan=pt,this.getSpan=lt,this.getActiveSpan=dt,this.getSpanContext=ft,this.setSpan=ht,this.setSpanContext=mt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=m(qt,this._proxyTracerProvider,w.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return f(qt)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){g(qt,w.instance()),this._proxyTracerProvider=new Mt},t}().getInstance();let Xt=class{emit(t){}};const Yt=new Xt;const Jt=new class{getLogger(t,e,n){return new Xt}};let Qt=class{constructor(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Yt}},Zt=class{getLogger(t,e,n){var r;return null!==(r=this.getDelegateLogger(t,e,n))&&void 0!==r?r:new Qt(this,t,e,n)}getDelegate(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Jt}setDelegate(t){this._delegate=t}getDelegateLogger(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(t,e,n)}};const te="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof globalThis?globalThis:{},ee=Symbol.for("io.opentelemetry.js.api.logs"),ne=te;const re=class t{constructor(){this._proxyLoggerProvider=new Zt}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(t){return ne[ee]?this.getLoggerProvider():(ne[ee]=(e=1,n=t,r=Jt,t=>t===e?n:r),this._proxyLoggerProvider.setDelegate(t),t);var e,n,r}getLoggerProvider(){var t,e;return null!==(e=null===(t=ne[ee])||void 0===t?void 0:t.call(ne,1))&&void 0!==e?e:this._proxyLoggerProvider}getLogger(t,e,n){return this.getLoggerProvider().getLogger(t,e,n)}disable(){delete ne[ee],this._proxyLoggerProvider=new Zt}}.getInstance();const ie="service.name",se="telemetry.sdk.language",oe="telemetry.sdk.name",ae="telemetry.sdk.version",ce="process.runtime.name",ue={[oe]:"opentelemetry",[ce]:"browser",[se]:"webjs",[ae]:"2.0.1"};const le=t=>null!==t&&"object"==typeof t&&"function"==typeof t.then;class de{_rawAttributes;_asyncAttributesPending=!1;_memoizedAttributes;static FromAttributeList(t){const e=new de({});return e._rawAttributes=fe(t),e._asyncAttributesPending=t.filter(([t,e])=>le(e)).length>0,e}constructor(t){const e=t.attributes??{};this._rawAttributes=Object.entries(e).map(([t,e])=>(le(e)&&(this._asyncAttributesPending=!0),[t,e])),this._rawAttributes=fe(this._rawAttributes)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let t=0;t<this._rawAttributes.length;t++){const[e,n]=this._rawAttributes[t];this._rawAttributes[t]=[e,le(n)?await n:n]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&Nt.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const t={};for(const[e,n]of this._rawAttributes)le(n)?Nt.debug(`Unsettled resource attribute ${e} skipped`):null!=n&&(t[e]??=n);return this._asyncAttributesPending||(this._memoizedAttributes=t),t}getRawAttributes(){return this._rawAttributes}merge(t){return null==t?this:de.FromAttributeList([...t.getRawAttributes(),...this.getRawAttributes()])}}function he(t){return de.FromAttributeList(Object.entries(t))}function pe(){return he({})}function me(){return he({[ie]:"unknown_service",[se]:ue[se],[oe]:ue[oe],[ae]:ue[ae]})}function fe(t){return t.map(([t,e])=>le(e)?[t,e.catch(e=>{Nt.debug("promise rejection for resource attribute: %s - %s",t,e)})]:[t,e])}const ge=(t={})=>(t.detectors||[]).map(e=>{try{const r=(n=e.detect(t),new de(n));return Nt.debug(`${e.constructor.name} found resource.`,r),r}catch(r){return Nt.debug(`${e.constructor.name} failed: ${r.message}`),pe()}var n}).reduce((t,e)=>t.merge(e),pe()),_e=A("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function ve(t){const e={};if("object"!=typeof t||null==t)return e;for(const[n,r]of Object.entries(t))be(n)?ye(r)?Array.isArray(r)?e[n]=r.slice():e[n]=r:Nt.warn(`Invalid attribute value set for key: ${n}`):Nt.warn(`Invalid attribute key: ${n}`);return e}function be(t){return"string"==typeof t&&t.length>0}function ye(t){return null==t||(Array.isArray(t)?function(t){let e;for(const n of t)if(null!=n){if(!e){if(we(n)){e=typeof n;continue}return!1}if(typeof n!==e)return!1}return!0}(t):we(t))}function we(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}let Se=t=>{Nt.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){const e={};let n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(t=>{if(e[t])return;const r=n[t];r&&(e[t]=String(r))}),n=Object.getPrototypeOf(n);return e}(t))}(t))};function xe(t){try{Se(t)}catch{}}const Ee=performance,Te="exception.message",Ae="exception.type";const Ce=Math.pow(10,6),Pe=Math.pow(10,9);function Oe(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*Ce)]}function ke(){let t=Ee.timeOrigin;if("number"!=typeof t){const e=Ee;t=e.timing&&e.timing.fetchStart}return t}function Le(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function Me(t){return Le(t)||"number"==typeof t||t instanceof Date}function Re(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Pe&&(n[1]-=Pe,n[0]+=1),n}var Ne,Ie;(Ie=Ne||(Ne={}))[Ie.SUCCESS=0]="SUCCESS",Ie[Ie.FAILED=1]="FAILED";const De="[object Null]",Ue="[object Undefined]",$e=Function.prototype.toString,je=$e.call(Object),Be=Object.getPrototypeOf,Fe=Object.prototype,Ge=Fe.hasOwnProperty,ze=Symbol?Symbol.toStringTag:void 0,Ve=Fe.toString;function He(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!==function(t){if(null==t)return void 0===t?Ue:De;return ze&&ze in Object(t)?function(t){const e=Ge.call(t,ze),n=t[ze];let r=!1;try{t[ze]=void 0,r=!0}catch(s){}const i=Ve.call(t);r&&(e?t[ze]=n:delete t[ze]);return i}(t):function(t){return Ve.call(t)}(t)}(t))return!1;const e=Be(t);if(null===e)return!0;const n=Ge.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$e.call(n)===je}function We(t){return Xe(t)?t.slice():t}function qe(t,e,n=0,r){let i;if(!(n>20)){if(n++,Qe(t)||Qe(e)||Ye(e))i=We(e);else if(Xe(t)){if(i=t.slice(),Xe(e))for(let t=0,n=e.length;t<n;t++)i.push(We(e[t]));else if(Je(e)){const t=Object.keys(e);for(let n=0,r=t.length;n<r;n++){const r=t[n];i[r]=We(e[r])}}}else if(Je(t))if(Je(e)){if(!function(t,e){if(!He(t)||!He(e))return!1;return!0}(t,e))return e;i=Object.assign({},t);const s=Object.keys(e);for(let o=0,a=s.length;o<a;o++){const a=s[o],c=e[a];if(Qe(c))void 0===c?delete i[a]:i[a]=c;else{const s=i[a],o=c;if(Ke(t,a,r)||Ke(e,a,r))delete i[a];else{if(Je(s)&&Je(o)){const n=r.get(s)||[],i=r.get(o)||[];n.push({obj:t,key:a}),i.push({obj:e,key:a}),r.set(s,n),r.set(o,i)}i[a]=qe(i[a],c,n,r)}}}}else i=e;return i}}function Ke(t,e,n){const r=n.get(t[e])||[];for(let i=0,s=r.length;i<s;i++){const n=r[i];if(n.key===e&&n.obj===t)return!0}return!1}function Xe(t){return Array.isArray(t)}function Ye(t){return"function"==typeof t}function Je(t){return!Qe(t)&&!Xe(t)&&!Ye(t)&&"object"==typeof t}function Qe(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}let Ze=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}},tn=class{_callback;_that;_isCalled=!1;_deferred=new Ze;constructor(t,e){this._callback=t,this._that=e}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(t=>this._deferred.resolve(t),t=>this._deferred.reject(t))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}};class en{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:Ct.UNSET};endTime=[0,0];_ended=!1;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(t){const e=Date.now();this._spanContext=t.spanContext,this._performanceStartTime=Ee.now(),this._performanceOffset=e-(this._performanceStartTime+ke()),this._startTimeProvided=null!=t.startTime,this._spanLimits=t.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=t.spanProcessor,this.name=t.name,this.parentSpanContext=t.parentSpanContext,this.kind=t.kind,this.links=t.links||[],this.startTime=this._getTime(t.startTime??e),this.resource=t.resource,this.instrumentationScope=t.scope,null!=t.attributes&&this.setAttributes(t.attributes),this._spanProcessor.onStart(this,t.context)}spanContext(){return this._spanContext}setAttribute(t,e){if(null==e||this._isSpanEnded())return this;if(0===t.length)return Nt.warn(`Invalid attribute key: ${t}`),this;if(!ye(e))return Nt.warn(`Invalid attribute value set for key: ${t}`),this;const{attributeCountLimit:n}=this._spanLimits;return void 0!==n&&Object.keys(this.attributes).length>=n&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(e),this)}setAttributes(t){for(const[e,n]of Object.entries(t))this.setAttribute(e,n);return this}addEvent(t,e,n){if(this._isSpanEnded())return this;const{eventCountLimit:r}=this._spanLimits;if(0===r)return Nt.warn("No events allowed."),this._droppedEventsCount++,this;void 0!==r&&this.events.length>=r&&(0===this._droppedEventsCount&&Nt.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Me(e)&&(Me(n)||(n=e),e=void 0);const i=ve(e);return this.events.push({name:t,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(t){return this.links.push(t),this}addLinks(t){return this.links.push(...t),this}setStatus(t){return this._isSpanEnded()||(this.status={...t},null!=this.status.message&&"string"!=typeof t.message&&(Nt.warn(`Dropping invalid status.message of type '${typeof t.message}', expected 'string'`),delete this.status.message)),this}updateName(t){return this._isSpanEnded()||(this.name=t),this}end(t){this._isSpanEnded()?Nt.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this._ended=!0,this.endTime=this._getTime(t),this._duration=function(t,e){let n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=Pe),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(Nt.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Nt.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this))}_getTime(t){if("number"==typeof t&&t<=Ee.now())return e=t+this._performanceOffset,Re(Oe(ke()),Oe("number"==typeof e?e:Ee.now()));var e;if("number"==typeof t)return Oe(t);if(t instanceof Date)return Oe(t.getTime());if(Le(t))return t;if(this._startTimeProvided)return Oe(Date.now());const n=Ee.now()-this._performanceStartTime;return Re(this.startTime,Oe(n))}isRecording(){return!1===this._ended}recordException(t,e){const n={};"string"==typeof t?n[Te]=t:t&&(t.code?n[Ae]=t.code.toString():t.name&&(n[Ae]=t.name),t.message&&(n[Te]=t.message),t.stack&&(n["exception.stacktrace"]=t.stack)),n[Ae]||n[Te]?this.addEvent("exception",n,e):Nt.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const t=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);Nt.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,t)}return this._ended}_truncateToLimitUtil(t,e){return t.length<=e?t:t.substring(0,e)}_truncateToSize(t){const e=this._attributeValueLengthLimit;return e<=0?(Nt.warn(`Attribute value limit must be positive, got ${e}`),t):"string"==typeof t?this._truncateToLimitUtil(t,e):Array.isArray(t)?t.map(t=>"string"==typeof t?this._truncateToLimitUtil(t,e):t):t}}var nn;!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(nn||(nn={}));class rn{shouldSample(){return{decision:nn.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class sn{shouldSample(){return{decision:nn.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class on{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(t){this._root=t.root,this._root||(xe(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new sn),this._remoteParentSampled=t.remoteParentSampled??new sn,this._remoteParentNotSampled=t.remoteParentNotSampled??new rn,this._localParentSampled=t.localParentSampled??new sn,this._localParentNotSampled=t.localParentNotSampled??new rn}shouldSample(t,e,n,r,i,s){const o=Kt.getSpanContext(t);return o&&bt(o)?o.isRemote?o.traceFlags&J.SAMPLED?this._remoteParentSampled.shouldSample(t,e,n,r,i,s):this._remoteParentNotSampled.shouldSample(t,e,n,r,i,s):o.traceFlags&J.SAMPLED?this._localParentSampled.shouldSample(t,e,n,r,i,s):this._localParentNotSampled.shouldSample(t,e,n,r,i,s):this._root.shouldSample(t,e,n,r,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class an{_ratio;_upperBound;constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(t,e){return{decision:vt(e)&&this._accumulate(e)<this._upperBound?nn.RECORD_AND_SAMPLED:nn.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let e=0;for(let n=0;n<t.length/8;n++){const r=8*n;e=(e^parseInt(t.slice(r,r+8),16))>>>0}return e}}function cn(){return{sampler:un(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},spanLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128,linkCountLimit:128,eventCountLimit:128,attributePerEventCountLimit:128,attributePerLinkCountLimit:128}}}function un(){const t="parentbased_always_on";switch(t){case"always_on":return new sn;case"always_off":return new rn;case"parentbased_always_on":return new on({root:new sn});case"parentbased_always_off":return new on({root:new rn});case"traceidratio":return new an(ln());case"parentbased_traceidratio":return new on({root:new an(ln())});default:return Nt.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "parentbased_always_on".`),new on({root:new sn})}}function ln(){return Nt.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1}const dn=1/0;class hn{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(t,e){this._exporter=t,this._maxExportBatchSize="number"==typeof e?.maxExportBatchSize?e.maxExportBatchSize:512,this._maxQueueSize="number"==typeof e?.maxQueueSize?e.maxQueueSize:2048,this._scheduledDelayMillis="number"==typeof e?.scheduledDelayMillis?e.scheduledDelayMillis:5e3,this._exportTimeoutMillis="number"==typeof e?.exportTimeoutMillis?e.exportTimeoutMillis:3e4,this._shutdownOnce=new tn(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Nt.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,e){}onEnd(t){this._shutdownOnce.isCalled||0!==(t.spanContext().traceFlags&J.SAMPLED)&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&Nt.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(Nt.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,e)=>{const n=[];for(let r=0,i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);r<i;r++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(e)})}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((t,e)=>{const n=setTimeout(()=>{e(new Error("Timeout"))},this._exportTimeoutMillis);Rt.with(Rt.active().setValue(_e,!0),()=>{let r;this._finishedSpans.length<=this._maxExportBatchSize?(r=this._finishedSpans,this._finishedSpans=[]):r=this._finishedSpans.splice(0,this._maxExportBatchSize);const i=()=>this._exporter.export(r,r=>{clearTimeout(n),r.code===Ne.SUCCESS?t():e(r.error??new Error("BatchSpanProcessor: span export failed"))});let s=null;for(let t=0,e=r.length;t<e;t++){const e=r[t];e.resource.asyncAttributesPending&&e.resource.waitForAsyncAttributes&&(s??=[],s.push(e.resource.waitForAsyncAttributes()))}null===s?i():Promise.all(s).then(i,t=>{xe(t),e(t)})})})}_maybeStartTimer(){if(this._isExporting)return;const t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{this._isExporting=!1,xe(t)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),this._timer)}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}class pn extends hn{_visibilityChangeListener;_pageHideListener;constructor(t,e){super(t,e),this.onInit(e)}onInit(t){!0!==t?.disableAutoFlushOnDocumentHide&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush().catch(t=>{xe(t)})},this._pageHideListener=()=>{this.forceFlush().catch(t=>{xe(t)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}class mn{generateTraceId=gn(16);generateSpanId=gn(8)}const fn=Array(32);function gn(t){return function(){for(let e=0;e<2*t;e++)fn[e]=Math.floor(16*Math.random())+48,fn[e]>=58&&(fn[e]+=39);return String.fromCharCode.apply(null,fn.slice(0,2*t))}}class _n{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(t,e,n,r){const i=function(t){const e={sampler:un()},n=cn(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}(e);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=e.idGenerator||new mn,this._resource=n,this._spanProcessor=r,this.instrumentationScope=t}startSpan(t,e={},n=Rt.active()){e.root&&(n=Kt.deleteSpan(n));const r=Kt.getSpan(n);if(!0===n.getValue(_e)){Nt.debug("Instrumentation suppressed, returning Noop Span");return Kt.wrapSpanContext(at)}const i=r?.spanContext(),s=this._idGenerator.generateSpanId();let o,a,c;i&&Kt.isSpanContextValid(i)?(a=i.traceId,c=i.traceState,o=i):a=this._idGenerator.generateTraceId();const u=e.kind??Tt.INTERNAL,l=(e.links??[]).map(t=>({context:t.context,attributes:ve(t.attributes)})),d=ve(e.attributes),h=this._sampler.shouldSample(n,a,t,u,d,l);c=h.traceState??c;const p={traceId:a,spanId:s,traceFlags:h.decision===xt.RECORD_AND_SAMPLED?J.SAMPLED:J.NONE,traceState:c};if(h.decision===xt.NOT_RECORD){Nt.debug("Recording is off, propagating context in a non-recording span");return Kt.wrapSpanContext(p)}const m=ve(Object.assign(d,h.attributes));return new en({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:p,name:t,kind:u,links:l,parentSpanContext:o,attributes:m,startTime:e.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(t,e,n,r){let i,s,o;if(arguments.length<2)return;2===arguments.length?o=e:3===arguments.length?(i=e,o=n):(i=e,s=n,o=r);const a=s??Rt.active(),c=this.startSpan(t,i,a),u=Kt.setSpan(a,c);return Rt.with(u,o,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class vn{_spanProcessors;constructor(t){this._spanProcessors=t}forceFlush(){const t=[];for(const e of this._spanProcessors)t.push(e.forceFlush());return new Promise(e=>{Promise.all(t).then(()=>{e()}).catch(t=>{xe(t||new Error("MultiSpanProcessor: forceFlush failed")),e()})})}onStart(t,e){for(const n of this._spanProcessors)n.onStart(t,e)}onEnd(t){for(const e of this._spanProcessors)e.onEnd(t)}shutdown(){const t=[];for(const e of this._spanProcessors)t.push(e.shutdown());return new Promise((e,n)=>{Promise.all(t).then(()=>{e()},n)})}}var bn,yn;(yn=bn||(bn={}))[yn.resolved=0]="resolved",yn[yn.timeout=1]="timeout",yn[yn.error=2]="error",yn[yn.unresolved=3]="unresolved";class wn{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(t={}){const e=function(...t){let e=t.shift();const n=new WeakMap;for(;t.length>0;)e=qe(e,t.shift(),0,n);return e}({},cn(),function(t){const e=Object.assign({},t.spanLimits);return e.attributeCountLimit=t.spanLimits?.attributeCountLimit??t.generalLimits?.attributeCountLimit??void 0??void 0??128,e.attributeValueLengthLimit=t.spanLimits?.attributeValueLengthLimit??t.generalLimits?.attributeValueLengthLimit??void 0??void 0??dn,Object.assign({},t,{spanLimits:e})}(t));this._resource=e.resource??me(),this._config=Object.assign({},e,{resource:this._resource});const n=[];t.spanProcessors?.length&&n.push(...t.spanProcessors),this._activeSpanProcessor=new vn(n)}getTracer(t,e,n){const r=`${t}@${e||""}:${n?.schemaUrl||""}`;return this._tracers.has(r)||this._tracers.set(r,new _n({name:t,version:e,schemaUrl:n?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(r)}forceFlush(){const t=this._config.forceFlushTimeoutMillis,e=this._activeSpanProcessor._spanProcessors.map(e=>new Promise(n=>{let r;const i=setTimeout(()=>{n(new Error(`Span processor did not completed within timeout period of ${t} ms`)),r=bn.timeout},t);e.forceFlush().then(()=>{clearTimeout(i),r!==bn.timeout&&(r=bn.resolved,n(r))}).catch(t=>{clearTimeout(i),r=bn.error,n(t)})}));return new Promise((t,n)=>{Promise.all(e).then(e=>{const r=e.filter(t=>t!==bn.resolved);r.length>0?n(r):t()}).catch(t=>n([t]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}class Sn{_enabled=!1;_currentContext=O;_bindFunction(t=O,e){const n=this,r=function(...r){return n.with(t,()=>e.apply(this,r))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r}active(){return this._currentContext}bind(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):e}disable(){return this._currentContext=O,this._enabled=!1,this}enable(){return this._enabled||(this._enabled=!0,this._currentContext=O),this}with(t,e,n,...r){const i=this._currentContext;this._currentContext=t||O;try{return e.call(n,...r)}finally{this._currentContext=i}}}const xn=A("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function En(t){return!0===t.getValue(xn)}const Tn="baggage";function An(t){const e=t.split(";");if(e.length<=0)return;const n=e.shift();if(!n)return;const r=n.indexOf("=");if(r<=0)return;const i=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim());let o;var a;return e.length>0&&("string"!=typeof(a=e.join(";"))&&(E.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),o={__TYPE__:x,toString:function(){return a}}),{key:i,value:s,metadata:o}}class Cn{inject(t,e,n){const r=Wt.getBaggage(t);if(!r||En(t))return;const i=function(t){return t.getAllEntries().map(([t,e])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(e.value)}`;return void 0!==e.metadata&&(n+=";"+e.metadata.toString()),n})}(r).filter(t=>t.length<=4096).slice(0,180),s=function(t){return t.reduce((t,e)=>{const n=`${t}${""!==t?",":""}${e}`;return n.length>8192?t:n},"")}(i);s.length>0&&n.set(e,Tn,s)}extract(t,e,n){const r=n.get(e,Tn),i=Array.isArray(r)?r.join(","):r;if(!i)return t;const s={};if(0===i.length)return t;return i.split(",").forEach(t=>{const e=An(t);if(e){const t={value:e.value};e.metadata&&(t.metadata=e.metadata),s[e.key]=t}}),0===Object.entries(s).length?t:Wt.setBaggage(t,Wt.createBaggage(s))}fields(){return[Tn]}}class Pn{_propagators;_fields;constructor(t={}){this._propagators=t.propagators??[],this._fields=Array.from(new Set(this._propagators.map(t=>"function"==typeof t.fields?t.fields():[]).reduce((t,e)=>t.concat(e),[])))}inject(t,e,n){for(const i of this._propagators)try{i.inject(t,e,n)}catch(r){Nt.warn(`Failed to inject with ${i.constructor.name}. Err: ${r.message}`)}}extract(t,e,n){return this._propagators.reduce((t,r)=>{try{return r.extract(t,e,n)}catch(i){Nt.warn(`Failed to extract with ${r.constructor.name}. Err: ${i.message}`)}return t},t)}fields(){return this._fields.slice()}}const On="[_0-9a-z-*/]",kn=new RegExp(`^(?:${`[a-z]${On}{0,255}`}|${`[a-z0-9]${On}{0,240}@[a-z]${On}{0,13}`})$`),Ln=/^[ -~]{0,255}[!-~]$/,Mn=/,|=/;class Rn{_internalState=new Map;constructor(t){t&&this._parse(t)}set(t,e){const n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,e),n}unset(t){const e=this._clone();return e._internalState.delete(t),e}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,e)=>(t.push(e+"="+this.get(e)),t),[]).join(",")}_parse(t){t.length>512||(this._internalState=t.split(",").reverse().reduce((t,e)=>{const n=e.trim(),r=n.indexOf("=");if(-1!==r){const i=n.slice(0,r),s=n.slice(r+1,e.length);(function(t){return kn.test(t)})(i)&&function(t){return Ln.test(t)&&!Mn.test(t)}(s)&&t.set(i,s)}return t},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const t=new Rn;return t._internalState=new Map(this._internalState),t}}const Nn="traceparent",In="tracestate",Dn=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");class Un{inject(t,e,n){const r=Kt.getSpanContext(t);if(!r||En(t)||!bt(r))return;const i=`00-${r.traceId}-${r.spanId}-0${Number(r.traceFlags||J.NONE).toString(16)}`;n.set(e,Nn,i),r.traceState&&n.set(e,In,r.traceState.serialize())}extract(t,e,n){const r=n.get(e,Nn);if(!r)return t;const i=Array.isArray(r)?r[0]:r;if("string"!=typeof i)return t;const s=function(t){const e=Dn.exec(t);return e?"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}:null}(i);if(!s)return t;s.isRemote=!0;const o=n.get(e,In);if(o){const t=Array.isArray(o)?o.join(","):o;s.traceState=new Rn("string"==typeof t?t:void 0)}return Kt.setSpanContext(t,s)}fields(){return[Nn,In]}}class $n extends wn{constructor(t={}){super(t)}register(t={}){var e;Kt.setGlobalTracerProvider(this),null!==(e=t.propagator)&&(void 0!==e?Wt.setGlobalPropagator(e):Wt.setGlobalPropagator(new Pn({propagators:[new Un,new Cn]}))),function(t){if(null!==t){if(void 0===t){const t=new Sn;return t.enable(),void Rt.setGlobalContextManager(t)}t.enable(),Rt.setGlobalContextManager(t)}}(t.contextManager)}}const jn="exception.message",Bn="exception.stacktrace",Fn="exception.type",Gn="service.name",zn="service.version",Vn="user_agent.original",Hn="browser.platform",Wn="browser.brands",qn="browser.mobile",Kn="browser.language",Xn="browser.user_agent";const Yn=new class{detect(t){if(!("undefined"!=typeof navigator))return pe();const e=function(){const t={},e=navigator.userAgentData;e?(t[Hn]=e.platform,t[Wn]=e.brands.map(t=>`${t.brand} ${t.version}`),t[qn]=e.mobile):t[Xn]=navigator.userAgent;return t[Kn]=navigator.language,t}();return this._getResourceAttributes(e,t)}_getResourceAttributes(t,e){return t[Xn]||t[Hn]?{attributes:t}:(Nt.debug("BrowserDetector failed: Unable to find required browser resources. "),pe())}},Jn=A("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Qn(t){return null==t||(Array.isArray(t)?function(t){let e;for(const n of t)if(null!=n){if(!e){if(Zn(n)){e=typeof n;continue}return!1}if(typeof n!==e)return!1}return!0}(t):Zn(t))}function Zn(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}let tr=t=>{Nt.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){const e={};let n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(t=>{if(e[t])return;const r=n[t];r&&(e[t]=String(r))}),n=Object.getPrototypeOf(n);return e}(t))}(t))};function er(t){try{tr(t)}catch{}}const nr=performance;const rr=Math.pow(10,6),ir=Math.pow(10,9);function sr(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*rr)]}function or(){let t=nr.timeOrigin;if("number"!=typeof t){const e=nr;t=e.timing&&e.timing.fetchStart}return t}function ar(t){return function(t,e){const n=[t[0]+e[0],t[1]+e[1]];n[1]>=ir&&(n[1]-=ir,n[0]+=1);return n}(sr(or()),sr("number"==typeof t?t:nr.now()))}function cr(t){if(e=t,Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return t;if("number"==typeof t)return t<or()?ar(t):sr(t);if(t instanceof Date)return sr(t.getTime());throw TypeError("Invalid input type");var e}function ur(t){return 1e6*t[0]+t[1]/1e3}var lr;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(lr||(lr={}));const dr="[object Null]",hr="[object Undefined]",pr=Function.prototype.toString,mr=pr.call(Object),fr=Object.getPrototypeOf,gr=Object.prototype,_r=gr.hasOwnProperty,vr=Symbol?Symbol.toStringTag:void 0,br=gr.toString;function yr(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!==function(t){if(null==t)return void 0===t?hr:dr;return vr&&vr in Object(t)?function(t){const e=_r.call(t,vr),n=t[vr];let r=!1;try{t[vr]=void 0,r=!0}catch(s){}const i=br.call(t);r&&(e?t[vr]=n:delete t[vr]);return i}(t):function(t){return br.call(t)}(t)}(t))return!1;const e=fr(t);if(null===e)return!0;const n=_r.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&pr.call(n)===mr}function wr(t){return Er(t)?t.slice():t}function Sr(t,e,n=0,r){let i;if(!(n>20)){if(n++,Cr(t)||Cr(e)||Tr(e))i=wr(e);else if(Er(t)){if(i=t.slice(),Er(e))for(let t=0,n=e.length;t<n;t++)i.push(wr(e[t]));else if(Ar(e)){const t=Object.keys(e);for(let n=0,r=t.length;n<r;n++){const r=t[n];i[r]=wr(e[r])}}}else if(Ar(t))if(Ar(e)){if(!function(t,e){if(!yr(t)||!yr(e))return!1;return!0}(t,e))return e;i=Object.assign({},t);const s=Object.keys(e);for(let o=0,a=s.length;o<a;o++){const a=s[o],c=e[a];if(Cr(c))void 0===c?delete i[a]:i[a]=c;else{const s=i[a],o=c;if(xr(t,a,r)||xr(e,a,r))delete i[a];else{if(Ar(s)&&Ar(o)){const n=r.get(s)||[],i=r.get(o)||[];n.push({obj:t,key:a}),i.push({obj:e,key:a}),r.set(s,n),r.set(o,i)}i[a]=Sr(i[a],c,n,r)}}}}else i=e;return i}}function xr(t,e,n){const r=n.get(t[e])||[];for(let i=0,s=r.length;i<s;i++){const n=r[i];if(n.key===e&&n.obj===t)return!0}return!1}function Er(t){return Array.isArray(t)}function Tr(t){return"function"==typeof t}function Ar(t){return!Cr(t)&&!Er(t)&&!Tr(t)&&"object"==typeof t}function Cr(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}let Pr=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};class Or{_promise;_resolve;_reject;constructor(){this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}class kr{_callback;_that;_isCalled=!1;_deferred=new Or;constructor(t,e){this._callback=t,this._that=e}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(t=>this._deferred.resolve(t),t=>this._deferred.reject(t))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}const Lr={_export:function(t,e){return new Promise(n=>{Rt.with(Rt.active().setValue(Jn,!0),()=>{t.export(e,t=>{n(t)})})})}},Mr="1.1.0";var Rr,Nr;var Ir,Dr=function(){if(Nr)return Rr;function t(t){return"function"==typeof t}Nr=1;var e=function(){}.bind();function n(t,e,n){var r=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}function r(n){n&&n.logger&&(t(n.logger)?e=n.logger:e("new logger isn't a function, not replacing"))}function i(r,i,s){if(r&&r[i]){if(!s)return e("no wrapper function"),void e((new Error).stack);if(t(r[i])&&t(s)){var o=r[i],a=s(o,i);return n(a,"__original",o),n(a,"__unwrap",function(){r[i]===a&&n(r,i,o)}),n(a,"__wrapped",!0),n(r,i,a),a}e("original object and wrapper must be functions")}else e("no original function "+i+" to wrap")}function s(t,n){return t&&t[n]?t[n].__unwrap?t[n].__unwrap():void e("no original to unwrap to -- has "+n+" already been unwrapped?"):(e("no function to unwrap."),void e((new Error).stack))}return r.wrap=i,r.massWrap=function(t,n,r){if(!t)return e("must provide one or more modules to patch"),void e((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach(function(t){n.forEach(function(e){i(t,e,r)})}):e("must provide one or more functions to wrap on modules")},r.unwrap=s,r.massUnwrap=function(t,n){if(!t)return e("must provide one or more modules to patch"),void e((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach(function(t){n.forEach(function(e){s(t,e)})}):e("must provide one or more functions to unwrap on modules")},Rr=r}(),Ur={exports:{}};var $r,jr,Br=(Ir||(Ir=1,$r=Ur,function(t){if(t){var e={},n=t.TraceKit,r=[].slice,i="?",s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;e.noConflict=function(){return t.TraceKit=n,e},e.wrap=function(t){return function(){try{return t.apply(this,arguments)}catch(n){throw e.report(n),n}}},e.report=function(){var n,r,i,a,c=[],u=null,l=null;function d(t,n,r){var i=null;if(!n||e.collectWindowErrors){for(var s in c)if(o(c,s))try{c[s](t,n,r)}catch(a){i=a}if(i)throw i}}function h(t,r,i,o,a){if(l)e.computeStackTrace.augmentStackTraceWithInitialElement(l,r,i,t),m();else if(a)d(e.computeStackTrace(a),!0,a);else{var c,u={url:r,line:i,column:o},h=t;if("[object String]"==={}.toString.call(t)){var p=t.match(s);p&&(c=p[1],h=p[2])}u.func=e.computeStackTrace.guessFunctionName(u.url,u.line),u.context=e.computeStackTrace.gatherContext(u.url,u.line),d({name:c,message:h,mode:"onerror",stack:[u]},!0,null)}return!!n&&n.apply(this,arguments)}function p(t){d(e.computeStackTrace(t.reason),!0,t.reason)}function m(){var t=l,e=u;l=null,u=null,d(t,!1,e)}function f(t){if(l){if(u===t)return;m()}var n=e.computeStackTrace(t);throw l=n,u=t,setTimeout(function(){u===t&&m()},n.incomplete?2e3:0),t}return f.subscribe=function(e){!0!==r&&(n=t.onerror,t.onerror=h,r=!0),!0!==a&&(i=t.onunhandledrejection,t.onunhandledrejection=p,a=!0),c.push(e)},f.unsubscribe=function(e){for(var s=c.length-1;s>=0;--s)c[s]===e&&c.splice(s,1);0===c.length&&(r&&(t.onerror=n,r=!1),a&&(t.onunhandledrejection=i,a=!1))},f}(),e.computeStackTrace=function(){var n={};function r(r){if("string"!=typeof r)return[];if(!o(n,r)){var i="",s="";try{s=t.document.domain}catch(c){}var a=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(r);a&&a[2]===s&&(i=function(n){if(!e.remoteFetching)return"";try{var r=function(){try{return new t.XMLHttpRequest}catch(c){return new t.ActiveXObject("Microsoft.XMLHTTP")}}();return r.open("GET",n,!1),r.send(""),r.responseText}catch(c){return""}}(r)),n[r]=i?i.split("\n"):[]}return n[r]}function s(t,e){var n,s=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,c="",u=r(t);if(!u.length)return i;for(var l=0;l<10;++l)if(!a(c=u[e-l]+c)){if(n=o.exec(c))return n[1];if(n=s.exec(c))return n[1]}return i}function c(t,n){var i=r(t);if(!i.length)return null;var s=[],o=Math.floor(e.linesOfContext/2),c=o+e.linesOfContext%2,u=Math.max(0,n-o-1),l=Math.min(i.length,n+c-1);n-=1;for(var d=u;d<l;++d)a(i[d])||s.push(i[d]);return s.length>0?s:null}function u(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(t){return u(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function d(t,e){for(var n,i,s=0,o=e.length;s<o;++s)if((n=r(e[s])).length&&(n=n.join("\n"),i=t.exec(n)))return{url:e[s],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1};return null}function h(t,e,n){var i,s=r(e),o=new RegExp("\\b"+u(t)+"\\b");return n-=1,s&&s.length>n&&(i=o.exec(s[n]))?i.index:null}function p(e){if(!a(t&&t.document)){for(var n,r,i,s,o=[t.location.href],c=t.document.getElementsByTagName("script"),h=""+e,p=0;p<c.length;++p){var m=c[p];m.src&&o.push(m.src)}if(i=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(h)){var f=i[1]?"\\s+"+i[1]:"",g=i[2].split(",").join("\\s*,\\s*");n=u(i[3]).replace(/;$/,";?"),r=new RegExp("function"+f+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else r=new RegExp(u(h).replace(/\s+/g,"\\s+"));if(s=d(r,o))return s;if(i=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(h)){var _=i[1];if(n=l(i[2]),s=d(r=new RegExp("on"+_+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o[0]))return s;if(s=d(r=new RegExp(n),o))return s}return null}}function m(t){if(!t.stack)return null;for(var e,n,r,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p=/\((\S*)(?::(\d+))(?::(\d+))\)/,m=t.stack.split("\n"),f=[],g=/^(.*) is undefined$/.exec(t.message),_=0,v=m.length;_<v;++_){if(n=o.exec(m[_])){var b=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=p.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:b?null:n[2],func:n[1]||i,args:b?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=l.exec(m[_]))r={url:n[2],func:n[1]||i,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=u.exec(m[_])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=d.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==_||n[5]||a(t.columnNumber)||(f[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||i,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=s(r.url,r.line)),r.context=r.line?c(r.url,r.line):null,f.push(r)}return f.length?(f[0]&&f[0].line&&!f[0].column&&g&&(f[0].column=h(g[1],f[0].url,f[0].line)),{mode:"stack",name:t.name,message:t.message,stack:f}):null}function f(t,e,n,r){var i={url:e,line:n};if(i.url&&i.line){t.incomplete=!1,i.func||(i.func=s(i.url,i.line)),i.context||(i.context=c(i.url,i.line));var o=/ '([^']+)' /.exec(r);if(o&&(i.column=h(o[1],i.url,i.line)),t.stack.length>0&&t.stack[0].url===i.url){if(t.stack[0].line===i.line)return!1;if(!t.stack[0].line&&t.stack[0].func===i.func)return t.stack[0].line=i.line,t.stack[0].context=i.context,!1}return t.stack.unshift(i),t.partial=!0,!0}return t.incomplete=!0,!1}function g(t,n){for(var r,o,a,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],l={},d=!1,m=g.caller;m&&!d;m=m.caller)if(m!==_&&m!==e.report){if(o={url:null,func:i,args:[],line:null,column:null},m.name?o.func=m.name:(r=c.exec(m.toString()))&&(o.func=r[1]),void 0===o.func)try{o.func=r.input.substring(0,r.input.indexOf("{"))}catch(y){}if(a=p(m)){o.url=a.url,o.line=a.line,o.func===i&&(o.func=s(o.url,o.line));var v=/ '([^']+)' /.exec(t.message||t.description);v&&(o.column=h(v[1],a.url,a.line))}l[""+m]?d=!0:l[""+m]=!0,u.push(o)}n&&u.splice(0,n);var b={mode:"callers",name:t.name,message:t.message,stack:u};return f(b,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),b}function _(e,n){var i=null;n=null==n?0:+n;try{if(i=function(t){var e=t.stacktrace;if(e){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=e.split("\n"),a=[],u=0;u<o.length;u+=2){var l=null;if((n=r.exec(o[u]))?l={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=i.exec(o[u]))&&(l={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),l){if(!l.func&&l.line&&(l.func=s(l.url,l.line)),l.line)try{l.context=c(l.url,l.line)}catch(d){}l.context||(l.context=[o[u+1]]),a.push(l)}}return a.length?{mode:"stacktrace",name:t.name,message:t.message,stack:a}:null}}(e),i)return i}catch(a){}try{if(i=m(e))return i}catch(a){}try{if(i=function(e){var n=e.message.split("\n");if(n.length<4)return null;var i,a=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,u=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of function script\s*$/i,p=[],m=t&&t.document&&t.document.getElementsByTagName("script"),f=[];for(var g in m)o(m,g)&&!m[g].src&&f.push(m[g]);for(var _=2;_<n.length;_+=2){var v=null;if(i=a.exec(n[_]))v={url:i[2],func:i[3],args:[],line:+i[1],column:null};else if(i=u.exec(n[_])){v={url:i[3],func:i[4],args:[],line:+i[1],column:null};var b=+i[1],y=f[i[2]-1];if(y){var w=r(v.url);if(w){var S=(w=w.join("\n")).indexOf(y.innerText);S>=0&&(v.line=b+w.substring(0,S).split("\n").length)}}}else if(i=h.exec(n[_])){var x=t.location.href.replace(/#.*$/,""),E=d(new RegExp(l(n[_+1])),[x]);v={url:x,func:"",args:[],line:E?E.line:i[1],column:null}}if(v){v.func||(v.func=s(v.url,v.line));var T=c(v.url,v.line),A=T?T[Math.floor(T.length/2)]:null;T&&A.replace(/^\s*/,"")===n[_+1].replace(/^\s*/,"")?v.context=T:v.context=[n[_+1]],p.push(v)}}return p.length?{mode:"multiline",name:e.name,message:n[0],stack:p}:null}(e),i)return i}catch(a){}try{if(i=g(e,n+1))return i}catch(a){}return{name:e.name,message:e.message,mode:"failed"}}return _.augmentStackTraceWithInitialElement=f,_.computeStackTraceFromStackProp=m,_.guessFunctionName=s,_.gatherContext=c,_.ofCaller=function(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return _(e,t+1)}},_.getSource=r,_}(),e.extendToAsynchronousCallbacks=function(){var n=function(n){var i=t[n];t[n]=function(){var t=r.call(arguments),n=t[0];return"function"==typeof n&&(t[0]=e.wrap(n)),i.apply?i.apply(this,t):i(t[0],t[1])}};n("setTimeout"),n("setInterval")},e.remoteFetching||(e.remoteFetching=!0),e.collectWindowErrors||(e.collectWindowErrors=!0),(!e.linesOfContext||e.linesOfContext<1)&&(e.linesOfContext=11),$r.exports&&t.module!==$r?$r.exports=e:t.TraceKit=e}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){return void 0===t}}("undefined"!=typeof window?window:globalThis)),Ur.exports);class Fr{_delegate;constructor(t){this._delegate=t}export(t,e){this._delegate.export(t,e)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}class Gr extends Error{code;name="OTLPExporterError";data;constructor(t,e,n){super(t),this.data=n,this.code=e}}function zr(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function Vr(t){if(null!=t)return()=>t}function Hr(t,e,n){return{timeoutMillis:zr(t.timeoutMillis??e.timeoutMillis??n.timeoutMillis),concurrencyLimit:t.concurrencyLimit??e.concurrencyLimit??n.concurrencyLimit,compression:t.compression??e.compression??n.compression}}class Wr{_concurrencyLimit;_sendingPromises=[];constructor(t){this._concurrencyLimit=t}pushPromise(t){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(t);const e=()=>{const e=this._sendingPromises.indexOf(t);this._sendingPromises.splice(e,1)};t.then(e,e)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function qr(t){return new Wr(t.concurrencyLimit)}function Kr(){return{handleResponse(t){null!=t&&function(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}(t)&&null!=t.partialSuccess&&0!==Object.keys(t.partialSuccess).length&&Nt.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess))}}}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(jr||(jr={}));class Xr{_transport;_serializer;_responseHandler;_promiseQueue;_timeout;_diagLogger;constructor(t,e,n,r,i){this._transport=t,this._serializer=e,this._responseHandler=n,this._promiseQueue=r,this._timeout=i,this._diagLogger=Nt.createComponentLogger({namespace:"OTLPExportDelegate"})}export(t,e){if(this._diagLogger.debug("items to be sent",t),this._promiseQueue.hasReachedLimit())return void e({code:jr.FAILED,error:new Error("Concurrent export limit reached")});const n=this._serializer.serializeRequest(t);null!=n?this._promiseQueue.pushPromise(this._transport.send(n,this._timeout).then(t=>{if("success"!==t.status)"failure"===t.status&&t.error?e({code:jr.FAILED,error:t.error}):"retryable"===t.status?e({code:jr.FAILED,error:new Gr("Export failed with retryable status")}):e({code:jr.FAILED,error:new Gr("Export failed with unknown error")});else{if(null!=t.data)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(t.data))}catch(n){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",n,t.data)}e({code:jr.SUCCESS})}},t=>e({code:jr.FAILED,error:t}))):e({code:jr.FAILED,error:new Error("Nothing to send")})}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function Yr(t,e,n){return r={transport:n,serializer:e,promiseHandler:qr(t)},i={timeout:t.timeoutMillis},new Xr(r.transport,r.serializer,Kr(),r.promiseHandler,i.timeout);var r,i}const Jr=Math.pow(10,9);function Qr(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function Zr(t){const e=new Uint8Array(t.length/2);let n=0;for(let r=0;r<t.length;r+=2){const i=Qr(t.charCodeAt(r)),s=Qr(t.charCodeAt(r+1));e[n++]=i<<4|s}return e}function ti(t){const e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function ei(t){const e=ti(t);return n=e,{low:Number(BigInt.asUintN(32,n)),high:Number(BigInt.asUintN(32,n>>BigInt(32)))};var n}const ni="undefined"!=typeof BigInt?function(t){return ti(t).toString()}:function(t){return t[0]*Jr+t[1]};function ri(t){return t}function ii(t){if(void 0!==t)return Zr(t)}const si={encodeHrTime:ei,encodeSpanContext:Zr,encodeOptionalSpanContext:ii};function oi(t){if(void 0===t)return si;const e=t.useLongBits??!0,n=t.useHex??!1;return{encodeHrTime:e?ei:ni,encodeSpanContext:n?ri:Zr,encodeOptionalSpanContext:n?ri:ii}}function ai(t){return{attributes:ui(t.attributes),droppedAttributesCount:0}}function ci(t){return{name:t.name,version:t.version}}function ui(t){return Object.keys(t).map(e=>li(e,t[e]))}function li(t,e){return{key:t,value:di(e)}}function di(t){const e=typeof t;return"string"===e?{stringValue:t}:"number"===e?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===e?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(di)}}:"object"===e&&null!=t?{kvlistValue:{values:Object.entries(t).map(([t,e])=>li(t,e))}}:{}}function hi(t,e){const n=function(t){const e=new Map;for(const n of t){const{resource:t,instrumentationScope:{name:r,version:i="",schemaUrl:s=""}}=n;let o=e.get(t);o||(o=new Map,e.set(t,o));const a=`${r}@${i}:${s}`;let c=o.get(a);c||(c=[],o.set(a,c)),c.push(n)}return e}(t);return Array.from(n,([t,n])=>({resource:ai(t),scopeLogs:Array.from(n,([,t])=>({scope:ci(t[0].instrumentationScope),logRecords:t.map(t=>function(t,e){return{timeUnixNano:e.encodeHrTime(t.hrTime),observedTimeUnixNano:e.encodeHrTime(t.hrTimeObserved),severityNumber:t.severityNumber,severityText:t.severityText,body:di(t.body),eventName:t.eventName,attributes:pi(t.attributes),droppedAttributesCount:t.droppedAttributesCount,flags:t.spanContext?.traceFlags,traceId:e.encodeOptionalSpanContext(t.spanContext?.traceId),spanId:e.encodeOptionalSpanContext(t.spanContext?.spanId)}}(t,e)),schemaUrl:t[0].instrumentationScope.schemaUrl})),schemaUrl:void 0}))}function pi(t){return Object.keys(t).map(e=>li(e,t[e]))}var mi,fi,gi,_i,vi,bi,yi,wi,Si,xi;function Ei(t,e){return Array.from(t.map(t=>({scope:ci(t.scope),metrics:t.metrics.map(t=>function(t,e){const n={name:t.descriptor.name,description:t.descriptor.description,unit:t.descriptor.unit},r=function(t){switch(t){case mi.DELTA:return Si.AGGREGATION_TEMPORALITY_DELTA;case mi.CUMULATIVE:return Si.AGGREGATION_TEMPORALITY_CUMULATIVE}}(t.aggregationTemporality);switch(t.dataPointType){case vi.SUM:n.sum={aggregationTemporality:r,isMonotonic:t.isMonotonic,dataPoints:Ti(t,e)};break;case vi.GAUGE:n.gauge={dataPoints:Ti(t,e)};break;case vi.HISTOGRAM:n.histogram={aggregationTemporality:r,dataPoints:Ai(t,e)};break;case vi.EXPONENTIAL_HISTOGRAM:n.exponentialHistogram={aggregationTemporality:r,dataPoints:Ci(t,e)}}return n}(t,e)),schemaUrl:t.scope.schemaUrl})))}function Ti(t,e){return t.dataPoints.map(n=>function(t,e,n){const r={attributes:ui(t.attributes),startTimeUnixNano:n.encodeHrTime(t.startTime),timeUnixNano:n.encodeHrTime(t.endTime)};switch(e){case C.INT:r.asInt=t.value;break;case C.DOUBLE:r.asDouble=t.value}return r}(n,t.descriptor.valueType,e))}function Ai(t,e){return t.dataPoints.map(t=>{const n=t.value;return{attributes:ui(t.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Ci(t,e){return t.dataPoints.map(t=>{const n=t.value;return{attributes:ui(t.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Pi(t,e){return{resourceMetrics:t.map(t=>function(t,e){const n=oi(e);return{resource:ai(t.resource),schemaUrl:void 0,scopeMetrics:Ei(t.scopeMetrics,n)}}(t,e))}}function Oi(t,e){const n=t.spanContext(),r=t.status,i=t.parentSpanContext?.spanId?e.encodeSpanContext(t.parentSpanContext?.spanId):void 0;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:i,traceState:n.traceState?.serialize(),name:t.name,kind:null==t.kind?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:ui(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(t=>function(t,e){return{attributes:t.attributes?ui(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)),droppedEventsCount:t.droppedEventsCount,status:{code:r.code,message:r.message},links:t.links.map(t=>function(t,e){return{attributes:t.attributes?ui(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:t.context.traceState?.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)),droppedLinksCount:t.droppedLinksCount}}function ki(t,e){const n=function(t){const e=new Map;for(const n of t){let t=e.get(n.resource);t||(t=new Map,e.set(n.resource,t));const r=`${n.instrumentationScope.name}@${n.instrumentationScope.version||""}:${n.instrumentationScope.schemaUrl||""}`;let i=t.get(r);i||(i=[],t.set(r,i)),i.push(n)}return e}(t),r=[],i=n.entries();let s=i.next();for(;!s.done;){const[t,n]=s.value,o=[],a=n.values();let c=a.next();for(;!c.done;){const t=c.value;if(t.length>0){const n=t.map(t=>Oi(t,e));o.push({scope:ci(t[0].instrumentationScope),spans:n,schemaUrl:t[0].instrumentationScope.schemaUrl})}c=a.next()}const u={resource:ai(t),scopeSpans:o,schemaUrl:void 0};r.push(u),s=i.next()}return r}(fi=mi||(mi={}))[fi.DELTA=0]="DELTA",fi[fi.CUMULATIVE=1]="CUMULATIVE",(_i=gi||(gi={})).COUNTER="COUNTER",_i.GAUGE="GAUGE",_i.HISTOGRAM="HISTOGRAM",_i.UP_DOWN_COUNTER="UP_DOWN_COUNTER",_i.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",_i.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",_i.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER",(bi=vi||(vi={}))[bi.HISTOGRAM=0]="HISTOGRAM",bi[bi.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",bi[bi.GAUGE=2]="GAUGE",bi[bi.SUM=3]="SUM",(wi=yi||(yi={}))[wi.DEFAULT=0]="DEFAULT",wi[wi.DROP=1]="DROP",wi[wi.SUM=2]="SUM",wi[wi.LAST_VALUE=3]="LAST_VALUE",wi[wi.EXPLICIT_BUCKET_HISTOGRAM=4]="EXPLICIT_BUCKET_HISTOGRAM",wi[wi.EXPONENTIAL_HISTOGRAM=5]="EXPONENTIAL_HISTOGRAM",(xi=Si||(Si={}))[xi.AGGREGATION_TEMPORALITY_UNSPECIFIED=0]="AGGREGATION_TEMPORALITY_UNSPECIFIED",xi[xi.AGGREGATION_TEMPORALITY_DELTA=1]="AGGREGATION_TEMPORALITY_DELTA",xi[xi.AGGREGATION_TEMPORALITY_CUMULATIVE=2]="AGGREGATION_TEMPORALITY_CUMULATIVE";const Li={serializeRequest:t=>{const e={resourceLogs:hi(t,oi({useHex:!0,useLongBits:!1}))};return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{if(0===t.length)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}},Mi={serializeRequest:t=>{const e=Pi([t],{useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{if(0===t.length)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}},Ri={serializeRequest:t=>{const e={resourceSpans:ki(t,oi({useHex:!0,useLongBits:!1}))};return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{if(0===t.length)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}};function Ni(){return.4*Math.random()-.2}class Ii{_transport;constructor(t){this._transport=t}retry(t,e,n){return new Promise((r,i)=>{setTimeout(()=>{this._transport.send(t,e).then(r,i)},n)})}async send(t,e){const n=Date.now()+e;let r=await this._transport.send(t,e),i=5,s=1e3;for(;"retryable"===r.status&&i>0;){i--;const e=Math.max(Math.min(s,5e3)+Ni(),0);s*=1.5;const o=r.retryInMillis??e,a=n-Date.now();if(o>a)return r;r=await this.retry(t,a,o)}return r}shutdown(){return this._transport.shutdown()}}function Di(t){return new Ii(t.transport)}function Ui(t){if(null==t)return;const e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?1e3*e:-1;const n=new Date(t).getTime()-Date.now();return n>=0?n:0}class $i{_parameters;constructor(t){this._parameters=t}send(t,e){return new Promise(n=>{const r=new XMLHttpRequest;r.timeout=e,r.open("POST",this._parameters.url);const i=this._parameters.headers();Object.entries(i).forEach(([t,e])=>{r.setRequestHeader(t,e)}),r.ontimeout=t=>{n({status:"failure",error:new Error("XHR request timed out")})},r.onreadystatechange=()=>{var t;r.status>=200&&r.status<=299?(Nt.debug("XHR success"),n({status:"success"})):r.status&&(t=r.status,[429,502,503,504].includes(t))?n({status:"retryable",retryInMillis:Ui(r.getResponseHeader("Retry-After"))}):0!==r.status&&n({status:"failure",error:new Error("XHR request failed with non-retryable status")})},r.onabort=()=>{n({status:"failure",error:new Error("XHR request aborted")})},r.onerror=()=>{n({status:"failure",error:new Error("XHR request errored")})},r.send(t)})}shutdown(){}}class ji{_params;constructor(t){this._params=t}send(t){return new Promise(e=>{navigator.sendBeacon(this._params.url,new Blob([t],{type:this._params.blobType}))?(Nt.debug("SendBeacon success"),e({status:"success"})):e({status:"failure",error:new Error("SendBeacon failed")})})}shutdown(){}}function Bi(t,e,n){const r={...n()},i={};return()=>(null!=e&&Object.assign(i,e()),null!=t&&Object.assign(i,t()),Object.assign(i,r))}function Fi(t){if(null!=t)try{return new URL(t),t}catch{throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function Gi(t,e,n){return r={url:t.url,timeoutMillis:t.timeoutMillis,headers:Vr(t.headers),concurrencyLimit:t.concurrencyLimit},i={},s=function(t,e){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none",headers:()=>t,url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}}}(n,e),{...Hr(r,i,s),headers:Bi((o=r.headers,()=>{const t={};return Object.entries(o?.()??{}).forEach(([e,n])=>{void 0!==n?t[e]=String(n):Nt.warn(`Header "${e}" has invalid value (${n}) and will be ignored`)}),t}),i.headers,s.headers),url:Fi(r.url)??i.url??s.url,agentOptions:r.agentOptions??i.agentOptions??s.agentOptions};var r,i,s,o}function zi(t,e,n,r){const i=!!t.headers||"function"!=typeof navigator.sendBeacon,s=Gi(t,n,r);return i?function(t,e){return Yr(t,e,Di({transport:(n=t,new $i(n))}));var n}(s,e):function(t,e){return Yr(t,e,Di({transport:(n={url:t.url,blobType:t.headers()["Content-Type"]},new ji(n))}));var n}(s,e)}class Vi extends Fr{constructor(t={}){super(zi(t,Ri,"v1/traces",{"Content-Type":"application/json"}))}}var Hi,Wi;(Wi=Hi||(Hi={}))[Wi.DELTA=0]="DELTA",Wi[Wi.CUMULATIVE=1]="CUMULATIVE",Wi[Wi.LOWMEMORY=2]="LOWMEMORY";const qi=()=>mi.CUMULATIVE,Ki=t=>{switch(t){case gi.COUNTER:case gi.OBSERVABLE_COUNTER:case gi.GAUGE:case gi.HISTOGRAM:case gi.OBSERVABLE_GAUGE:return mi.DELTA;case gi.UP_DOWN_COUNTER:case gi.OBSERVABLE_UP_DOWN_COUNTER:return mi.CUMULATIVE}},Xi=t=>{switch(t){case gi.COUNTER:case gi.HISTOGRAM:return mi.DELTA;case gi.GAUGE:case gi.UP_DOWN_COUNTER:case gi.OBSERVABLE_UP_DOWN_COUNTER:case gi.OBSERVABLE_COUNTER:case gi.OBSERVABLE_GAUGE:return mi.CUMULATIVE}};function Yi(t){return null!=t?t===Hi.DELTA?Ki:t===Hi.LOWMEMORY?Xi:qi:function(){const t="cumulative".toLowerCase();return"cumulative"===t?qi:"delta"===t?Ki:"lowmemory"===t?Xi:(Nt.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${t}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`),qi)}()}const Ji=Object.freeze({type:yi.DEFAULT});class Qi extends Fr{_aggregationTemporalitySelector;_aggregationSelector;constructor(t,e){super(t),this._aggregationSelector=function(t){return t?.aggregationPreference??(()=>Ji)}(e),this._aggregationTemporalitySelector=Yi(e?.temporalityPreference)}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}}class Zi extends Qi{constructor(t){super(zi(t??{},Mi,"v1/metrics",{"Content-Type":"application/json"}),t)}}class ts extends Fr{constructor(t={}){super(zi(t,Li,"v1/logs",{"Content-Type":"application/json"}))}}class es{_sessionIdProvider;constructor(t){this._sessionIdProvider=t}async forceFlush(){}onStart(t,e){const n=this._sessionIdProvider?.getSessionId();n&&t.setAttribute("session.id",n)}onEnd(t){}async shutdown(){}}var ns,rs={exports:{}},is=rs.exports;var ss=(ns||(ns=1,function(t,e){!function(n,r){var i="function",s="undefined",o="object",a="string",c="major",u="model",l="name",d="type",h="vendor",p="version",m="architecture",f="console",g="mobile",_="tablet",v="smarttv",b="wearable",y="embedded",w="Amazon",S="Apple",x="ASUS",E="BlackBerry",T="Browser",A="Chrome",C="Firefox",P="Google",O="Huawei",k="LG",L="Microsoft",M="Motorola",R="Opera",N="Samsung",I="Sharp",D="Sony",U="Xiaomi",$="Zebra",j="Facebook",B="Chromium OS",F="Mac OS",G=" Browser",z=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},V=function(t,e){return typeof t===a&&-1!==H(e).indexOf(H(t))},H=function(t){return t.toLowerCase()},W=function(t,e){if(typeof t===a)return t=t.replace(/^\s\s*/,""),typeof e===s?t:t.substring(0,500)},q=function(t,e){for(var n,s,a,c,u,l,d=0;d<e.length&&!u;){var h=e[d],p=e[d+1];for(n=s=0;n<h.length&&!u&&h[n];)if(u=h[n++].exec(t))for(a=0;a<p.length;a++)l=u[++s],typeof(c=p[a])===o&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):r:this[c[0]]=l?c[1].call(this,l,c[2]):r:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):r):this[c]=l||r;d+=2}},K=function(t,e){for(var n in e)if(typeof e[n]===o&&e[n].length>0){for(var i=0;i<e[n].length;i++)if(V(e[n][i],t))return"?"===n?r:n}else if(V(e[n],t))return"?"===n?r:n;return e.hasOwnProperty("*")?e["*"]:t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,R+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[l,R+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[l,R]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[l,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[p,[l,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[l,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[l,"Smart Lenovo "+T]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+T],p],[/\bfocus\/([\w\.]+)/i],[p,[l,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI"+G]],[/fxios\/([\w\.-]+)/i],[p,[l,C]],[/\bqihoobrowser\/?([\w\.]*)/i],[p,[l,"360"]],[/\b(qq)\/([\w\.]+)/i],[[l,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+G],p],[/samsungbrowser\/([\w\.]+)/i],[p,[l,N+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[p,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[l,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[l],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[p,l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,j],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,A+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/(wolvic|librewolf)\/([\w\.]+)/i],[l,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,H]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,N],[d,_]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,N],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[h,S],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,S],[d,_]],[/(macintosh);/i],[u,[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,I],[d,g]],[/(?:honor)([-\w ]+)[;\)]/i],[u,[h,"Honor"],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,O],[d,_]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,O],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[h,U],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,U],[d,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[u,[h,"OPPO"],[d,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,M],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,M],[d,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,k],[d,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,k],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[d,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[h,P],[d,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,P],[d,g]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,D],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,D],[d,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,w],[d,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,w],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[d,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,E],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,x],[d,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,x],[d,g]],[/(nexus 9)/i],[u,[h,"HTC"],[d,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[d,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[h,"TCL"],[d,_]],[/(itel) ((\w+))/i],[[h,H],u,[d,K,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[d,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[h,"Ulefone"],[d,g]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[u,[h,"Energizer"],[d,g]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[u,[h,"Cat"],[d,g]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[u,[h,"Smartfren"],[d,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[h,"Nothing"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[d,g]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[d,_]],[/(surface duo)/i],[u,[h,L],[d,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[h,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[d,_]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[d,_]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[d,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[d,_]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[d,_]],[/\b(k88) b/i],[u,[h,"ZTE"],[d,_]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[d,_]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[d,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[d,_]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[d,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[d,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[h,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[d,_]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[d,_]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[d,_]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[d,_]],[/(sprint) (\w+)/i],[h,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,L],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,$],[d,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,$],[d,g]],[/smart-tv.+(samsung)/i],[h,[d,v]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,N],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,k],[d,v]],[/(apple) ?tv/i],[h,[u,S+" TV"],[d,v]],[/crkey/i],[[u,A+"cast"],[h,P],[d,v]],[/droid.+aft(\w+)( bui|\))/i],[u,[h,w],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,I],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,D],[d,v]],[/(mitv-\w{5}) bui/i],[u,[h,U],[d,v]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,W],[u,W],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[d,f]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[d,f]],[/(playstation [345portablevi]+)/i],[u,[h,D],[d,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,L],[d,f]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[h,N],[d,b]],[/((pebble))app/i],[h,u,[d,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,S],[d,b]],[/droid.+; (glass) \d/i],[u,[h,P],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,$],[d,b]],[/droid.+; (glass) \d/i],[u,[h,P],[d,b]],[/(pico) (4|neo3(?: link|pro)?)/i],[h,u,[d,b]],[/; (quest( \d| pro)?)/i],[u,[h,j],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,y]],[/(aeobc)\b/i],[u,[h,w],[d,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[l,p],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[p,K,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,K,X],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,F],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,p]]},J=function(t,e){if(typeof t===o&&(e=t,t=r),!(this instanceof J))return new J(t,e).getResult();var f=typeof n!==s&&n.navigator?n.navigator:r,v=t||(f&&f.userAgent?f.userAgent:""),b=f&&f.userAgentData?f.userAgentData:r,y=e?function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n}(Y,e):Y,w=f&&f.userAgent==v;return this.getBrowser=function(){var t,e={};return e[l]=r,e[p]=r,q.call(e,v,y.browser),e[c]=typeof(t=e[p])===a?t.replace(/[^\d\.]/g,"").split(".")[0]:r,w&&f&&f.brave&&typeof f.brave.isBrave==i&&(e[l]="Brave"),e},this.getCPU=function(){var t={};return t[m]=r,q.call(t,v,y.cpu),t},this.getDevice=function(){var t={};return t[h]=r,t[u]=r,t[d]=r,q.call(t,v,y.device),w&&!t[d]&&b&&b.mobile&&(t[d]=g),w&&"Macintosh"==t[u]&&f&&typeof f.standalone!==s&&f.maxTouchPoints&&f.maxTouchPoints>2&&(t[u]="iPad",t[d]=_),t},this.getEngine=function(){var t={};return t[l]=r,t[p]=r,q.call(t,v,y.engine),t},this.getOS=function(){var t={};return t[l]=r,t[p]=r,q.call(t,v,y.os),w&&!t[l]&&b&&b.platform&&"Unknown"!=b.platform&&(t[l]=b.platform.replace(/chrome os/i,B).replace(/macos/i,F)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return v},this.setUA=function(t){return v=typeof t===a&&t.length>500?W(t,500):t,this},this.setUA(v),this};J.VERSION="1.0.40",J.BROWSER=z([l,p,c]),J.CPU=z([m]),J.DEVICE=z([u,h,d,f,g,v,_,b,y]),J.ENGINE=J.OS=z([l,p]),t.exports&&(e=t.exports=J),e.UAParser=J;var Q=typeof n!==s&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var Z=new J;Q.ua=Z.getResult(),Q.ua.get=function(){return Z.getUA()},Q.ua.set=function(t){Z.setUA(t);var e=Z.getResult();for(var n in e)Q.ua[n]=e[n]}}}("object"==typeof window?window:is)}(rs,rs.exports)),rs.exports);const os=t(ss);var as,cs,us,ls,ds;function hs(t){return null!=t}function ps(t){let e=Object.keys(t);return 0===e.length?"":(e=e.sort(),JSON.stringify(e.map(e=>[e,t[e]])))}!function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE"}(as||(as={})),function(t){t.COUNTER="COUNTER",t.GAUGE="GAUGE",t.HISTOGRAM="HISTOGRAM",t.UP_DOWN_COUNTER="UP_DOWN_COUNTER",t.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",t.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",t.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(cs||(cs={})),function(t){t[t.HISTOGRAM=0]="HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",t[t.GAUGE=2]="GAUGE",t[t.SUM=3]="SUM"}(us||(us={}));class ms extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ms.prototype)}}function fs(t,e){let n;const r=new Promise(function(t,r){n=setTimeout(function(){r(new ms("Operation timed out."))},e)});return Promise.race([t,r]).then(t=>(clearTimeout(n),t),t=>{throw clearTimeout(n),t})}function gs(t){return"rejected"===t.status}function _s(t,e){const n=[];return t.forEach(t=>{n.push(...e(t))}),n}(ds=ls||(ls={}))[ds.DROP=0]="DROP",ds[ds.SUM=1]="SUM",ds[ds.LAST_VALUE=2]="LAST_VALUE",ds[ds.HISTOGRAM=3]="HISTOGRAM",ds[ds.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM";class vs{kind=ls.DROP;createAccumulation(){}merge(t,e){}diff(t,e){}toMetricData(t,e,n,r){}}class bs{startTime;_boundaries;_recordMinMax;_current;constructor(t,e,n=!0,r=function(t){const e=t.map(()=>0);return e.push(0),{buckets:{boundaries:t,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}(e)){this.startTime=t,this._boundaries=e,this._recordMinMax=n,this._current=r}record(t){if(Number.isNaN(t))return;this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);const e=function(t,e){let n=0,r=t.length-1,i=t.length;for(;r>=n;){const s=n+Math.trunc((r-n)/2);t[s]<e?n=s+1:(i=s,r=s-1)}return i}(this._boundaries,t);this._current.buckets.counts[e]+=1}setStartTime(t){this.startTime=t}toPointValue(){return this._current}}class ys{_boundaries;_recordMinMax;kind=ls.HISTOGRAM;constructor(t,e){this._boundaries=t,this._recordMinMax=e}createAccumulation(t){return new bs(t,this._boundaries,this._recordMinMax)}merge(t,e){const n=t.toPointValue(),r=e.toPointValue(),i=n.buckets.counts,s=r.buckets.counts,o=new Array(i.length);for(let u=0;u<i.length;u++)o[u]=i[u]+s[u];let a=1/0,c=-1/0;return this._recordMinMax&&(n.hasMinMax&&r.hasMinMax?(a=Math.min(n.min,r.min),c=Math.max(n.max,r.max)):n.hasMinMax?(a=n.min,c=n.max):r.hasMinMax&&(a=r.min,c=r.max)),new bs(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:o},count:n.count+r.count,sum:n.sum+r.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||r.hasMinMax),min:a,max:c})}diff(t,e){const n=t.toPointValue(),r=e.toPointValue(),i=n.buckets.counts,s=r.buckets.counts,o=new Array(i.length);for(let a=0;a<i.length;a++)o[a]=s[a]-i[a];return new bs(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:o},count:r.count-n.count,sum:r.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:us.HISTOGRAM,dataPoints:n.map(([e,n])=>{const i=n.toPointValue(),s=t.type===cs.GAUGE||t.type===cs.UP_DOWN_COUNTER||t.type===cs.OBSERVABLE_GAUGE||t.type===cs.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:e,startTime:n.startTime,endTime:r,value:{min:i.hasMinMax?i.min:void 0,max:i.hasMinMax?i.max:void 0,sum:s?void 0:i.sum,buckets:i.buckets,count:i.count}}})}}}class ws{backing;indexBase;indexStart;indexEnd;constructor(t=new Ss,e=0,n=0,r=0){this.backing=t,this.indexBase=e,this.indexStart=n,this.indexEnd=r}get offset(){return this.indexStart}get length(){return 0===this.backing.length||this.indexEnd===this.indexStart&&0===this.at(0)?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},(t,e)=>this.at(e))}at(t){const e=this.indexBase-this.indexStart;return t<e&&(t+=this.backing.length),t-=e,this.backing.countAt(t)}incrementBucket(t,e){this.backing.increment(t,e)}decrementBucket(t,e){this.backing.decrement(t,e)}trim(){for(let t=0;t<this.length;t++){if(0!==this.at(t)){this.indexStart+=t;break}if(t===this.length-1)return void(this.indexStart=this.indexEnd=this.indexBase=0)}for(let t=this.length-1;t>=0;t--)if(0!==this.at(t)){this.indexEnd-=this.length-t-1;break}this._rotate()}downscale(t){this._rotate();const e=1+this.indexEnd-this.indexStart,n=1<<t;let r=0,i=0;for(let s=this.indexStart;s<=this.indexEnd;){let t=s%n;t<0&&(t+=n);for(let o=t;o<n&&r<e;o++)this._relocateBucket(i,r),r++,s++;i++}this.indexStart>>=t,this.indexEnd>>=t,this.indexBase=this.indexStart}clone(){return new ws(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){const t=this.indexBase-this.indexStart;0!==t&&(t>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,t),this.backing.reverse(t,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+t)),this.indexBase=this.indexStart)}_relocateBucket(t,e){t!==e&&this.incrementBucket(t,this.backing.emptyBucket(e))}}class Ss{_counts;constructor(t=[0]){this._counts=t}get length(){return this._counts.length}countAt(t){return this._counts[t]}growTo(t,e,n){const r=new Array(t).fill(0);r.splice(n,this._counts.length-e,...this._counts.slice(e)),r.splice(0,e,...this._counts.slice(0,e)),this._counts=r}reverse(t,e){const n=Math.floor((t+e)/2)-t;for(let r=0;r<n;r++){const n=this._counts[t+r];this._counts[t+r]=this._counts[e-r-1],this._counts[e-r-1]=n}}emptyBucket(t){const e=this._counts[t];return this._counts[t]=0,e}increment(t,e){this._counts[t]+=e}decrement(t,e){this._counts[t]>=e?this._counts[t]-=e:this._counts[t]=0}clone(){return new Ss([...this._counts])}}const xs=1023,Es=xs,Ts=Math.pow(2,-1022);function As(t){const e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);return((2146435072&e.getUint32(0))>>20)-xs}function Cs(t){const e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);const n=e.getUint32(0),r=e.getUint32(4);return(1048575&n)*Math.pow(2,32)+r}function Ps(t,e){return 0===t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY||Number.isNaN(t)?t:t*Math.pow(2,e)}class Os extends Error{}class ks{_shift;constructor(t){this._shift=-t}mapToIndex(t){if(t<Ts)return this._minNormalLowerBoundaryIndex();return As(t)+this._rightShift(Cs(t)-1,52)>>this._shift}lowerBoundary(t){const e=this._minNormalLowerBoundaryIndex();if(t<e)throw new Os(`underflow: ${t} is < minimum lower boundary: ${e}`);const n=this._maxNormalLowerBoundaryIndex();if(t>n)throw new Os(`overflow: ${t} is > maximum lower boundary: ${n}`);return Ps(1,t<<this._shift)}get scale(){return 0===this._shift?0:-this._shift}_minNormalLowerBoundaryIndex(){let t=-1022>>this._shift;return this._shift<2&&t--,t}_maxNormalLowerBoundaryIndex(){return Es>>this._shift}_rightShift(t,e){return Math.floor(t*Math.pow(2,-e))}}class Ls{_scale;_scaleFactor;_inverseFactor;constructor(t){this._scale=t,this._scaleFactor=Ps(Math.LOG2E,t),this._inverseFactor=Ps(Math.LN2,-t)}mapToIndex(t){if(t<=Ts)return this._minNormalLowerBoundaryIndex()-1;if(0===Cs(t)){return(As(t)<<this._scale)-1}const e=Math.floor(Math.log(t)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return e>=n?n:e}lowerBoundary(t){const e=this._maxNormalLowerBoundaryIndex();if(t>=e){if(t===e)return 2*Math.exp((t-(1<<this._scale))/this._scaleFactor);throw new Os(`overflow: ${t} is > maximum lower boundary: ${e}`)}const n=this._minNormalLowerBoundaryIndex();if(t<=n){if(t===n)return Ts;if(t===n-1)return Math.exp((t+(1<<this._scale))/this._scaleFactor)/2;throw new Os(`overflow: ${t} is < minimum lower boundary: ${n}`)}return Math.exp(t*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return-1022<<this._scale}_maxNormalLowerBoundaryIndex(){return(1024<<this._scale)-1}}const Ms=Array.from({length:31},(t,e)=>e>10?new Ls(e-10):new ks(e-10));function Rs(t){if(t>20||t<-10)throw new Os(`expected scale >= -10 && <= 20, got: ${t}`);return Ms[t+10]}class Ns{low;high;static combine(t,e){return new Ns(Math.min(t.low,e.low),Math.max(t.high,e.high))}constructor(t,e){this.low=t,this.high=e}}class Is{startTime;_maxSize;_recordMinMax;_sum;_count;_zeroCount;_min;_max;_positive;_negative;_mapping;constructor(t=t,e=160,n=!0,r=0,i=0,s=0,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=new ws,u=new ws,l=Rs(20)){this.startTime=t,this._maxSize=e,this._recordMinMax=n,this._sum=r,this._count=i,this._zeroCount=s,this._min=o,this._max=a,this._positive=c,this._negative=u,this._mapping=l,this._maxSize<2&&(Nt.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: 2`),this._maxSize=2)}record(t){this.updateByIncrement(t,1)}setStartTime(t){this.startTime=t}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(t,e){Number.isNaN(t)||(t>this._max&&(this._max=t),t<this._min&&(this._min=t),this._count+=e,0!==t?(this._sum+=t*e,t>0?this._updateBuckets(this._positive,t,e):this._updateBuckets(this._negative,-t,e)):this._zeroCount+=e)}merge(t){0===this._count?(this._min=t.min,this._max=t.max):0!==t.count&&(t.min<this.min&&(this._min=t.min),t.max>this.max&&(this._max=t.max)),this.startTime=t.startTime,this._sum+=t.sum,this._count+=t.count,this._zeroCount+=t.zeroCount;const e=this._minScale(t);this._downscale(this.scale-e),this._mergeBuckets(this.positive,t,t.positive,e),this._mergeBuckets(this.negative,t,t.negative,e)}diff(t){this._min=1/0,this._max=-1/0,this._sum-=t.sum,this._count-=t.count,this._zeroCount-=t.zeroCount;const e=this._minScale(t);this._downscale(this.scale-e),this._diffBuckets(this.positive,t,t.positive,e),this._diffBuckets(this.negative,t,t.negative,e)}clone(){return new Is(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(t,e,n){let r=this._mapping.mapToIndex(e),i=!1,s=0,o=0;if(0===t.length?(t.indexStart=r,t.indexEnd=t.indexStart,t.indexBase=t.indexStart):r<t.indexStart&&t.indexEnd-r>=this._maxSize?(i=!0,o=r,s=t.indexEnd):r>t.indexEnd&&r-t.indexStart>=this._maxSize&&(i=!0,o=t.indexStart,s=r),i){const t=this._changeScale(s,o);this._downscale(t),r=this._mapping.mapToIndex(e)}this._incrementIndexBy(t,r,n)}_incrementIndexBy(t,e,n){if(0===n)return;if(0===t.length&&(t.indexStart=t.indexEnd=t.indexBase=e),e<t.indexStart){const n=t.indexEnd-e;n>=t.backing.length&&this._grow(t,n+1),t.indexStart=e}else if(e>t.indexEnd){const n=e-t.indexStart;n>=t.backing.length&&this._grow(t,n+1),t.indexEnd=e}let r=e-t.indexBase;r<0&&(r+=t.backing.length),t.incrementBucket(r,n)}_grow(t,e){const n=t.backing.length,r=t.indexBase-t.indexStart,i=n-r;let s=(o=e,o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,++o);var o;s>this._maxSize&&(s=this._maxSize);const a=s-r;t.backing.growTo(s,i,a)}_changeScale(t,e){let n=0;for(;t-e>=this._maxSize;)t>>=1,e>>=1,n++;return n}_downscale(t){if(0===t)return;if(t<0)throw new Error(`impossible change of scale: ${this.scale}`);const e=this._mapping.scale-t;this._positive.downscale(t),this._negative.downscale(t),this._mapping=Rs(e)}_minScale(t){const e=Math.min(this.scale,t.scale),n=Ns.combine(this._highLowAtScale(this.positive,this.scale,e),this._highLowAtScale(t.positive,t.scale,e)),r=Ns.combine(this._highLowAtScale(this.negative,this.scale,e),this._highLowAtScale(t.negative,t.scale,e));return Math.min(e-this._changeScale(n.high,n.low),e-this._changeScale(r.high,r.low))}_highLowAtScale(t,e,n){if(0===t.length)return new Ns(0,-1);const r=e-n;return new Ns(t.indexStart>>r,t.indexEnd>>r)}_mergeBuckets(t,e,n,r){const i=n.offset,s=e.scale-r;for(let o=0;o<n.length;o++)this._incrementIndexBy(t,i+o>>s,n.at(o))}_diffBuckets(t,e,n,r){const i=n.offset,s=e.scale-r;for(let o=0;o<n.length;o++){let e=(i+o>>s)-t.indexBase;e<0&&(e+=t.backing.length),t.decrementBucket(e,n.at(o))}t.trim()}}class Ds{_maxSize;_recordMinMax;kind=ls.EXPONENTIAL_HISTOGRAM;constructor(t,e){this._maxSize=t,this._recordMinMax=e}createAccumulation(t){return new Is(t,this._maxSize,this._recordMinMax)}merge(t,e){const n=e.clone();return n.merge(t),n}diff(t,e){const n=e.clone();return n.diff(t),n}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:us.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(([e,n])=>{const i=n.toPointValue(),s=t.type===cs.GAUGE||t.type===cs.UP_DOWN_COUNTER||t.type===cs.OBSERVABLE_GAUGE||t.type===cs.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:e,startTime:n.startTime,endTime:r,value:{min:i.hasMinMax?i.min:void 0,max:i.hasMinMax?i.max:void 0,sum:s?void 0:i.sum,positive:{offset:i.positive.offset,bucketCounts:i.positive.bucketCounts},negative:{offset:i.negative.offset,bucketCounts:i.negative.bucketCounts},count:i.count,scale:i.scale,zeroCount:i.zeroCount}}})}}}class Us{startTime;_current;sampleTime;constructor(t,e=0,n=[0,0]){this.startTime=t,this._current=e,this.sampleTime=n}record(t){this._current=t,this.sampleTime=sr(Date.now())}setStartTime(t){this.startTime=t}toPointValue(){return this._current}}class $s{kind=ls.LAST_VALUE;createAccumulation(t){return new Us(t)}merge(t,e){const n=ur(e.sampleTime)>=ur(t.sampleTime)?e:t;return new Us(t.startTime,n.toPointValue(),n.sampleTime)}diff(t,e){const n=ur(e.sampleTime)>=ur(t.sampleTime)?e:t;return new Us(e.startTime,n.toPointValue(),n.sampleTime)}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:us.GAUGE,dataPoints:n.map(([t,e])=>({attributes:t,startTime:e.startTime,endTime:r,value:e.toPointValue()}))}}}class js{startTime;monotonic;_current;reset;constructor(t,e,n=0,r=!1){this.startTime=t,this.monotonic=e,this._current=n,this.reset=r}record(t){this.monotonic&&t<0||(this._current+=t)}setStartTime(t){this.startTime=t}toPointValue(){return this._current}}class Bs{monotonic;kind=ls.SUM;constructor(t){this.monotonic=t}createAccumulation(t){return new js(t,this.monotonic)}merge(t,e){const n=t.toPointValue(),r=e.toPointValue();return e.reset?new js(e.startTime,this.monotonic,r,e.reset):new js(t.startTime,this.monotonic,n+r)}diff(t,e){const n=t.toPointValue(),r=e.toPointValue();return this.monotonic&&n>r?new js(e.startTime,this.monotonic,r,!0):new js(e.startTime,this.monotonic,r-n)}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:us.SUM,dataPoints:n.map(([t,e])=>({attributes:t,startTime:e.startTime,endTime:r,value:e.toPointValue()})),isMonotonic:this.monotonic}}}class Fs{static DEFAULT_INSTANCE=new vs;createAggregator(t){return Fs.DEFAULT_INSTANCE}}class Gs{static MONOTONIC_INSTANCE=new Bs(!0);static NON_MONOTONIC_INSTANCE=new Bs(!1);createAggregator(t){switch(t.type){case cs.COUNTER:case cs.OBSERVABLE_COUNTER:case cs.HISTOGRAM:return Gs.MONOTONIC_INSTANCE;default:return Gs.NON_MONOTONIC_INSTANCE}}}class zs{static DEFAULT_INSTANCE=new $s;createAggregator(t){return zs.DEFAULT_INSTANCE}}class Vs{static DEFAULT_INSTANCE=new ys([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0);createAggregator(t){return Vs.DEFAULT_INSTANCE}}class Hs{_recordMinMax;_boundaries;constructor(t,e=!0){if(this._recordMinMax=e,null==t)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");const n=(t=(t=t.concat()).sort((t,e)=>t-e)).lastIndexOf(-1/0);let r=t.indexOf(1/0);-1===r&&(r=void 0),this._boundaries=t.slice(n+1,r)}createAggregator(t){return new ys(this._boundaries,this._recordMinMax)}}class Ws{_maxSize;_recordMinMax;constructor(t=160,e=!0){this._maxSize=t,this._recordMinMax=e}createAggregator(t){return new Ds(this._maxSize,this._recordMinMax)}}const qs=new Fs,Ks=new Gs,Xs=new zs,Ys=new Vs,Js=new class{_resolve(t){switch(t.type){case cs.COUNTER:case cs.UP_DOWN_COUNTER:case cs.OBSERVABLE_COUNTER:case cs.OBSERVABLE_UP_DOWN_COUNTER:return Ks;case cs.GAUGE:case cs.OBSERVABLE_GAUGE:return Xs;case cs.HISTOGRAM:return t.advice.explicitBucketBoundaries?new Hs(t.advice.explicitBucketBoundaries):Ys}return Nt.warn(`Unable to recognize instrument type: ${t.type}`),qs}createAggregator(t){return this._resolve(t).createAggregator(t)}};var Qs;function Zs(t){switch(t.type){case Qs.DEFAULT:return Js;case Qs.DROP:return qs;case Qs.SUM:return Ks;case Qs.LAST_VALUE:return Xs;case Qs.EXPONENTIAL_HISTOGRAM:{const e=t;return new Ws(e.options?.maxSize,e.options?.recordMinMax)}case Qs.EXPLICIT_BUCKET_HISTOGRAM:{const e=t;return null==e.options?Ys:new Hs(e.options?.boundaries,e.options?.recordMinMax)}default:throw new Error("Unsupported Aggregation")}}!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DROP=1]="DROP",t[t.SUM=2]="SUM",t[t.LAST_VALUE=3]="LAST_VALUE",t[t.EXPLICIT_BUCKET_HISTOGRAM=4]="EXPLICIT_BUCKET_HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=5]="EXPONENTIAL_HISTOGRAM"}(Qs||(Qs={}));const to=t=>({type:Qs.DEFAULT}),eo=t=>as.CUMULATIVE;class no{_shutdown=!1;_metricProducers;_sdkMetricProducer;_aggregationTemporalitySelector;_aggregationSelector;_cardinalitySelector;constructor(t){this._aggregationSelector=t?.aggregationSelector??to,this._aggregationTemporalitySelector=t?.aggregationTemporalitySelector??eo,this._metricProducers=t?.metricProducers??[],this._cardinalitySelector=t?.cardinalitySelector}setMetricProducer(t){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=t,this.onInitialized()}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}selectCardinalityLimit(t){return this._cardinalitySelector?this._cardinalitySelector(t):2e3}onInitialized(){}async collect(t){if(void 0===this._sdkMetricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");const[e,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:t?.timeoutMillis}),...this._metricProducers.map(e=>e.collect({timeoutMillis:t?.timeoutMillis}))]),r=e.errors.concat(_s(n,t=>t.errors));return{resourceMetrics:{resource:e.resourceMetrics.resource,scopeMetrics:e.resourceMetrics.scopeMetrics.concat(_s(n,t=>t.resourceMetrics.scopeMetrics))},errors:r}}async shutdown(t){this._shutdown?Nt.error("Cannot call shutdown twice."):(null==t?.timeoutMillis?await this.onShutdown():await fs(this.onShutdown(),t.timeoutMillis),this._shutdown=!0)}async forceFlush(t){this._shutdown?Nt.warn("Cannot forceFlush on already shutdown MetricReader."):null!=t?.timeoutMillis?await fs(this.onForceFlush(),t.timeoutMillis):await this.onForceFlush()}}class ro extends no{_interval;_exporter;_exportInterval;_exportTimeout;constructor(t){if(super({aggregationSelector:t.exporter.selectAggregation?.bind(t.exporter),aggregationTemporalitySelector:t.exporter.selectAggregationTemporality?.bind(t.exporter),metricProducers:t.metricProducers}),void 0!==t.exportIntervalMillis&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==t.exportTimeoutMillis&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==t.exportTimeoutMillis&&void 0!==t.exportIntervalMillis&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=t.exportIntervalMillis??6e4,this._exportTimeout=t.exportTimeoutMillis??3e4,this._exporter=t.exporter}async _runOnce(){try{await fs(this._doRun(),this._exportTimeout)}catch(t){if(t instanceof ms)return void Nt.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);er(t)}}async _doRun(){const{resourceMetrics:t,errors:e}=await this.collect({timeoutMillis:this._exportTimeout});if(e.length>0&&Nt.error("PeriodicExportingMetricReader: metrics collection errors",...e),t.resource.asyncAttributesPending)try{await(t.resource.waitForAsyncAttributes?.())}catch(r){Nt.debug("Error while resolving async portion of resource: ",r),er(r)}if(0===t.scopeMetrics.length)return;const n=await Lr._export(this._exporter,t);if(n.code!==lr.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${n.error})`)}onInitialized(){this._interval=setInterval(()=>{this._runOnce()},this._exportInterval),this._interval}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this.onForceFlush(),await this._exporter.shutdown()}}class io{_shutdown=!1;_temporalitySelector;constructor(t){this._temporalitySelector=t?.temporalitySelector??eo}export(t,e){if(!this._shutdown)return io._sendMetrics(t,e);setImmediate(e,{code:lr.FAILED})}forceFlush(){return Promise.resolve()}selectAggregationTemporality(t){return this._temporalitySelector(t)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(t,e){for(const n of t.scopeMetrics)for(const t of n.metrics)console.dir({descriptor:t.descriptor,dataPointType:t.dataPointType,dataPoints:t.dataPoints},{depth:null});e({code:lr.SUCCESS})}}class so{_registeredViews=[];addView(t){this._registeredViews.push(t)}findViews(t,e){return this._registeredViews.filter(n=>this._matchInstrument(n.instrumentSelector,t)&&this._matchMeter(n.meterSelector,e))}_matchInstrument(t,e){return(void 0===t.getType()||e.type===t.getType())&&t.getNameFilter().match(e.name)&&t.getUnitFilter().match(e.unit)}_matchMeter(t,e){return t.getNameFilter().match(e.name)&&(void 0===e.version||t.getVersionFilter().match(e.version))&&(void 0===e.schemaUrl||t.getSchemaUrlFilter().match(e.schemaUrl))}}function oo(t,e,n){return function(t){return null!=t.match(co)}(t)||Nt.warn(`Invalid metric name: "${t}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:t,type:e,description:n?.description??"",unit:n?.unit??"",valueType:n?.valueType??C.DOUBLE,advice:n?.advice??{}}}function ao(t,e){return n=t.name,r=e.name,n.toLowerCase()===r.toLowerCase()&&t.unit===e.unit&&t.type===e.type&&t.valueType===e.valueType;var n,r}const co=/^[a-z][a-z0-9_.\-/]{0,254}$/i;class uo{_writableMetricStorage;_descriptor;constructor(t,e){this._writableMetricStorage=t,this._descriptor=e}_record(t,e={},n=Rt.active()){"number"==typeof t?(this._descriptor.valueType!==C.INT||Number.isInteger(t)||(Nt.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t),Number.isInteger(t)))&&this._writableMetricStorage.record(t,e,n,sr(Date.now())):Nt.warn(`non-number value provided to metric ${this._descriptor.name}: ${t}`)}}class lo extends uo{add(t,e,n){this._record(t,e,n)}}class ho extends uo{add(t,e,n){t<0?Nt.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`):this._record(t,e,n)}}class po extends uo{record(t,e,n){this._record(t,e,n)}}class mo extends uo{record(t,e,n){t<0?Nt.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`):this._record(t,e,n)}}class fo{_observableRegistry;_metricStorages;_descriptor;constructor(t,e,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=e}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}}class go extends fo{}class _o extends fo{}class vo extends fo{}function bo(t){return t instanceof fo}class yo{_meterSharedState;constructor(t){this._meterSharedState=t}createGauge(t,e){const n=oo(t,cs.GAUGE,e),r=this._meterSharedState.registerMetricStorage(n);return new po(r,n)}createHistogram(t,e){const n=oo(t,cs.HISTOGRAM,e),r=this._meterSharedState.registerMetricStorage(n);return new mo(r,n)}createCounter(t,e){const n=oo(t,cs.COUNTER,e),r=this._meterSharedState.registerMetricStorage(n);return new ho(r,n)}createUpDownCounter(t,e){const n=oo(t,cs.UP_DOWN_COUNTER,e),r=this._meterSharedState.registerMetricStorage(n);return new lo(r,n)}createObservableGauge(t,e){const n=oo(t,cs.OBSERVABLE_GAUGE,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new _o(n,r,this._meterSharedState.observableRegistry)}createObservableCounter(t,e){const n=oo(t,cs.OBSERVABLE_COUNTER,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new go(n,r,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,e){const n=oo(t,cs.OBSERVABLE_UP_DOWN_COUNTER,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new vo(n,r,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,e){this._meterSharedState.observableRegistry.addBatchCallback(t,e)}removeBatchObservableCallback(t,e){this._meterSharedState.observableRegistry.removeBatchCallback(t,e)}}class wo{_instrumentDescriptor;constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=oo(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}}class So{_hash;_valueMap=new Map;_keyMap=new Map;constructor(t){this._hash=t}get(t,e){return e??=this._hash(t),this._valueMap.get(e)}getOrDefault(t,e){const n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);const r=e();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r),r}set(t,e,n){n??=this._hash(t),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,e)}has(t,e){return e??=this._hash(t),this._valueMap.has(e)}*keys(){const t=this._keyMap.entries();let e=t.next();for(;!0!==e.done;)yield[e.value[1],e.value[0]],e=t.next()}*entries(){const t=this._valueMap.entries();let e=t.next();for(;!0!==e.done;)yield[this._keyMap.get(e.value[0]),e.value[1],e.value[0]],e=t.next()}get size(){return this._valueMap.size}}class xo extends So{constructor(){super(ps)}}class Eo{_aggregator;_activeCollectionStorage=new xo;_cumulativeMemoStorage=new xo;_cardinalityLimit;_overflowAttributes={"otel.metric.overflow":!0};_overflowHashCode;constructor(t,e){this._aggregator=t,this._cardinalityLimit=(e??2e3)-1,this._overflowHashCode=ps(this._overflowAttributes)}record(t,e,n,r){let i=this._activeCollectionStorage.get(e);if(!i){if(this._activeCollectionStorage.size>=this._cardinalityLimit){const e=this._activeCollectionStorage.getOrDefault(this._overflowAttributes,()=>this._aggregator.createAccumulation(r));return void e?.record(t)}i=this._aggregator.createAccumulation(r),this._activeCollectionStorage.set(e,i)}i?.record(t)}batchCumulate(t,e){Array.from(t.entries()).forEach(([t,n,r])=>{const i=this._aggregator.createAccumulation(e);i?.record(n);let s=i;if(this._cumulativeMemoStorage.has(t,r)){const e=this._cumulativeMemoStorage.get(t,r);s=this._aggregator.diff(e,i)}else if(this._cumulativeMemoStorage.size>=this._cardinalityLimit&&(t=this._overflowAttributes,r=this._overflowHashCode,this._cumulativeMemoStorage.has(t,r))){const e=this._cumulativeMemoStorage.get(t,r);s=this._aggregator.diff(e,i)}if(this._activeCollectionStorage.has(t,r)){const e=this._activeCollectionStorage.get(t,r);s=this._aggregator.merge(e,s)}this._cumulativeMemoStorage.set(t,i,r),this._activeCollectionStorage.set(t,s,r)})}collect(){const t=this._activeCollectionStorage;return this._activeCollectionStorage=new xo,t}}class To{_aggregator;_unreportedAccumulations=new Map;_reportHistory=new Map;constructor(t,e){this._aggregator=t,e.forEach(t=>{this._unreportedAccumulations.set(t,[])})}buildMetrics(t,e,n,r){this._stashAccumulations(n);const i=this._getMergedUnreportedAccumulations(t);let s,o=i;if(this._reportHistory.has(t)){const e=this._reportHistory.get(t),n=e.collectionTime;s=e.aggregationTemporality,o=s===as.CUMULATIVE?To.merge(e.accumulations,i,this._aggregator):To.calibrateStartTime(e.accumulations,i,n)}else s=t.selectAggregationTemporality(e.type);this._reportHistory.set(t,{accumulations:o,collectionTime:r,aggregationTemporality:s});const a=(c=o,Array.from(c.entries()));var c;if(0!==a.length)return this._aggregator.toMetricData(e,s,a,r)}_stashAccumulations(t){const e=this._unreportedAccumulations.keys();for(const n of e){let e=this._unreportedAccumulations.get(n);void 0===e&&(e=[],this._unreportedAccumulations.set(n,e)),e.push(t)}}_getMergedUnreportedAccumulations(t){let e=new xo;const n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),void 0===n)return e;for(const r of n)e=To.merge(e,r,this._aggregator);return e}static merge(t,e,n){const r=t,i=e.entries();let s=i.next();for(;!0!==s.done;){const[e,o,a]=s.value;if(t.has(e,a)){const i=t.get(e,a),s=n.merge(i,o);r.set(e,s,a)}else r.set(e,o,a);s=i.next()}return r}static calibrateStartTime(t,e,n){for(const[r,i]of t.keys()){const t=e.get(r,i);t?.setStartTime(n)}return e}}class Ao extends wo{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(t,e,n,r,i){super(t),this._attributesProcessor=n,this._aggregationCardinalityLimit=i,this._deltaMetricStorage=new Eo(e,this._aggregationCardinalityLimit),this._temporalMetricStorage=new To(e,r)}record(t,e){const n=new xo;Array.from(t.entries()).forEach(([t,e])=>{n.set(this._attributesProcessor.process(t),e)}),this._deltaMetricStorage.batchCumulate(n,e)}collect(t,e){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,e)}}function Co(t,e){let n="";return t.unit!==e.unit&&(n+=`\t- Unit '${t.unit}' does not match '${e.unit}'\n`),t.type!==e.type&&(n+=`\t- Type '${t.type}' does not match '${e.type}'\n`),t.valueType!==e.valueType&&(n+=`\t- Value Type '${t.valueType}' does not match '${e.valueType}'\n`),t.description!==e.description&&(n+=`\t- Description '${t.description}' does not match '${e.description}'\n`),n}function Po(t,e){return t.valueType!==e.valueType?function(t,e){return`\t- use valueType '${t.valueType}' on instrument creation or use an instrument name other than '${e.name}'`}(t,e):t.unit!==e.unit?function(t,e){return`\t- use unit '${t.unit}' on instrument creation or use an instrument name other than '${e.name}'`}(t,e):t.type!==e.type?function(t,e){const n={name:e.name,type:e.type,unit:e.unit},r=JSON.stringify(n);return`\t- create a new view with a name other than '${t.name}' and InstrumentSelector '${r}'`}(t,e):t.description!==e.description?function(t,e){const n={name:e.name,type:e.type,unit:e.unit},r=JSON.stringify(n);return`\t- create a new view with a name other than '${t.name}' and InstrumentSelector '${r}'\n    \t- OR - create a new view with the name ${t.name} and description '${t.description}' and InstrumentSelector ${r}\n    \t- OR - create a new view with the name ${e.name} and description '${t.description}' and InstrumentSelector ${r}`}(t,e):""}class Oo{_sharedRegistry=new Map;_perCollectorRegistry=new Map;static create(){return new Oo}getStorages(t){let e=[];for(const r of this._sharedRegistry.values())e=e.concat(r);const n=this._perCollectorRegistry.get(t);if(null!=n)for(const r of n.values())e=e.concat(r);return e}register(t){this._registerStorage(t,this._sharedRegistry)}registerForCollector(t,e){let n=this._perCollectorRegistry.get(t);null==n&&(n=new Map,this._perCollectorRegistry.set(t,n)),this._registerStorage(e,n)}findOrUpdateCompatibleStorage(t){const e=this._sharedRegistry.get(t.name);return void 0===e?null:this._findOrUpdateCompatibleStorage(t,e)}findOrUpdateCompatibleCollectorStorage(t,e){const n=this._perCollectorRegistry.get(t);if(void 0===n)return null;const r=n.get(e.name);return void 0===r?null:this._findOrUpdateCompatibleStorage(e,r)}_registerStorage(t,e){const n=t.getInstrumentDescriptor(),r=e.get(n.name);void 0!==r?r.push(t):e.set(n.name,[t])}_findOrUpdateCompatibleStorage(t,e){let n=null;for(const r of e){const e=r.getInstrumentDescriptor();ao(e,t)?(e.description!==t.description&&(t.description.length>e.description.length&&r.updateDescription(t.description),Nt.warn("A view or instrument with the name ",t.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",Co(e,t),"The longer description will be used.\nTo resolve the conflict:",Po(e,t))),n=r):Nt.warn("A view or instrument with the name ",t.name," has already been registered and is incompatible with another registered view.\n","Details:\n",Co(e,t),"To resolve the conflict:\n",Po(e,t))}return n}}class ko{_backingStorages;constructor(t){this._backingStorages=t}record(t,e,n,r){this._backingStorages.forEach(i=>{i.record(t,e,n,r)})}}class Lo{_instrumentName;_valueType;_buffer=new xo;constructor(t,e){this._instrumentName=t,this._valueType=e}observe(t,e={}){"number"==typeof t?(this._valueType!==C.INT||Number.isInteger(t)||(Nt.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),t=Math.trunc(t),Number.isInteger(t)))&&this._buffer.set(e,t):Nt.warn(`non-number value provided to metric ${this._instrumentName}: ${t}`)}}class Mo{_buffer=new Map;observe(t,e,n={}){if(!bo(t))return;let r=this._buffer.get(t);null==r&&(r=new xo,this._buffer.set(t,r)),"number"==typeof e?(t._descriptor.valueType!==C.INT||Number.isInteger(e)||(Nt.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e),Number.isInteger(e)))&&r.set(n,e):Nt.warn(`non-number value provided to metric ${t._descriptor.name}: ${e}`)}}class Ro{_callbacks=[];_batchCallbacks=[];addCallback(t,e){this._findCallback(t,e)>=0||this._callbacks.push({callback:t,instrument:e})}removeCallback(t,e){const n=this._findCallback(t,e);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,e){const n=new Set(e.filter(bo));if(0===n.size)return void Nt.error("BatchObservableCallback is not associated with valid instruments",e);this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,e){const n=new Set(e.filter(bo)),r=this._findBatchCallback(t,n);r<0||this._batchCallbacks.splice(r,1)}async observe(t,e){const n=this._observeCallbacks(t,e),r=this._observeBatchCallbacks(t,e);return(await async function(t){return Promise.all(t.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(e){return{status:"rejected",reason:e}}}))}([...n,...r])).filter(gs).map(t=>t.reason)}_observeCallbacks(t,e){return this._callbacks.map(async({callback:n,instrument:r})=>{const i=new Lo(r._descriptor.name,r._descriptor.valueType);let s=Promise.resolve(n(i));null!=e&&(s=fs(s,e)),await s,r._metricStorages.forEach(e=>{e.record(i._buffer,t)})})}_observeBatchCallbacks(t,e){return this._batchCallbacks.map(async({callback:n,instruments:r})=>{const i=new Mo;let s=Promise.resolve(n(i));null!=e&&(s=fs(s,e)),await s,r.forEach(e=>{const n=i._buffer.get(e);null!=n&&e._metricStorages.forEach(e=>{e.record(n,t)})})})}_findCallback(t,e){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===e)}_findBatchCallback(t,e){return this._batchCallbacks.findIndex(n=>n.callback===t&&function(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}(n.instruments,e))}}class No extends wo{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(t,e,n,r,i){super(t),this._attributesProcessor=n,this._aggregationCardinalityLimit=i,this._deltaMetricStorage=new Eo(e,this._aggregationCardinalityLimit),this._temporalMetricStorage=new To(e,r)}record(t,e,n,r){e=this._attributesProcessor.process(e,n),this._deltaMetricStorage.record(t,e,n,r)}collect(t,e){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,e)}}class Io{_processors;constructor(t){this._processors=t}process(t,e){let n=t;for(const r of this._processors)n=r.process(n,e);return n}}function Do(){return Uo}const Uo=new class{process(t,e){return t}};class $o{_meterProviderSharedState;_instrumentationScope;metricStorageRegistry=new Oo;observableRegistry=new Ro;meter;constructor(t,e){this._meterProviderSharedState=t,this._instrumentationScope=e,this.meter=new yo(this)}registerMetricStorage(t){const e=this._registerMetricStorage(t,No);return 1===e.length?e[0]:new ko(e)}registerAsyncMetricStorage(t){return this._registerMetricStorage(t,Ao)}async collect(t,e,n){const r=await this.observableRegistry.observe(e,n?.timeoutMillis),i=this.metricStorageRegistry.getStorages(t);if(0===i.length)return null;const s=i.map(n=>n.collect(t,e)).filter(hs);return 0===s.length?{errors:r}:{scopeMetrics:{scope:this._instrumentationScope,metrics:s},errors:r}}_registerMetricStorage(t,e){let n=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(n=>{const r=function(t,e){return{name:t.name??e.name,description:t.description??e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}(n,t),i=this.metricStorageRegistry.findOrUpdateCompatibleStorage(r);if(null!=i)return i;const s=n.aggregation.createAggregator(r),o=new e(r,s,n.attributesProcessor,this._meterProviderSharedState.metricCollectors,n.aggregationCardinalityLimit);return this.metricStorageRegistry.register(o),o});if(0===n.length){const r=this._meterProviderSharedState.selectAggregations(t.type).map(([n,r])=>{const i=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(n,t);if(null!=i)return i;const s=r.createAggregator(t),o=n.selectCardinalityLimit(t.type),a=new e(t,s,Do(),[n],o);return this.metricStorageRegistry.registerForCollector(n,a),a});n=n.concat(r)}return n}}class jo{resource;viewRegistry=new so;metricCollectors=[];meterSharedStates=new Map;constructor(t){this.resource=t}getMeterSharedState(t){const e=function(t){return`${t.name}:${t.version??""}:${t.schemaUrl??""}`}(t);let n=this.meterSharedStates.get(e);return null==n&&(n=new $o(this,t),this.meterSharedStates.set(e,n)),n}selectAggregations(t){const e=[];for(const n of this.metricCollectors)e.push([n,Zs(n.selectAggregation(t))]);return e}}class Bo{_sharedState;_metricReader;constructor(t,e){this._sharedState=t,this._metricReader=e}async collect(t){const e=sr(Date.now()),n=[],r=[],i=Array.from(this._sharedState.meterSharedStates.values()).map(async i=>{const s=await i.collect(this,e,t);null!=s?.scopeMetrics&&n.push(s.scopeMetrics),null!=s?.errors&&r.push(...s.errors)});return await Promise.all(i),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:r}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}selectAggregation(t){return this._metricReader.selectAggregation(t)}selectCardinalityLimit(t){return this._metricReader.selectCardinalityLimit?.(t)??2e3}}const Fo=/[\^$\\.+?()[\]{}|]/g;class Go{_matchAll;_regexp;constructor(t){"*"===t?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(Go.escapePattern(t)))}match(t){return!!this._matchAll||this._regexp.test(t)}static escapePattern(t){return`^${t.replace(Fo,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}}class zo{_matchAll;_pattern;constructor(t){this._matchAll=void 0===t,this._pattern=t}match(t){return!!this._matchAll||t===this._pattern}}class Vo{_nameFilter;_type;_unitFilter;constructor(t){this._nameFilter=new Go(t?.name??"*"),this._type=t?.type,this._unitFilter=new zo(t?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}}class Ho{_nameFilter;_versionFilter;_schemaUrlFilter;constructor(t){this._nameFilter=new zo(t?.name),this._versionFilter=new zo(t?.version),this._schemaUrlFilter=new zo(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}class Wo{name;description;aggregation;attributesProcessor;instrumentSelector;meterSelector;aggregationCardinalityLimit;constructor(t){var e;!function(t){if(null==(e=t).instrumentName&&null==e.instrumentType&&null==e.instrumentUnit&&null==e.meterName&&null==e.meterVersion&&null==e.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");var e;if(null!=t.name&&(null==t?.instrumentName||Go.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}(t),null!=t.attributesProcessors?this.attributesProcessor=(e=t.attributesProcessors,new Io(e)):this.attributesProcessor=Do(),this.name=t.name,this.description=t.description,this.aggregation=Zs(t.aggregation??{type:Qs.DEFAULT}),this.instrumentSelector=new Vo({name:t.instrumentName,type:t.instrumentType,unit:t.instrumentUnit}),this.meterSelector=new Ho({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl}),this.aggregationCardinalityLimit=t.aggregationCardinalityLimit}}class qo{_sharedState;_shutdown=!1;constructor(t){if(this._sharedState=new jo(t?.resource??me()),null!=t?.views&&t.views.length>0)for(const e of t.views)this._sharedState.viewRegistry.addView(new Wo(e));if(null!=t?.readers&&t.readers.length>0)for(const e of t.readers){const t=new Bo(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)}}getMeter(t,e="",n={}){return this._shutdown?(Nt.warn("A shutdown MeterProvider cannot provide a Meter"),z):this._sharedState.getMeterSharedState({name:t,version:e,schemaUrl:n.schemaUrl}).meter}async shutdown(t){this._shutdown?Nt.warn("shutdown may only be called once per MeterProvider"):(this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(e=>e.shutdown(t))))}async forceFlush(t){this._shutdown?Nt.warn("invalid attempt to force flush after MeterProvider shutdown"):await Promise.all(this._sharedState.metricCollectors.map(e=>e.forceFlush(t)))}}class Ko{emit(t){}}const Xo=new Ko;const Yo=new class{getLogger(t,e,n){return new Ko}};class Jo{constructor(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Xo}}class Qo{getLogger(t,e,n){var r;return null!==(r=this.getDelegateLogger(t,e,n))&&void 0!==r?r:new Jo(this,t,e,n)}getDelegate(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Yo}setDelegate(t){this._delegate=t}getDelegateLogger(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(t,e,n)}}const Zo="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof globalThis?globalThis:{},ta=Symbol.for("io.opentelemetry.js.api.logs"),ea=Zo;class na{constructor(){this._proxyLoggerProvider=new Qo}static getInstance(){return this._instance||(this._instance=new na),this._instance}setGlobalLoggerProvider(t){return ea[ta]?this.getLoggerProvider():(ea[ta]=(e=1,n=t,r=Yo,t=>t===e?n:r),this._proxyLoggerProvider.setDelegate(t),t);var e,n,r}getLoggerProvider(){var t,e;return null!==(e=null===(t=ea[ta])||void 0===t?void 0:t.call(ea,1))&&void 0!==e?e:this._proxyLoggerProvider}getLogger(t,e,n){return this.getLoggerProvider().getLogger(t,e,n)}disable(){delete ea[ta],this._proxyLoggerProvider=new Qo}}const ra=na.getInstance();class ia{hrTime;hrTimeObserved;spanContext;resource;instrumentationScope;attributes={};_severityText;_severityNumber;_body;_eventName;totalAttributesCount=0;_isReadonly=!1;_logRecordLimits;set severityText(t){this._isLogRecordReadonly()||(this._severityText=t)}get severityText(){return this._severityText}set severityNumber(t){this._isLogRecordReadonly()||(this._severityNumber=t)}get severityNumber(){return this._severityNumber}set body(t){this._isLogRecordReadonly()||(this._body=t)}get body(){return this._body}get eventName(){return this._eventName}set eventName(t){this._isLogRecordReadonly()||(this._eventName=t)}get droppedAttributesCount(){return this.totalAttributesCount-Object.keys(this.attributes).length}constructor(t,e,n){const{timestamp:r,observedTimestamp:i,eventName:s,severityNumber:o,severityText:a,body:c,attributes:u={},context:l}=n,d=Date.now();if(this.hrTime=cr(r??d),this.hrTimeObserved=cr(i??d),l){const t=Kt.getSpanContext(l);t&&bt(t)&&(this.spanContext=t)}this.severityNumber=o,this.severityText=a,this.body=c,this.resource=t.resource,this.instrumentationScope=e,this._logRecordLimits=t.logRecordLimits,this._eventName=s,this.setAttributes(u)}setAttribute(t,e){return this._isLogRecordReadonly()||null===e?this:0===t.length?(Nt.warn(`Invalid attribute key: ${t}`),this):Qn(e)||"object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(1===this.droppedAttributesCount&&Nt.warn("Dropping extra attributes."),this):(Qn(e)?this.attributes[t]=this._truncateToSize(e):this.attributes[t]=e,this)):(Nt.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(const[e,n]of Object.entries(t))this.setAttribute(e,n);return this}setBody(t){return this.body=t,this}setEventName(t){return this.eventName=t,this}setSeverityNumber(t){return this.severityNumber=t,this}setSeverityText(t){return this.severityText=t,this}_makeReadonly(){this._isReadonly=!0}_truncateToSize(t){const e=this._logRecordLimits.attributeValueLengthLimit;return e<=0?(Nt.warn(`Attribute value limit must be positive, got ${e}`),t):"string"==typeof t?this._truncateToLimitUtil(t,e):Array.isArray(t)?t.map(t=>"string"==typeof t?this._truncateToLimitUtil(t,e):t):t}_truncateToLimitUtil(t,e){return t.length<=e?t:t.substring(0,e)}_isLogRecordReadonly(){return this._isReadonly&&Nt.warn("Can not execute the operation on emitted log record"),this._isReadonly}}class sa{instrumentationScope;_sharedState;constructor(t,e){this.instrumentationScope=t,this._sharedState=e}emit(t){const e=t.context||Rt.active(),n=new ia(this._sharedState,this.instrumentationScope,{context:e,...t});this._sharedState.activeProcessor.onEmit(n,e),n._makeReadonly()}}class oa{forceFlush(){return Promise.resolve()}onEmit(t,e){}shutdown(){return Promise.resolve()}}class aa{processors;forceFlushTimeoutMillis;constructor(t,e){this.processors=t,this.forceFlushTimeoutMillis=e}async forceFlush(){const t=this.forceFlushTimeoutMillis;await Promise.all(this.processors.map(e=>function(t,e){let n;const r=new Promise(function(t,r){n=setTimeout(function(){r(new Pr("Operation timed out."))},e)});return Promise.race([t,r]).then(t=>(clearTimeout(n),t),t=>{throw clearTimeout(n),t})}(e.forceFlush(),t)))}onEmit(t,e){this.processors.forEach(n=>n.onEmit(t,e))}async shutdown(){await Promise.all(this.processors.map(t=>t.shutdown()))}}class ca{resource;forceFlushTimeoutMillis;logRecordLimits;processors;loggers=new Map;activeProcessor;registeredLogRecordProcessors=[];constructor(t,e,n,r){this.resource=t,this.forceFlushTimeoutMillis=e,this.logRecordLimits=n,this.processors=r,r.length>0?(this.registeredLogRecordProcessors=r,this.activeProcessor=new aa(this.registeredLogRecordProcessors,this.forceFlushTimeoutMillis)):this.activeProcessor=new oa}}class ua{_shutdownOnce;_sharedState;constructor(t={}){const e=function(...t){let e=t.shift();const n=new WeakMap;for(;t.length>0;)e=Sr(e,t.shift(),0,n);return e}({},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},includeTraceContext:!0},t),n=t.resource??me();var r;this._sharedState=new ca(n,e.forceFlushTimeoutMillis,{attributeCountLimit:(r=e.logRecordLimits).attributeCountLimit??void 0??void 0??128,attributeValueLengthLimit:r.attributeValueLengthLimit??void 0??void 0??1/0},t?.processors??[]),this._shutdownOnce=new kr(this._shutdown,this)}getLogger(t,e,n){if(this._shutdownOnce.isCalled)return Nt.warn("A shutdown LoggerProvider cannot provide a Logger"),Xo;t||Nt.warn("Logger requested without instrumentation scope name.");const r=t||"unknown",i=`${r}@${e||""}:${n?.schemaUrl||""}`;return this._sharedState.loggers.has(i)||this._sharedState.loggers.set(i,new sa({name:r,version:e,schemaUrl:n?.schemaUrl},this._sharedState)),this._sharedState.loggers.get(i)}forceFlush(){return this._shutdownOnce.isCalled?(Nt.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()}shutdown(){return this._shutdownOnce.isCalled?(Nt.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()}_shutdown(){return this._sharedState.activeProcessor.shutdown()}}class la{export(t,e){this._sendLogRecords(t,e)}shutdown(){return Promise.resolve()}_exportInfo(t){return{resource:{attributes:t.resource.attributes},instrumentationScope:t.instrumentationScope,timestamp:ur(t.hrTime),traceId:t.spanContext?.traceId,spanId:t.spanContext?.spanId,traceFlags:t.spanContext?.traceFlags,severityText:t.severityText,severityNumber:t.severityNumber,body:t.body,attributes:t.attributes}}_sendLogRecords(t,e){for(const n of t)console.dir(this._exportInfo(n),{depth:3});e?.({code:lr.SUCCESS})}}class da{_exporter;_shutdownOnce;_unresolvedExports;constructor(t){this._exporter=t,this._shutdownOnce=new kr(this._shutdown,this),this._unresolvedExports=new Set}onEmit(t){if(this._shutdownOnce.isCalled)return;const e=()=>Lr._export(this._exporter,[t]).then(t=>{t.code!==lr.SUCCESS&&er(t.error??new Error(`SimpleLogRecordProcessor: log record export failed (status ${t})`))}).catch(er);if(t.resource.asyncAttributesPending){const n=t.resource.waitForAsyncAttributes?.().then(()=>(this._unresolvedExports.delete(n),e()),er);null!=n&&this._unresolvedExports.add(n)}else e()}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports))}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}class ha{constructor(t={}){var e,n,r;if(this._resource=me().merge(null!==(e=t.resource)&&void 0!==e?e:he({})),this._resourceDetectors=null!==(n=t.resourceDetectors)&&void 0!==n?n:[Yn],this._serviceName=t.serviceName,this._serviceVersion=t.serviceVersion,this._autoDetectResources=null===(r=t.autoDetectResources)||void 0===r||r,t.spanProcessor||t.traceExporter||t.spanProcessors){const e={};t.sampler&&(e.sampler=t.sampler),t.spanLimits&&(e.spanLimits=t.spanLimits),t.idGenerator&&(e.idGenerator=t.idGenerator);const n=t.spanProcessors||[];t.traceExporter&&n.push(new pn(t.traceExporter)),this._tracerProviderConfig={tracerConfig:e,spanProcessor:t.spanProcessor,spanProcessors:n,contextManager:t.contextManager,textMapPropagator:t.textMapPropagator}}t.metricExporters&&(this._meterProviderConfig={metricExporters:t.metricExporters}),t.logExporters&&(this._loggerProviderConfig={logExporters:t.logExporters});let i=[];t.instrumentations&&(i=t.instrumentations),this._instrumentations=i}start(){var t,e,n,r,i;if(this._disabled)return;if(this._autoDetectResources){const t={detectors:this._resourceDetectors};this._resource=this._resource.merge(ge(t))}this._resource=void 0===this._serviceName?this._resource:this._resource.merge(he({[Gn]:this._serviceName})),void 0!==this._serviceVersion&&(this._resource=this._resource.merge(he({[zn]:this._serviceVersion})));const s=[];(null===(t=this._tracerProviderConfig)||void 0===t?void 0:t.spanProcessor)&&s.push(this._tracerProviderConfig.spanProcessor),(null===(e=this._tracerProviderConfig)||void 0===e?void 0:e.spanProcessors)&&s.push(...this._tracerProviderConfig.spanProcessors);const o=new $n(Object.assign(Object.assign({},null===(n=this._tracerProviderConfig)||void 0===n?void 0:n.tracerConfig),{resource:this._resource,spanProcessors:s}));if(this._tracerProvider=o,o.register({contextManager:null===(r=this._tracerProviderConfig)||void 0===r?void 0:r.contextManager,propagator:null===(i=this._tracerProviderConfig)||void 0===i?void 0:i.textMapPropagator}),this._meterProviderConfig){const t=this._meterProviderConfig.metricExporters.map(t=>new ro({exporter:t}));this._meterProvider=new qo({resource:this._resource,readers:t}),Ut.setGlobalMeterProvider(this._meterProvider)}if(this._loggerProviderConfig){const t=this._loggerProviderConfig.logExporters.map(t=>new da(t));this._loggerProvider=new ua({resource:this._resource,processors:t}),ra.setGlobalLoggerProvider(this._loggerProvider)}!function(t){const e=t.tracerProvider||Kt.getTracerProvider(),n=t.meterProvider||Ut.getMeterProvider(),r=t.loggerProvider||re.getLoggerProvider(),i=t.instrumentations?.flat()??[];(function(t,e,n,r){for(let i=0,s=t.length;i<s;i++){const s=t[i];e&&s.setTracerProvider(e),n&&s.setMeterProvider(n),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}})(i,e,n,r)}({instrumentations:this._instrumentations})}getResourceAttributes(){return this._resource.attributes}forceFlush(){const t=[];return this._tracerProvider&&t.push(this._tracerProvider.forceFlush()),this._meterProvider&&t.push(this._meterProvider.forceFlush()),this._loggerProvider&&t.push(this._loggerProvider.forceFlush()),Promise.all(t).then(()=>{})}shutdown(){const t=[];return this._tracerProvider&&t.push(this._tracerProvider.shutdown()),this._meterProvider&&t.push(this._meterProvider.shutdown()),this._loggerProvider&&t.push(this._loggerProvider.shutdown()),Promise.all(t).then(()=>{})}}const pa="https://api.honeycomb.io",ma="v1/traces",fa=`${pa}/${ma}`,ga="v1/metrics",_a=`${pa}/${ga}`,va="v1/logs",ba=`${pa}/${va}`,ya={apiKey:"",tracesApiKey:"",endpoint:fa,tracesEndpoint:fa,serviceName:"unknown_service",debug:!1,sampleRate:1,skipOptionsValidation:!1,localVisualizations:!1,webVitalsInstrumentationConfig:{enabled:!0}},wa=t=>`@honeycombio/opentelemetry-web: ${t}`,Sa=/^[a-f0-9]*$/,xa=/^hc[a-z]ic_[a-z0-9]*$/;function Ea(t){return null!=t&&0!==t.length&&(32===t.length?Sa.test(t):64===t.length&&xa.test(t))}function Ta(t,e){return t.endsWith(e)||t.endsWith(`${e}/`)?t:t.endsWith("/")?t+e:t+"/"+e}const Aa=t=>(null==t?void 0:t.tracesEndpoint)?t.tracesEndpoint:(null==t?void 0:t.endpoint)?Ta(t.endpoint,ma):fa,Ca=t=>(null==t?void 0:t.metricsEndpoint)?t.metricsEndpoint:(null==t?void 0:t.endpoint)?Ta(t.endpoint,ga):_a,Pa=t=>(null==t?void 0:t.logsEndpoint)?t.logsEndpoint:(null==t?void 0:t.endpoint)?Ta(t.endpoint,va):ba,Oa=t=>(null==t?void 0:t.tracesApiKey)||(null==t?void 0:t.apiKey),ka=t=>"number"==typeof(null==t?void 0:t.sampleRate)&&Number.isSafeInteger(null==t?void 0:t.sampleRate)&&(null==t?void 0:t.sampleRate)>=0?null==t?void 0:t.sampleRate:1,La=wa(" Missing API Key. Set `apiKey` in HoneycombOptions. Telemetry will not be exported."),Ma=wa(` Missing Service Name. Set \`serviceName\` in HoneycombOptions. Defaulting to '${ya.serviceName}'`),Ra=(wa(" Dataset is ignored in favor of service name."),wa(" Missing dataset. Specify either HONEYCOMB_DATASET environment variable or dataset in the options parameter."),wa(" Skipping options validation. To re-enable, set skipOptionsValidation option or HONEYCOMB_SKIP_OPTIONS_VALIDATION to false."),wa(" Skipping options validation, because a custom collector is being used."),wa(" Default deterministic sampler has been overridden. Honeycomb requires a resource attribute called SampleRate to properly show weighted values. Non-deterministic sampleRate could lead to missing spans in Honeycomb. See our docs for more details. https://docs.honeycomb.io/getting-data-in/opentelemetry/node-distro/#sampling-without-the-honeycomb-sdk"),wa(" Disabling local visualizations - must have both service name and API key configured."),wa(" Disabling local visualizations - cannot infer auth and ui url roots from endpoint url."),wa(" Failed to get proper auth response from Honeycomb. No local visualization available."),wa(" Default honeycomb exporter disabled but no exporters provided"),t=>{var e,n;(null==t?void 0:t.logLevel)?t.logLevel:_.DEBUG;if(null==t?void 0:t.skipOptionsValidation)return void _.DEBUG;const r=null!==(e=null==t?void 0:t.tracesEndpoint)&&void 0!==e?e:null==t?void 0:t.endpoint;if(!r||!(t=>{try{return!new URL(t).hostname.endsWith(".honeycomb.io")}catch(e){return!1}})(r))return!(null==t?void 0:t.apiKey)&&_.WARN,!(null==t?void 0:t.serviceName)&&_.WARN,(null==t?void 0:t.apiKey)&&!Ea(null==t?void 0:t.apiKey)&&(null==t?void 0:t.dataset)&&_.WARN,(null==t?void 0:t.apiKey)&&Ea(null==t?void 0:t.apiKey)&&!(null==t?void 0:t.dataset)&&_.WARN,(null==t?void 0:t.sampler)&&_.DEBUG,!0===(null==t?void 0:t.disableDefaultTraceExporter)&&!(null==t?void 0:t.traceExporter)&&(null===(n=null==t?void 0:t.traceExporters)||void 0===n||n.length),t;_.DEBUG});function Na(t){if(!(null==t?void 0:t.debug))return;Nt.setLogger(new L,_.DEBUG),Nt.debug(wa(" Honeycomb Web SDK Debug Mode Enabled "));const e=Aa(t),n=Object.assign(Object.assign(Object.assign({},ya),t),{tracesEndpoint:e});!function(t){const e=Oa(t)||"";if(!e)return void Nt.debug(La);Nt.debug(wa(`API Key configured for traces: '${e}'`))}(n),function(t){const e=t.serviceName||ya.serviceName;if(e===ya.serviceName)return void Nt.debug(Ma);Nt.debug(`@honeycombio/opentelemetry-web: Service Name configured for traces: '${e}'`)}(n),function(t){const e=Aa(t);if(!e)return void Nt.debug(wa("No endpoint configured for traces"));Nt.debug(wa(`Endpoint configured for traces: '${e}'`))}(n),function(t){const e=ka(t);if(!e)return void Nt.debug("No sampler configured for traces");Nt.debug(wa(`Sample Rate configured for traces: '${e}'`))}(n)}const Ia=t=>{if(null==t?void 0:t.sampler)return t.sampler;const e=ka(t);return new Da(e)};class Da{constructor(t){switch(this._sampleRate=t,t){case 0:this._sampler=new rn;break;case 1:this._sampler=new sn;break;default:{const e=1/t;this._sampler=new an(e);break}}}shouldSample(t,e,n,r,i,s){const o=this._sampler.shouldSample(t,e,n,r,i,s);return Object.assign(Object.assign({},o),{attributes:Object.assign(Object.assign({},o.attributes),{SampleRate:this._sampleRate})})}toString(){return`DeterministicSampler(${this._sampler.toString()})`}}class Ua{t;o=0;i=[];u(t){if(t.hadRecentInput)return;const e=this.i[0],n=this.i.at(-1);this.o&&e&&n&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(this.o+=t.value,this.i.push(t)):(this.o=t.value,this.i=[t]),this.t?.(t)}}const $a=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},ja=t=>{if("loading"===document.readyState)return"loading";{const e=$a();if(e){if(t<e.domInteractive)return"loading";if(0===e.domContentLoadedEventStart||t<e.domContentLoadedEventStart)return"dom-interactive";if(0===e.domComplete||t<e.domComplete)return"dom-content-loaded"}}return"complete"},Ba=t=>{const e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Fa=t=>{let e="";try{for(;9!==t?.nodeType;){const n=t,r=n.id?"#"+n.id:[Ba(n),...Array.from(n.classList).sort()].join(".");if(e.length+r.length>99)return e||r;if(e=e?r+">"+e:r,n.id)break;t=n.parentNode}}catch{}return e},Ga=new WeakMap;function za(t,e){return Ga.get(t)||Ga.set(t,new e),Ga.get(t)}let Va=-1;const Ha=()=>Va,Wa=t=>{addEventListener("pageshow",e=>{e.persisted&&(Va=e.timeStamp,t(e))},!0)},qa=(t,e,n,r)=>{let i,s;return o=>{var a,c;e.value>=0&&(o||r)&&(s=e.value-(i??0),(s||void 0===i)&&(i=e.value,e.delta=s,e.rating=(a=e.value)>(c=n)[1]?"poor":a>c[0]?"needs-improvement":"good",t(e)))}},Ka=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},Xa=()=>{const t=$a();return t?.activationStart??0},Ya=(t,e=-1)=>{const n=$a();let r="navigate";return Ha()>=0?r="back-forward-cache":n&&(document.prerendering||Xa()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Ja=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(t=>{Promise.resolve().then(()=>{e(t.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Qa=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let Za=-1;const tc=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,ec=t=>{"hidden"===document.visibilityState&&Za>-1&&(Za="visibilitychange"===t.type?t.timeStamp:0,rc())},nc=()=>{addEventListener("visibilitychange",ec,!0),addEventListener("prerenderingchange",ec,!0)},rc=()=>{removeEventListener("visibilitychange",ec,!0),removeEventListener("prerenderingchange",ec,!0)},ic=()=>{if(Za<0){const t=Xa(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0]?.startTime;Za=e??tc(),nc(),Wa(()=>{setTimeout(()=>{Za=tc(),nc()})})}return{get firstHiddenTime(){return Za}}},sc=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},oc=[1800,3e3],ac=(t,e={})=>{sc(()=>{const n=ic();let r,i=Ya("FCP");const s=Ja("paint",t=>{for(const e of t)"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-Xa(),0),i.entries.push(e),r(!0)))});s&&(r=qa(t,i,oc,e.reportAllChanges),Wa(n=>{i=Ya("FCP"),r=qa(t,i,oc,e.reportAllChanges),Ka(()=>{i.value=performance.now()-n.timeStamp,r(!0)})}))})},cc=[.1,.25],uc=t=>t.find(t=>1===t.node?.nodeType)||t[0];let lc=0,dc=1/0,hc=0;const pc=t=>{for(const e of t)e.interactionId&&(dc=Math.min(dc,e.interactionId),hc=Math.max(hc,e.interactionId),lc=hc?(hc-dc)/7+1:0)};let mc;const fc=()=>mc?lc:performance.interactionCount??0;let gc=0;class _c{l=[];h=new Map;m;p;v(){gc=fc(),this.l.length=0,this.h.clear()}M(){const t=Math.min(this.l.length-1,Math.floor((fc()-gc)/50));return this.l[t]}u(t){if(this.m?.(t),!t.interactionId&&"first-input"!==t.entryType)return;const e=this.l.at(-1);let n=this.h.get(t.interactionId);if(n||this.l.length<10||t.duration>e.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort((t,e)=>e.T-t.T),this.l.length>10){const t=this.l.splice(10);for(const e of t)this.h.delete(e.id)}this.p?.(n)}}}const vc=t=>{const e=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?t():(t=Qa(t),document.addEventListener("visibilitychange",t,{once:!0}),e(()=>{t(),document.removeEventListener("visibilitychange",t)}))},bc=[200,500],yc=(t,e={})=>{const n=za(e=Object.assign({},e),_c);let r=[],i=[],s=0;const o=new WeakMap,a=new WeakMap;let c=!1;const u=()=>{c||(vc(l),c=!0)},l=()=>{const t=n.l.map(t=>o.get(t.entries[0])),e=i.length-50;i=i.filter((n,r)=>r>=e||t.includes(n));const a=new Set;for(const n of i){const t=d(n.startTime,n.processingEnd);for(const e of t)a.add(e)}const u=r.length-1-50;r=r.filter((t,e)=>t.startTime>s&&e>u||a.has(t)),c=!1};n.m=t=>{const e=t.startTime+t.duration;let n;s=Math.max(s,t.processingEnd);for(let r=i.length-1;r>=0;r--){const s=i[r];if(Math.abs(e-s.renderTime)<=8){n=s,n.startTime=Math.min(t.startTime,n.startTime),n.processingStart=Math.min(t.processingStart,n.processingStart),n.processingEnd=Math.max(t.processingEnd,n.processingEnd),n.entries.push(t);break}}n||(n={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:e,entries:[t]},i.push(n)),(t.interactionId||"first-input"===t.entryType)&&o.set(t,n),u()},n.p=t=>{if(!a.get(t)){const n=(e.generateTarget??Fa)(t.entries[0].target);a.set(t,n)}};const d=(t,e)=>{const n=[];for(const i of r)if(!(i.startTime+i.duration<t)){if(i.startTime>e)break;n.push(i)}return n};Ja("long-animation-frame",t=>{r=r.concat(t),u()}),((t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&sc(()=>{"interactionCount"in performance||mc||(mc=Ja("event",pc,{type:"event",buffered:!0,durationThreshold:0}));let n,r=Ya("INP");const i=za(e,_c),s=t=>{vc(()=>{for(const n of t)i.u(n);const e=i.M();e&&e.T!==r.value&&(r.value=e.T,r.entries=e.entries,n())})},o=Ja("event",s,{durationThreshold:e.durationThreshold??40});n=qa(t,r,bc,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(s(o.takeRecords()),n(!0))}),Wa(()=>{i.v(),r=Ya("INP"),n=qa(t,r,bc,e.reportAllChanges)}))})})(e=>{const r=(t=>{const e=t.entries[0],r=o.get(e),i=e.processingStart,s=Math.max(e.startTime+e.duration,i),c=Math.min(r.processingEnd,s),u=r.entries.sort((t,e)=>t.processingStart-e.processingStart),l=d(e.startTime,c),h=n.h.get(e.interactionId),p={interactionTarget:a.get(h),interactionType:e.name.startsWith("key")?"keyboard":"pointer",interactionTime:e.startTime,nextPaintTime:s,processedEventEntries:u,longAnimationFrameEntries:l,inputDelay:i-e.startTime,processingDuration:c-i,presentationDelay:s-c,loadState:ja(e.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};return(t=>{if(!t.longAnimationFrameEntries?.length)return;const e=t.interactionTime,n=t.inputDelay,r=t.processingDuration;let i,s,o=0,a=0,c=0,u=0;for(const h of t.longAnimationFrameEntries){a=a+h.startTime+h.duration-h.styleAndLayoutStart;for(const t of h.scripts){const c=t.startTime+t.duration;if(c<e)continue;const l=c-Math.max(e,t.startTime),d=t.duration?l/t.duration*t.forcedStyleAndLayoutDuration:0;o+=l-d,a+=d,l>u&&(s=t.startTime<e+n?"input-delay":t.startTime>=e+n+r?"presentation-delay":"processing-duration",i=t,u=l)}}const l=t.longAnimationFrameEntries.at(-1),d=l?l.startTime+l.duration:0;d>=e+n+r&&(c=t.nextPaintTime-d),i&&s&&(t.longestScript={entry:i,subpart:s,intersectingDuration:u}),t.totalScriptDuration=o,t.totalStyleAndLayoutDuration=a,t.totalPaintDuration=c,t.totalUnattributedDuration=t.nextPaintTime-e-o-a-c})(p),Object.assign(t,{attribution:p})})(e);t(r)},e)};class wc{m;u(t){this.m?.(t)}}const Sc=[2500,4e3],xc=[800,1800],Ec=t=>{document.prerendering?sc(()=>Ec(t)):"complete"!==document.readyState?addEventListener("load",()=>Ec(t),!0):setTimeout(t)},Tc="browser.name",Ac="browser.version",Cc="browser.touch_screen_enabled",Pc="browser.width",Oc="browser.height",kc="device.type",Lc="network.effectiveType",Mc="screen.width",Rc="screen.height",Nc="screen.size",Ic="page.hash",Dc="page.url",Uc="page.route",$c="page.hostname",jc="page.search",Bc="url.path",Fc="entry_page.url",Gc="entry_page.path",zc="entry_page.search",Vc="entry_page.hash",Hc="entry_page.hostname",Wc="entry_page.referrer",qc="honeycomb.distro.version",Kc="honeycomb.distro.runtime_version",Xc="cls.id",Yc="cls.value",Jc="cls.delta",Qc="cls.rating",Zc="cls.navigation_type",tu="lcp.id",eu="lcp.value",nu="lcp.delta",ru="lcp.rating",iu="lcp.navigation_type",su="inp.id",ou="inp.value",au="inp.delta",cu="inp.rating",uu="inp.navigation_type",lu="fcp.id",du="fcp.value",hu="fcp.delta",pu="fcp.rating",mu="fcp.navigation_type",fu="ttfb.id",gu="ttfb.value",_u="ttfb.delta",vu="ttfb.rating",bu="ttfb.navigation_type",yu="cls.largest_shift_target",wu="cls.element",Su="cls.largest_shift_time",xu="cls.largest_shift_value",Eu="cls.load_state",Tu="cls.had_recent_input",Au="lcp.element",Cu="lcp.url",Pu="lcp.time_to_first_byte",Ou="lcp.resource_load_delay",ku="lcp.resource_load_duration",Lu="lcp.element_render_delay",Mu="lcp.resource_load_time",Ru="inp.input_delay",Nu="inp.interaction_target",Iu="inp.interaction_time",Du="inp.interaction_type",Uu="inp.load_state",$u="inp.next_paint_time",ju="inp.presentation_delay",Bu="inp.processing_duration",Fu="inp.duration",Gu="inp.element",zu="inp.event_type",Vu="inp.timing.script.entry_type",Hu="inp.timing.script.start_time",Wu="inp.timing.script.execution_start",qu="inp.timing.script.duration",Ku="inp.timing.script.forced_style_and_layout_duration",Xu="inp.timing.script.invoker",Yu="inp.timing.script.pause_duration",Ju="inp.timing.script.source_url",Qu="inp.timing.script.source_function_name",Zu="inp.timing.script.source_char_position",tl="inp.timing.script.window_attribution",el="inp.timing.duration",nl="inp.timing.entryType",rl="inp.timing.name",il="inp.timing.renderStart",sl="inp.timing.startTime",ol="fcp.time_to_first_byte",al="fcp.time_since_first_byte",cl="fcp.load_state",ul="ttfb.waiting_duration",ll="ttfb.dns_duration",dl="ttfb.connection_duration",hl="ttfb.request_duration",pl="ttfb.cache_duration",ml="ttfb.waiting_time",fl="ttfb.dns_time",gl="ttfb.connection_time",_l="ttfb.request_time";class vl{constructor(t,e,n={}){this.instrumentationName=t,this.instrumentationVersion=e,this._wrap=Dr.wrap,this._unwrap=Dr.unwrap,this._massWrap=Dr.massWrap,this._massUnwrap=Dr.massUnwrap,this._config=Object.assign({enabled:!0},n),this._diag=Nt.createComponentLogger({namespace:t}),this._tracer=Kt.getTracer(t,e),this._meter=Ut.getMeter(t,e),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(t={}){this._config=Object.assign({},t)}setTracerProvider(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}}class bl extends vl{constructor({enabled:t=!0,vitalsToTrack:e=["CLS","LCP","INP","TTFB","FCP"],lcp:n,cls:r,inp:i,fcp:s,ttfb:o}={}){super("@honeycombio/instrumentation-web-vitals",Mr,{enabled:t,vitalsToTrack:e,lcp:n,cls:r,inp:i,fcp:s,ttfb:o}),this.onReportCLS=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{largestShiftTarget:s,largestShiftTime:o,largestShiftValue:a,loadState:c,largestShiftEntry:u}=i,l=this.tracer.startSpan(r);l.setAttributes({[Xc]:t.id,[Jc]:t.delta,[Yc]:t.value,[Qc]:t.rating,[Zc]:t.navigationType,[yu]:s,[wu]:s,[Su]:o,[xu]:a,[Eu]:c,[Tu]:null==u?void 0:u.hadRecentInput}),n&&n(t,l),l.end()},this.onReportLCP=(t,e={})=>{const{applyCustomAttributes:n,dataAttributes:r}=e;if(!this.isEnabled())return;const{name:i,attribution:s}=t,{target:o,url:a,timeToFirstByte:c,resourceLoadDelay:u,resourceLoadDuration:l,elementRenderDelay:d,lcpEntry:h}=s,p=this.tracer.startSpan(i);p.setAttributes({[tu]:t.id,[nu]:t.delta,[eu]:t.value,[ru]:t.rating,[iu]:t.navigationType,[Au]:o,[Cu]:a,[Pu]:c,[Ou]:u,[ku]:l,[Lu]:d,[Mu]:l}),this.addDataAttributes(null==h?void 0:h.element,p,r,"lcp"),n&&n(t,p),p.end()},this.onReportINP=(t,e={includeTimingsAsSpans:!1})=>{const{applyCustomAttributes:n,includeTimingsAsSpans:r,dataAttributes:i}=e;if(!this.isEnabled())return;const{name:s,attribution:o}=t,{inputDelay:a,interactionTarget:c,interactionTime:u,interactionType:l,loadState:d,nextPaintTime:h,presentationDelay:p,processingDuration:m,longAnimationFrameEntries:f}=o,g=a+m+p;this.tracer.startActiveSpan(s,{startTime:u},e=>{const s={[su]:t.id,[au]:t.delta,[ou]:t.value,[cu]:t.rating,[uu]:t.navigationType,[Ru]:a,[Nu]:c,[Iu]:u,[Du]:l,[Uu]:d,[$u]:h,[ju]:p,[Bu]:m,[Fu]:g,[Gu]:c,[zu]:l};e.setAttributes(s),t.entries.forEach(t=>{this.addDataAttributes(this.getElementFromNode(t.target),e,i,"inp")}),n&&n(t,e),r&&f.forEach(t=>{this.processPerformanceLongAnimationFrameTimingSpans("inp",t)}),e.end(u+g)})},this.onReportFCP=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{timeToFirstByte:s,firstByteToFCP:o,loadState:a}=i,c=this.tracer.startSpan(r);c.setAttributes({[lu]:t.id,[hu]:t.delta,[du]:t.value,[pu]:t.rating,[mu]:t.navigationType,[ol]:s,[al]:o,[cl]:a}),n&&n(t,c),c.end()},this.onReportTTFB=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{cacheDuration:s,connectionDuration:o,dnsDuration:a,requestDuration:c,waitingDuration:u}=i,l={[fu]:t.id,[_u]:t.delta,[gu]:t.value,[vu]:t.rating,[bu]:t.navigationType,[ul]:u,[ll]:a,[dl]:o,[hl]:c,[pl]:s,[ml]:u,[fl]:a,[gl]:o,[_l]:c},d=this.tracer.startSpan(r);d.setAttributes(l),n&&n(t,d),d.end()},this.vitalsToTrack=[...e],this.lcpOpts=n,this.clsOpts=r,this.inpOpts=i,this.fcpOpts=s,this.ttfbOpts=o,this._isEnabled=t,this._setupWebVitalsCallbacks()}init(){}_setupWebVitalsCallbacks(){this.vitalsToTrack.includes("CLS")&&((t,e={})=>{const n=za(e=Object.assign({},e),Ua),r=new WeakMap;n.t=t=>{if(t?.sources?.length){const n=uc(t.sources);if(n){const t=(e.generateTarget??Fa)(n.node);r.set(n,t)}}},((t,e={})=>{ac(Qa(()=>{let n,r=Ya("CLS",0);const i=za(e,Ua),s=t=>{for(const e of t)i.u(e);i.o>r.value&&(r.value=i.o,r.entries=i.i,n())},o=Ja("layout-shift",s);o&&(n=qa(t,r,cc,e.reportAllChanges),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(s(o.takeRecords()),n(!0))}),Wa(()=>{i.o=0,r=Ya("CLS",0),n=qa(t,r,cc,e.reportAllChanges),Ka(()=>n())}),setTimeout(n))}))})(e=>{const n=(t=>{let e={};if(t.entries.length){const n=t.entries.reduce((t,e)=>t.value>e.value?t:e);if(n?.sources?.length){const t=uc(n.sources);t&&(e={largestShiftTarget:r.get(t),largestShiftTime:n.startTime,largestShiftValue:n.value,largestShiftSource:t,largestShiftEntry:n,loadState:ja(n.startTime)})}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportCLS(t,this.clsOpts)},this.clsOpts),this.vitalsToTrack.includes("LCP")&&((t,e={})=>{const n=za(e=Object.assign({},e),wc),r=new WeakMap;n.m=t=>{if(t.element){const n=(e.generateTarget??Fa)(t.element);r.set(t,n)}},((t,e={})=>{sc(()=>{const n=ic();let r,i=Ya("LCP");const s=za(e,wc),o=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)s.u(e),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-Xa(),0),i.entries=[e],r())},a=Ja("largest-contentful-paint",o);if(a){r=qa(t,i,Sc,e.reportAllChanges);const n=Qa(()=>{o(a.takeRecords()),a.disconnect(),r(!0)});for(const t of["keydown","click","visibilitychange"])addEventListener(t,()=>vc(n),{capture:!0,once:!0});Wa(n=>{i=Ya("LCP"),r=qa(t,i,Sc,e.reportAllChanges),Ka(()=>{i.value=performance.now()-n.timeStamp,r(!0)})})}})})(e=>{const n=(t=>{let e={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){const n=$a();if(n){const i=n.activationStart||0,s=t.entries.at(-1),o=s.url&&performance.getEntriesByType("resource").filter(t=>t.name===s.url)[0],a=Math.max(0,n.responseStart-i),c=Math.max(a,o?(o.requestStart||o.startTime)-i:0),u=Math.min(t.value,Math.max(c,o?o.responseEnd-i:0));e={target:r.get(s),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:u-c,elementRenderDelay:t.value-u,navigationEntry:n,lcpEntry:s},s.url&&(e.url=s.url),o&&(e.lcpResourceEntry=o)}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportLCP(t,this.lcpOpts)},this.lcpOpts),this.vitalsToTrack.includes("INP")&&yc(t=>{this.onReportINP(t,this.inpOpts)},this.inpOpts),this.vitalsToTrack.includes("TTFB")&&((t,e={})=>{((t,e={})=>{let n=Ya("TTFB"),r=qa(t,n,xc,e.reportAllChanges);Ec(()=>{const i=$a();i&&(n.value=Math.max(i.responseStart-Xa(),0),n.entries=[i],r(!0),Wa(()=>{n=Ya("TTFB",0),r=qa(t,n,xc,e.reportAllChanges),r(!0)}))})})(e=>{const n=(t=>{let e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){const n=t.entries[0],r=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-r,0),s=Math.max(n.domainLookupStart-r,0),o=Math.max(n.connectStart-r,0),a=Math.max(n.connectEnd-r,0);e={waitingDuration:i,cacheDuration:s-i,dnsDuration:o-s,connectionDuration:a-o,requestDuration:t.value-a,navigationEntry:n}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportTTFB(t,this.ttfbOpts)},this.ttfbOpts),this.vitalsToTrack.includes("FCP")&&((t,e={})=>{ac(e=>{const n=(t=>{let e={timeToFirstByte:0,firstByteToFCP:t.value,loadState:ja(Ha())};if(t.entries.length){const n=$a(),r=t.entries.at(-1);if(n){const i=n.activationStart||0,s=Math.max(0,n.responseStart-i);e={timeToFirstByte:s,firstByteToFCP:t.value-s,loadState:ja(t.entries[0].startTime),navigationEntry:n,fcpEntry:r}}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportFCP(t,this.fcpOpts)},this.fcpOpts)}getAttrPrefix(t){return t.toLowerCase()}getAttributesForPerformanceLongAnimationFrameTiming(t){return{[el]:t.duration,[nl]:t.entryType,[rl]:t.name,[il]:t.renderStart,[sl]:t.startTime}}getAttributesForPerformanceScriptTiming(t){return{[Vu]:t.entryType,[Hu]:t.startTime,[Wu]:t.executionStart,[qu]:t.duration,[Ku]:t.forcedStyleAndLayoutDuration,[Xu]:t.invoker,[Yu]:t.pauseDuration,[Ju]:t.sourceURL,[Qu]:t.sourceFunctionName,[Zu]:t.sourceCharPosition,[tl]:t.windowAttribution}}processPerformanceLongAnimationFrameTimingSpans(t,e){if(!e)return;const n=this.getAttributesForPerformanceLongAnimationFrameTiming(e);this.tracer.startActiveSpan(e.name,{startTime:e.startTime},r=>{r.setAttributes(n),this.processPerformanceScriptTimingSpans(t,e.scripts),r.end(e.startTime+e.duration)})}processPerformanceScriptTimingSpans(t,e){e&&(null==e?void 0:e.length)&&e.map(t=>{this.tracer.startActiveSpan(t.name,{startTime:t.startTime},e=>{const n=this.getAttributesForPerformanceScriptTiming(t);e.setAttributes(n),e.end(t.startTime+t.duration)})})}getElementFromNode(t){if((null==t?void 0:t.nodeType)===Node.ELEMENT_NODE)return t}addDataAttributes(t,e,n,r){const i=t;if(null==i?void 0:i.dataset)for(const s in i.dataset){const t=i.dataset[s];void 0===t||void 0!==n&&!n.includes(s)||e.setAttribute(`${r}.element.data.${s}`,t)}}disable(){this.isEnabled()?(this._isEnabled=!1,this._diag.debug("Instrumentation  disabled")):this._diag.debug("Instrumentation already disabled")}enable(){this.isEnabled()?this._diag.debug("Instrumentation already enabled"):(this._isEnabled=!0,this._diag.debug("Instrumentation  enabled"),this._diag.debug(`Sending spans for ${this.vitalsToTrack.join(",")}`))}isEnabled(){return this._isEnabled}}const yl="@honeycombio/instrumentation-global-errors";function wl(t,e={},n=Kt.getTracer(yl),r){const i=t.message,s=t.name,o=Object.assign(Object.assign({[Fn]:s,[jn]:i,[Bn]:t.stack},function(t){if(!t)return{};const e=Br.computeStackTrace(t).stack,n=[],r=[],i=[],s=[];return Array.isArray(e)?(e.forEach(t=>{n.push(t.line),r.push(t.column),i.push(t.func),s.push(t.url)}),{"exception.structured_stacktrace.columns":r,"exception.structured_stacktrace.lines":n,"exception.structured_stacktrace.functions":i,"exception.structured_stacktrace.urls":s}):{}}(t)),e),a=n.startSpan("exception",{attributes:o},Rt.active());r&&r(a,t),a.setStatus({code:Ct.ERROR,message:i}),a.end()}class Sl extends vl{constructor({enabled:t=!0,applyCustomAttributesOnSpan:e}={}){super(yl,Mr,{enabled:t,applyCustomAttributesOnSpan:e}),this.onError=t=>{const e="reason"in t?t.reason:t.error;e&&wl(e,{},this.tracer,this.applyCustomAttributesOnSpan)},t&&this.enable(),this._isEnabled=t,this.applyCustomAttributesOnSpan=e}init(){}disable(){this.isEnabled()?(this._isEnabled=!1,window.removeEventListener("error",this.onError),window.removeEventListener("unhandledrejection",this.onError),this._diag.debug("Instrumentation  disabled")):this._diag.debug("Instrumentation already disabled")}enable(){this.isEnabled()?this._diag.debug("Instrumentation already enabled"):(this._isEnabled=!0,window.addEventListener("error",this.onError),window.addEventListener("unhandledrejection",this.onError),this._diag.debug("Instrumentation  enabled"))}isEnabled(){return this._isEnabled}}const xl="x-honeycomb-team",El="x-honeycomb-dataset";function Tl(t,e,n,r=!1){const i=Object.assign(Object.assign({},null==t?void 0:t.headers),n);return e&&!i[xl]&&(i[xl]=e),Ea(e)&&(r&&(null==t?void 0:t.metricsDataset)?i[El]=null==t?void 0:t.metricsDataset:(null==t?void 0:t.dataset)&&(i[El]=null==t?void 0:t.dataset)),i}const Al=(t="")=>{const e=new URL(t),n=/(api)([.|-])?(.*?)(\.?)(honeycomb\.io)(.*)/.exec(e.host);if(null===n)return{authRoot:void 0,uiRoot:void 0};let r,i;"-"===n[2]?(r=`api-${n[3]}`,i=`ui-${n[3]}`):(r=n[3]?`api.${n[3]}`:"api",i=n[3]?`ui.${n[3]}`:"ui");return{authRoot:`${e.protocol}//${r}.honeycomb.io/1/auth`,uiRoot:`${e.protocol}//${i}.honeycomb.io`}};class Cl{constructor(t,e,n,r,i){if(this._traceUrl="",this._logLevel=_.DEBUG,n&&(this._logLevel=n),!t||!e)return this._logLevel,void _.DEBUG;if(!r||!i)return this._logLevel,void _.DEBUG;fetch(r,{headers:{"x-honeycomb-team":e}}).then(t=>{if(t.ok)return t.json();throw new Error}).then(n=>{var r,s,o;const a=n;if(!(null===(r=a.team)||void 0===r?void 0:r.slug))throw new Error;this._traceUrl=function(t,e,n,r,i){let s=`${i}/${n}`;!Ea(t)&&r&&(s+=`/environments/${r}`);return s+=`/datasets/${e}/trace?trace_id`,s}(e,t,null===(s=a.team)||void 0===s?void 0:s.slug,null===(o=a.environment)||void 0===o?void 0:o.slug,i)}).catch(()=>{this._logLevel,_.INFO})}export(t,e){this._traceUrl&&t.forEach(t=>{var e;!(null===(e=t.parentSpanContext)||void 0===e?void 0:e.spanId)&&(this._logLevel,_.INFO)}),e({code:lr.SUCCESS})}shutdown(){return Promise.resolve()}}function Pl(t){const e=[];return(null==t?void 0:t.localVisualizations)&&e.push(function(t){const e=Oa(t),{authRoot:n,uiRoot:r}=Al((null==t?void 0:t.tracesEndpoint)||Aa(t));return new Cl(null==t?void 0:t.serviceName,e,null==t?void 0:t.logLevel,n,r)}(t)),(null==t?void 0:t.traceExporter)&&e.push(null==t?void 0:t.traceExporter),(null==t?void 0:t.traceExporters)&&e.push(...t.traceExporters),!0!==(null==t?void 0:t.disableDefaultTraceExporter)&&e.unshift(function(t){const e=Oa(t);return new Vi({url:Aa(t),headers:Tl(t,e,null==t?void 0:t.tracesHeaders),timeoutMillis:(null==t?void 0:t.tracesTimeout)||(null==t?void 0:t.timeout)||1e4})}(t)),n=[...e],new Ll(n);var n}function Ol(t){const e=[];return(null==t?void 0:t.metricExporters)&&e.push(...t.metricExporters),!0!==(null==t?void 0:t.disableDefaultMetricExporter)&&e.unshift(function(t){const e=(t=>(null==t?void 0:t.metricsApiKey)||(null==t?void 0:t.apiKey))(t);return new Zi({url:Ca(t),headers:Tl(t,e,null==t?void 0:t.metricsHeaders,!0),timeoutMillis:(null==t?void 0:t.metricsTimeout)||(null==t?void 0:t.timeout)||1e4})}(t)),(null==t?void 0:t.localVisualizations)&&e.push(new io),e}function kl(t){const e=[];return e.push(function(t){const e=(t=>(null==t?void 0:t.logsApiKey)||(null==t?void 0:t.apiKey))(t);return new ts({url:Pa(t),headers:Tl(t,e,null==t?void 0:t.logsHeaders),timeoutMillis:(null==t?void 0:t.logsTimeout)||(null==t?void 0:t.timeout)||1e4})}(t)),(null==t?void 0:t.localVisualizations)&&e.push(new la),e}class Ll{constructor(t){this._exporters=t}export(t,e){this._exporters.forEach(n=>n.export(t,e)),e({code:lr.SUCCESS})}async shutdown(){const t=[];this._exporters.forEach(e=>t.push(e.shutdown())),await Promise.all(t)}}class Ml{constructor(){}onStart(t,e){var n,r;(null!==(r=null===(n=Wt.getBaggage(e))||void 0===n?void 0:n.getAllEntries())&&void 0!==r?r:[]).forEach(e=>{t.setAttribute(e[0],e[1].value),Nt.debug(`@honeycombio/opentelemetry-web:  Baggage in all outgoing headers: ${e[0]}=${e[1].value} `)})}onEnd(){}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}}class Rl{constructor(){}onStart(t){const{href:e,pathname:n,search:r,hash:i,hostname:s}=window.location;t.setAttributes({[Pc]:window.innerWidth,[Oc]:window.innerHeight,[Ic]:i,[Dc]:e,[Uc]:n,[$c]:s,[jc]:r,[Bc]:n})}onEnd(){}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}}const Nl=(new mn).generateTraceId(),Il={getSessionId:()=>Nl},Dl=t=>{const e=[];var n;return(null==t?void 0:t.disableBrowserAttributes)||e.push(new Rl),e.push(new Ml,(n=(null==t?void 0:t.sessionProvider)||Il,new es(n)),...(null==t?void 0:t.spanProcessors)||[]),e},Ul="browser.language",$l="browser.mobile",jl="telemetry.distro.name",Bl="telemetry.distro.version";const Fl={path:!0,hash:!0,hostname:!0,referrer:!0,url:!1,search:!1};function Gl(t){if(!1===t||!(null===window||void 0===window?void 0:window.location))return he({});const e=function(t){if(!t)return Fl;return Object.assign(Object.assign({},Fl),t)}(t),{href:n,pathname:r,search:i,hash:s,hostname:o}=window.location;return he({[Fc]:zl(e.url,n),[Gc]:zl(e.path,r),[zc]:zl(e.search,i),[Vc]:zl(e.hash,s),[Hc]:zl(e.hostname,o),[Wc]:zl(e.referrer,document.referrer)})}function zl(t,e){if(t)return e}function Vl(){const{browserName:t,browserVersion:e,deviceType:n}=(t=>{const e=new os(t),{name:n,version:r}=e.getBrowser();return{browserName:null!=n?n:"unknown",browserVersion:null!=r?r:"unknown",deviceType:(i=e.getDevice().type,s=n,i||s?i||"desktop":"unknown")};var i,s})(navigator.userAgent);var r,i,s;return he({[Vn]:navigator.userAgent,[$l]:navigator.userAgent.includes("Mobi"),[Cc]:navigator.maxTouchPoints>0,[Ul]:navigator.language,[Tc]:t,[Ac]:e,[kc]:n,[Lc]:(i=navigator.connection,null!==(s=null==i?void 0:i.effectiveType)&&void 0!==s?s:"unknown"),[Mc]:window.screen.width,[Rc]:window.screen.height,[Nc]:(r=window.screen.width,r<=768?"small":r>768&&r<=1024?"medium":r>1024?"large":"unknown")})}const Hl=t=>{let e=he({});return(null==t?void 0:t.disableBrowserAttributes)||(e=e.merge(Gl(null==t?void 0:t.entryPageAttributes)).merge(Vl())),e=e.merge(he({[qc]:Mr,[Kc]:"browser",[jl]:"@honeycombio/opentelemetry-web",[Bl]:Mr})),(null==t?void 0:t.resource)&&(e=e.merge(t.resource)),(null==t?void 0:t.resourceAttributes)&&(e=e.merge(he(t.resourceAttributes))),e};class Wl extends ha{constructor(t){var e,n;const r=[...(null==t?void 0:t.instrumentations)||[]];!1!==(null===(e=null==t?void 0:t.webVitalsInstrumentationConfig)||void 0===e?void 0:e.enabled)&&r.push(new bl(null==t?void 0:t.webVitalsInstrumentationConfig)),!1!==(null===(n=null==t?void 0:t.globalErrorsInstrumentationConfig)||void 0===n?void 0:n.enabled)&&r.push(new Sl(null==t?void 0:t.globalErrorsInstrumentationConfig)),super(Object.assign(Object.assign({},t),{instrumentations:r,resource:Hl(t),sampler:Ia(t),spanProcessors:Dl(t),traceExporter:Pl(t),metricExporters:Ol(t),logExporters:kl(t)})),Ra(t),(null==t?void 0:t.debug)&&Na(t)}}const ql="claude-browser-extension";async function Kl(t,e,n){return Kt.getTracer(ql).startActiveSpan(t,{kind:Tt.INTERNAL},n?Kt.setSpan(Rt.active(),n):Rt.active(),async t=>{try{const n=await e(t);return t.setStatus({code:Ct.OK}),n}catch(n){throw t.setStatus({code:Ct.ERROR,message:n.message}),t.recordException(n),n}finally{t.end()}})}function Xl(t){const e="0123456789abcdef",n=Array.from({length:32},()=>e[Math.floor(16*Math.random())]).join(""),r=Array.from({length:16},()=>e[Math.floor(16*Math.random())]).join(""),i={traceparent:`00-${n}-${r}-0${t?"1":"0"}`,"x-cloud-trace-context":`${n}/${parseInt(r,16).toString()};o=${t?"1":"0"}`};return t&&(i.baggage="forceTrace=true",i["x-refinery-force-trace"]="true"),{traceId:n,headers:i}}function Yl(){const t=e(),n=chrome.runtime.getManifest();try{new Wl({debug:"production"!==t.environment||!1,apiKey:"hcaik_01k4x5jaf9v7sdymjzmxvktd6whp9x2y75jj8y5f8y7aaf1zy6aedg9858",serviceName:ql,sampleRate:1,resourceAttributes:{"extension.version":n.version,"build.type":"external"},webVitalsInstrumentationConfig:{enabled:!1}}).start()}catch{return}}class Jl{permissions=[];cache=new Map;canSkipPermissions=!1;getSkipAllPermissions;forcePrompt=!1;bypassLocalhostForMcp=!1;turnApprovedDomains=new Set;constructor(t,e){this.getSkipAllPermissions=t,this.bypassLocalhostForMcp=e?.bypassLocalhostForMcp??!1,this.loadPermissions(),this.setupStorageListener()}setCanSkipPermissions(t){this.canSkipPermissions=t}setForcePrompt(t){this.forcePrompt=t}setTurnApprovedDomains(t){this.turnApprovedDomains.clear();for(const e of t){const t=this.normalizeDomain(e);t&&this.turnApprovedDomains.add(t)}}clearTurnApprovedDomains(){this.turnApprovedDomains.clear()}isTurnApprovedDomain(t){const e=this.normalizeDomain(t);return!!e&&this.turnApprovedDomains.has(e)}getTurnApprovedDomains(){return Array.from(this.turnApprovedDomains)}normalizeDomain(t){try{if(t.startsWith("http://")||t.startsWith("https://")){return new URL(t).hostname.toLowerCase().replace(/^www\./,"")}return t.toLowerCase().replace(/^www\./,"").split("/")[0]}catch{return null}}async checkPermission(t,e){if(this.bypassLocalhostForMcp&&this.isLocalhostUrl(t))return{allowed:!0,needsPrompt:!1};if(!this.forcePrompt&&this.canSkipPermissions&&this.getSkipAllPermissions())return{allowed:!0,permission:void 0};const{host:r}=new URL(t);if(!this.forcePrompt&&this.isTurnApprovedDomain(r))return{allowed:!0,needsPrompt:!1};await this.loadPermissions();const i=this.findApplicablePermission(r,e);return i?(i.lastUsed=Date.now(),await this.savePermissions(),{allowed:i.action===n.ALLOW,permission:i}):(this.forcePrompt,{allowed:!1,needsPrompt:!0})}async checkDomainTransition(t,e){if(this.bypassLocalhostForMcp){const n=this.isLocalhostDomain(t),r=this.isLocalhostDomain(e);if(r)return{allowed:!0,needsPrompt:!1};if(n&&!r)return{allowed:!1,needsPrompt:!0}}if(this.forcePrompt)return{allowed:!1,needsPrompt:!0};if(this.isTurnApprovedDomain(e))return{allowed:!0,needsPrompt:!1};await this.loadPermissions();const r=this.permissions.filter(n=>"domain_transition"===n.scope.type&&n.scope.fromDomain===t&&n.scope.toDomain===e),i=r.find(t=>t.action===n.DENY);if(i)return i.lastUsed=Date.now(),await this.savePermissions(),{allowed:!1,permission:i};const s=r.find(t=>t.action===n.ALLOW);return s?(s.lastUsed=Date.now(),await this.savePermissions(),{allowed:!0,permission:s}):{allowed:!1,needsPrompt:!0}}async grantPermission(t,e,i){const s={id:crypto.randomUUID(),scope:t,action:n.ALLOW,duration:e,createdAt:Date.now(),toolUseId:e===r.ONCE?i:void 0};this.permissions.push(s),await this.savePermissions(),this.clearCache()}async denyPermission(t,e){if(e===r.ONCE)return;const i={id:crypto.randomUUID(),scope:t,action:n.DENY,duration:e,createdAt:Date.now()};e===r.ALWAYS&&this.permissions.push(i),await this.savePermissions(),this.clearCache()}async revokePermission(t){this.permissions=this.permissions.filter(e=>e.id!==t),await this.savePermissions(),this.clearCache()}async clearAllPermissions(){this.permissions=[],await this.savePermissions(),this.clearCache()}async clearOncePermissions(){const t=this.permissions.length;this.permissions=this.permissions.filter(t=>t.duration!==r.ONCE);t-this.permissions.length>0&&(await this.savePermissions(),this.clearCache())}getPermissionsByScope(){return{netloc:this.permissions.filter(t=>"netloc"===t.scope.type),domain_transition:this.permissions.filter(t=>"domain_transition"===t.scope.type)}}getAllPermissions(){return[...this.permissions]}findApplicablePermission(t,e){const i=`${t}:${e||"no-tool"}`;if(this.cache.has(i))return this.cache.get(i);if(e){const n=this.permissions.find(n=>n.duration===r.ONCE&&n.toolUseId===e&&"netloc"===n.scope.type&&n.scope.netloc&&this.matchesNetloc(t,n.scope.netloc));if(n)return this.revokePermission(n.id),n}this.permissions.forEach(t=>{});const s=this.permissions.filter(e=>"netloc"===e.scope.type&&e.duration!==r.ONCE&&e.scope.netloc&&this.matchesNetloc(t,e.scope.netloc)),o=s.find(t=>t.action===n.DENY);if(o)return this.cache.set(i,o),o;const a=s.find(t=>t.action===n.ALLOW);return a?(this.cache.set(i,a),a):null}async hasSiteWidePermissions(t){return await this.loadPermissions(),this.permissions.some(e=>"netloc"===e.scope.type&&e.duration===r.ALWAYS&&e.action===n.ALLOW&&e.scope.netloc&&this.matchesNetloc(t,e.scope.netloc))}matchesNetloc(t,e){if(e.startsWith("*.")){const n=e.slice(2);return t===n||t.endsWith("."+n)}return t===e||t.replace(/^www\./,"")===e.replace(/^www\./,"")}async loadPermissions(){try{const t=await i(s.PERMISSION_STORAGE);t&&(this.permissions=t.permissions||[])}catch(t){}}async savePermissions(){try{const t={permissions:this.permissions};await o(s.PERMISSION_STORAGE,t)}catch(t){}}setupStorageListener(){chrome.storage.onChanged.addListener((t,e)=>{"local"===e&&t[s.PERMISSION_STORAGE]&&(this.loadPermissions(),this.clearCache())})}clearCache(){this.cache.clear()}isLocalhostDomain(t){const e=t.toLowerCase();return"localhost"===e||"127.0.0.1"===e||"[::1]"===e||"::1"===e||e.startsWith("127.")||e.endsWith(".localhost")}isLocalhostUrl(t){try{const e=new URL(t),n=e.protocol;return("http:"===n||"https:"===n)&&this.isLocalhostDomain(e.hostname)}catch{return!1}}}const Ql="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Zl=globalThis,td="10.22.0";function ed(){return nd(Zl),Zl}function nd(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||td,e[td]=e[td]||{}}function rd(t,e,n=Zl){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[td]=r[td]||{};return i[t]||(i[t]=e())}const id=["debug","info","warn","error","log","assert","trace"],sd={};function od(t){if(!("console"in Zl))return t();const e=Zl.console,n={},r=Object.keys(sd);r.forEach(t=>{const r=sd[t];n[t]=e[t],e[t]=r});try{return t()}finally{r.forEach(t=>{e[t]=n[t]})}}function ad(){return ud().enabled}function cd(t,...e){Ql&&ad()&&od(()=>{Zl.console[t](`Sentry Logger [${t}]:`,...e)})}function ud(){return Ql?rd("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const ld={enable:function(){ud().enabled=!0},disable:function(){ud().enabled=!1},isEnabled:ad,log:function(...t){cd("log",...t)},warn:function(...t){cd("warn",...t)},error:function(...t){cd("error",...t)}},dd="?",hd=/\(error: (.*)\)/,pd=/captureMessage|captureException/;function md(...t){const e=t.sort((t,e)=>t[0]-e[0]).map(t=>t[1]);return(t,n=0,r=0)=>{const i=[],s=t.split("\n");for(let o=n;o<s.length;o++){let t=s[o];t.length>1024&&(t=t.slice(0,1024));const n=hd.test(t)?t.replace(hd,"$1"):t;if(!n.match(/\S*Error: /)){for(const t of e){const e=t(n);if(e){i.push(e);break}}if(i.length>=50+r)break}}return function(t){if(!t.length)return[];const e=Array.from(t);/sentryWrapped/.test(fd(e).function||"")&&e.pop();e.reverse(),pd.test(fd(e).function||"")&&(e.pop(),pd.test(fd(e).function||"")&&e.pop());return e.slice(0,50).map(t=>({...t,filename:t.filename||fd(e).filename,function:t.function||dd}))}(i.slice(r))}}function fd(t){return t[t.length-1]||{}}const gd="<anonymous>";function _d(t){try{return t&&"function"==typeof t&&t.name||gd}catch{return gd}}function vd(t){const e=t.exception;if(e){const t=[];try{return e.values.forEach(e=>{e.stacktrace.frames&&t.push(...e.stacktrace.frames)}),t}catch{return}}}const bd={},yd={};function wd(t,e){bd[t]=bd[t]||[],bd[t].push(e)}function Sd(t,e){if(!yd[t]){yd[t]=!0;try{e()}catch(n){Ql&&ld.error(`Error while instrumenting ${t}`,n)}}}function xd(t,e){const n=t&&bd[t];if(n)for(const i of n)try{i(e)}catch(r){Ql&&ld.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${_d(i)}\nError:`,r)}}let Ed=null;function Td(){Ed=Zl.onerror,Zl.onerror=function(t,e,n,r,i){return xd("error",{column:r,error:i,line:n,msg:t,url:e}),!!Ed&&Ed.apply(this,arguments)},Zl.onerror.__SENTRY_INSTRUMENTED__=!0}let Ad=null;function Cd(){Ad=Zl.onunhandledrejection,Zl.onunhandledrejection=function(t){return xd("unhandledrejection",t),!Ad||Ad.apply(this,arguments)},Zl.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Pd=Object.prototype.toString;function Od(t){switch(Pd.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return jd(t,Error)}}function kd(t,e){return Pd.call(t)===`[object ${e}]`}function Ld(t){return kd(t,"ErrorEvent")}function Md(t){return kd(t,"DOMError")}function Rd(t){return kd(t,"String")}function Nd(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Id(t){return null===t||Nd(t)||"object"!=typeof t&&"function"!=typeof t}function Dd(t){return kd(t,"Object")}function Ud(t){return"undefined"!=typeof Event&&jd(t,Event)}function $d(t){return Boolean(t?.then&&"function"==typeof t.then)}function jd(t,e){try{return t instanceof e}catch{return!1}}function Bd(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}const Fd=Zl;function Gd(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(u=zd(n,l),!("html"===u||s>1&&o+i.length*c+u.length>=d));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function zd(t,e){const n=t,r=[];if(!n?.tagName)return"";if(Fd.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e?.length?e.filter(t=>n.getAttribute(t)).map(t=>[t,n.getAttribute(t)]):null;if(i?.length)i.forEach(t=>{r.push(`[${t[0]}="${t[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const t=n.className;if(t&&Rd(t)){const e=t.split(/\s+/);for(const t of e)r.push(`.${t}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const t=n.getAttribute(o);t&&r.push(`[${o}="${t}"]`)}return r.join("")}function Vd(){try{return Fd.document.location.href}catch{return""}}function Hd(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function Wd(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const e=t[r];try{Bd(e)?n.push("[VueViewModel]"):n.push(String(e))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function qd(t,e,n=!1){return!!Rd(t)&&(kd(e,"RegExp")?e.test(t):!!Rd(e)&&(n?t===e:t.includes(e)))}function Kd(t,e=[],n=!1){return e.some(e=>qd(t,e,n))}function Xd(t,e,n){if(!(e in t))return;const r=t[e];if("function"!=typeof r)return;const i=n(r);"function"==typeof i&&Jd(i,r);try{t[e]=i}catch{Ql&&ld.log(`Failed to replace method "${e}" in object`,t)}}function Yd(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Ql&&ld.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Jd(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Yd(t,"__sentry_original__",e)}catch{}}function Qd(t){return t.__sentry_original__}function Zd(t){if(Od(t))return{message:t.message,name:t.name,stack:t.stack,...eh(t)};if(Ud(t)){const e={type:t.type,target:th(t.target),currentTarget:th(t.currentTarget),...eh(t)};return"undefined"!=typeof CustomEvent&&jd(t,CustomEvent)&&(e.detail=t.detail),e}return t}function th(t){try{return e=t,"undefined"!=typeof Element&&jd(e,Element)?Gd(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function eh(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}let nh;function rh(t=function(){const t=Zl;return t.crypto||t.msCrypto}()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return nh||(nh="10000000100040008000100000000000"),nh.replace(/[018]/g,t=>(t^(16*Math.random()&15)>>t/4).toString(16))}function ih(t){return t.exception?.values?.[0]}function sh(t){const{message:e,event_id:n}=t;if(e)return e;const r=ih(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function oh(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function ah(t,e){const n=ih(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const t={...r?.data,...e.data};n.mechanism.data=t}}function ch(t){if(function(t){try{return t.__sentry_captured__}catch{}}(t))return!0;try{Yd(t,"__sentry_captured__",!0)}catch{}return!1}function uh(){return Date.now()/1e3}let lh;function dh(){return(lh??(lh=function(){const{performance:t}=Zl;if(!t?.now||!t.timeOrigin)return uh;const e=t.timeOrigin;return()=>(e+t.now())/1e3}()))()}function hh(t){const e=dh(),n={sid:rh(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return{sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}(n)};return t&&ph(n,t),n}function ph(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||dh(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:rh()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function mh(t,e,n=2){if(!e||"object"!=typeof e||n<=0)return e;if(t&&0===Object.keys(e).length)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=mh(r[i],e[i],n-1));return r}function fh(){return rh()}function gh(){return rh().substring(16)}const _h="_sentrySpan";function vh(t,e){e?Yd(t,_h,e):delete t[_h]}function bh(t){return t[_h]}class yh{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:fh(),sampleRand:Math.random()}}clone(){const t=new yh;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,vh(t,bh(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ph(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t,n=e instanceof yh?e.getScopeData():Dd(e)?t:void 0,{tags:r,extra:i,user:s,contexts:o,level:a,fingerprint:c=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...i},this._contexts={...this._contexts,...o},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,vh(this,void 0),this._attachments=[],this.setPropagationContext({traceId:fh(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const r={timestamp:uh(),...t,message:t.message?Hd(t.message,2048):t.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:bh(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=mh(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e?.event_id||rh();if(!this._client)return Ql&&ld.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},this),n}captureMessage(t,e,n){const r=n?.event_id||rh();if(!this._client)return Ql&&ld.warn("No client configured on scope - will not capture message!"),r;const i=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureEvent(t,e){const n=e?.event_id||rh();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(Ql&&ld.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}class wh{constructor(t,e){let n,r;n=t||new yh,r=e||new yh,this._stack=[{scope:n}],this._isolationScope=r}withScope(t){const e=this._pushScope();let n;try{n=t(e)}catch(r){throw this._popScope(),r}return $d(n)?n.then(t=>(this._popScope(),t),t=>{throw this._popScope(),t}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Sh(){const t=nd(ed());return t.stack=t.stack||new wh(rd("defaultCurrentScope",()=>new yh),rd("defaultIsolationScope",()=>new yh))}function xh(t){return Sh().withScope(t)}function Eh(t,e){const n=Sh();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Th(t){return Sh().withScope(()=>t(Sh().getIsolationScope()))}function Ah(t){const e=nd(t);return e.acs?e.acs:{withIsolationScope:Th,withScope:xh,withSetScope:Eh,withSetIsolationScope:(t,e)=>Th(e),getCurrentScope:()=>Sh().getScope(),getIsolationScope:()=>Sh().getIsolationScope()}}function Ch(){return Ah(ed()).getCurrentScope()}function Ph(){return Ah(ed()).getIsolationScope()}function Oh(){return Ch().getClient()}function kh(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=e,s={trace_id:n,span_id:i||gh()};return r&&(s.parent_span_id=r),s}const Lh="sentry.profile_id",Mh="sentry.exclusive_time";function Rh(t){if(t){if("object"==typeof t&&"deref"in t&&"function"==typeof t.deref)try{return t.deref()}catch{return}return t}}function Nh(t){const e=t;return{scope:e._sentryScope,isolationScope:Rh(e._sentryIsolationScope)}}const Ih=/^sentry-/;function Dh(t){const e=function(t){if(!t||!Rd(t)&&!Array.isArray(t))return;if(Array.isArray(t))return t.reduce((t,e)=>{const n=Uh(e);return Object.entries(n).forEach(([e,n])=>{t[e]=n}),t},{});return Uh(t)}(t);if(!e)return;const n=Object.entries(e).reduce((t,[e,n])=>{if(e.match(Ih)){t[e.slice(7)]=n}return t},{});return Object.keys(n).length>0?n:void 0}function Uh(t){return t.split(",").map(t=>{const e=t.indexOf("=");if(-1===e)return[];return[t.slice(0,e),t.slice(e+1)].map(t=>{try{return decodeURIComponent(t.trim())}catch{return}})}).reduce((t,[e,n])=>(e&&n&&(t[e]=n),t),{})}const $h=/^o(\d+)\./,jh=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Bh(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${o}`}function Fh(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Gh(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=function(t){const e=t.match($h);return e?.[1]}(n)),r}function zh(t){const e="string"==typeof t?function(t){const e=jh.exec(t);if(!e)return void od(()=>{});const[n,r,i="",s="",o="",a=""]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const t=u.match(/^\d+/);t&&(u=t[0])}return Fh({host:s,pass:i,path:c,projectId:u,port:o,protocol:n,publicKey:r})}(t):Fh(t);if(e&&function(t){if(!Ql)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find(e=>!t[e]&&(ld.error(`Invalid Sentry Dsn: ${e} missing`),!0))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(ld.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(ld.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(ld.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}let Vh=!1;function Hh(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:Xh(t).parent_span_id,s=Nh(t).scope;return{parent_span_id:i,span_id:r?s?.getPropagationContext().propagationSpanId||gh():e,trace_id:n}}function Wh(t){return t&&t.length>0?t.map(({context:{spanId:t,traceId:e,traceFlags:n,...r},attributes:i})=>({span_id:t,trace_id:e,sampled:1===n,attributes:i,...r})):void 0}function qh(t){return"number"==typeof t?Kh(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Kh(t.getTime()):dh()}function Kh(t){return t>9999999999?t/1e3:t}function Xh(t){if(function(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(function(t){const e=t;return!!(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status)}(t)){const{attributes:r,startTime:i,name:s,endTime:o,status:a,links:c}=t;return{span_id:e,trace_id:n,data:r,description:s,parent_span_id:"parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0,start_timestamp:qh(i),timestamp:qh(o)||void 0,status:Yh(a),op:r["sentry.op"],origin:r["sentry.origin"],links:Wh(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Yh(t){if(t&&0!==t.code)return 1===t.code?"ok":t.message||"unknown_error"}function Jh(t){return t._sentryRootSpan||t}function Qh(){Vh||(od(()=>{}),Vh=!0)}function Zh(t){ld.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function tp(t,e){if(!e?.length||!t.description)return!1;for(const n of e){if(np(n)){if(qd(t.description,n))return Ql&&Zh(t),!0;continue}if(!n.name&&!n.op)continue;const e=!n.name||qd(t.description,n.name),r=!n.op||t.op&&qd(t.op,n.op);if(e&&r)return Ql&&Zh(t),!0}return!1}function ep(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const i of t)i.parent_span_id===r&&(i.parent_span_id=n)}function np(t){return"string"==typeof t||t instanceof RegExp}const rp="production";function ip(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i={environment:n.environment||rp,release:n.release,public_key:r,trace_id:t,org_id:Gh(e)};return e.emit("createDsc",i),i}function sp(t){const e=Oh();if(!e)return{};const n=Jh(t),r=Xh(n),i=r.data,s=n.spanContext().traceState,o=s?.get("sentry.sample_rate")??i["sentry.sample_rate"]??i["sentry.previous_trace_sample_rate"];function a(t){return"number"!=typeof o&&"string"!=typeof o||(t.sample_rate=`${o}`),t}const c=n._frozenDsc;if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&Dh(u);if(l)return a(l);const d=ip(t.spanContext().traceId,e),h=i["sentry.source"],p=r.description;return"url"!==h&&p&&(d.transaction=p),function(){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Oh()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(d.sampled=String(function(t){const{traceFlags:e}=t.spanContext();return 1===e}(n)),d.sample_rand=s?.get("sentry.sample_rand")??Nh(n).scope?.getPropagationContext().sampleRand.toString()),a(d),e.emit("createDsc",d,n),d}function op(t,e=100,n=1/0){try{return cp("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ap(t,e=3,n=102400){const r=op(t,e);return i=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(i))>n?ap(t,e-1,n):r;var i}function cp(t,e,n=1/0,r=1/0,i=function(){const t=new WeakSet;function e(e){return!!t.has(e)||(t.add(e),!1)}function n(e){t.delete(e)}return[e,n]}()){const[s,o]=i;if(null==e||["boolean","string"].includes(typeof e)||"number"==typeof e&&Number.isFinite(e))return e;const a=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if("undefined"!=typeof globalThis&&e===globalThis)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if(Bd(e))return"[VueViewModel]";if(Dd(n=e)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof e&&!Number.isFinite(e))return`[${e}]`;if("function"==typeof e)return`[Function: ${_d(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const r=function(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}var n}(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&"function"==typeof u.toJSON)try{return cp("",u.toJSON(),c-1,r,i)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const h=Zd(e);for(const p in h){if(!Object.prototype.hasOwnProperty.call(h,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const t=h[p];l[p]=cp(p,t,c-1,r,i),d++}return o(e),l}function up(t,e=[]){return[t,e]}function lp(t,e){const[n,r]=t;return[n,[...r,e]]}function dp(t,e){const n=t[1];for(const r of n){if(e(r,r[0].type))return!0}return!1}function hp(t){const e=nd(Zl);return e.encodePolyfill?e.encodePolyfill(t):(new TextEncoder).encode(t)}function pp(t){const[e,n]=t;let r=JSON.stringify(e);function i(t){"string"==typeof r?r="string"==typeof t?r+t:[hp(r),t]:r.push("string"==typeof t?hp(t):t)}for(const s of n){const[t,e]=s;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof e||e instanceof Uint8Array)i(e);else{let t;try{t=JSON.stringify(e)}catch{t=JSON.stringify(op(e))}i(t)}}return"string"==typeof r?r:function(t){const e=t.reduce((t,e)=>t+e.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}(r)}function mp(t){const e="string"==typeof t.data?hp(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const fp={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function gp(t){return fp[t]}function _p(t){if(!t?.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function vp(t,e,n,r){const i=_p(n),s=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){if(!e)return t;const n=t.sdk||{};t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0}}(t,n?.sdk);const o=function(t,e,n,r){const i=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Bh(r)},...i&&{trace:i}}}(t,i,r,e);delete t.sdkProcessingMetadata;return up(o,[[{type:s},t]])}function bp(t){return new wp(e=>{e(t)})}function yp(t){return new wp((e,n)=>{n(t)})}class wp{constructor(t){this._state=0,this._handlers=[],this._runExecutor(t)}then(t,e){return new wp((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(i){r(i)}else n(e)},t=>{if(e)try{n(e(t))}catch(i){r(i)}else r(t)}]),this._executeHandlers()})}catch(t){return this.then(t=>t,t)}finally(t){return new wp((e,n)=>{let r,i;return this.then(e=>{i=!1,r=e,t&&t()},e=>{i=!0,r=e,t&&t()}).then(()=>{i?n(r):e(r)})})}_executeHandlers(){if(0===this._state)return;const t=this._handlers.slice();this._handlers=[],t.forEach(t=>{t[0]||(1===this._state&&t[1](this._value),2===this._state&&t[2](this._value),t[0]=!0)})}_runExecutor(t){const e=(t,e)=>{0===this._state&&($d(e)?e.then(n,r):(this._state=t,this._value=e,this._executeHandlers()))},n=t=>{e(1,t)},r=t=>{e(2,t)};try{t(n,r)}catch(i){r(i)}}}function Sp(t,e,n,r=0){try{const i=xp(e,n,t,r);return $d(i)?i:bp(i)}catch(i){return yp(i)}}function xp(t,e,n,r){const i=n[r];if(!t||!i)return t;const s=i({...t},e);return Ql&&null===s&&ld.log(`Event processor "${i.id||"?"}" dropped event`),$d(s)?s.then(t=>xp(t,e,n,r+1)):xp(s,e,n,r+1)}function Ep(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;!function(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra});Object.keys(r).length&&(t.tags={...r,...t.tags});Object.keys(i).length&&(t.user={...i,...t.user});Object.keys(s).length&&(t.contexts={...s,...t.contexts});o&&(t.level=o);a&&"transaction"!==t.type&&(t.transaction=a)}(t,e),r&&function(t,e){t.contexts={trace:Hh(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:sp(e),...t.sdkProcessingMetadata};const n=Jh(e),r=Xh(n).description;r&&!t.transaction&&"transaction"===t.type&&(t.transaction=r)}(t,r),function(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e));t.fingerprint.length||delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,i),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,s)}function Tp(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:m}=e;Ap(t,"extra",n),Ap(t,"tags",r),Ap(t,"user",i),Ap(t,"contexts",s),t.sdkProcessingMetadata=mh(t.sdkProcessingMetadata,a,2),o&&(t.level=o),p&&(t.transactionName=p),m&&(t.span=m),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...h}}function Ap(t,e,n){t[e]=mh(t[e],n,1)}let Cp,Pp,Op,kp;function Lp(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||rh(),timestamp:e.timestamp||uh()},u=n.integrations||t.integrations.map(t=>t.name);!function(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;t.environment=t.environment||n||rp,!t.release&&r&&(t.release=r);!t.dist&&i&&(t.dist=i);const o=t.request;o?.url&&(o.url=Hd(o.url,s))}(c,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(c,u),i&&i.emit("applyFrameMetadata",e),void 0===e.type&&function(t,e){const n=function(t){const e=Zl._sentryDebugIds,n=Zl._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],i=n?Object.keys(n):[];if(kp&&r.length===Pp&&i.length===Op)return kp;Pp=r.length,Op=i.length,kp={},Cp||(Cp={});const s=(e,n)=>{for(const r of e){const e=n[r],i=Cp?.[r];if(i&&kp&&e)kp[i[0]]=e,Cp&&(Cp[r]=[i[0],e]);else if(e){const n=t(r);for(let t=n.length-1;t>=0;t--){const i=n[t],s=i?.filename;if(s&&kp&&Cp){kp[s]=e,Cp[r]=[s,e];break}}}}};return e&&s(r,e),n&&s(i,n),kp}(e);t.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(t=>{t.filename&&(t.debug_id=n[t.filename])})})}(c,t.stackParser);const l=function(t,e){if(!e)return t;const n=t?t.clone():new yh;return n.update(e),n}(r,n.captureContext);n.mechanism&&ah(c,n.mechanism);const d=i?i.getEventProcessors():[],h=rd("globalScope",()=>new yh).getScopeData();if(s){Tp(h,s.getScopeData())}if(l){Tp(h,l.getScopeData())}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),Ep(c,h);return Sp([...d,...h.eventProcessors],c,n).then(t=>(t&&function(t){const e={};if(t.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)})}),0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([t,e])=>{n.push({type:"sourcemap",code_file:t,debug_id:e})})}(t),"number"==typeof o&&o>0?function(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(t=>({...t,...t.data&&{data:op(t.data,e,n)}}))},...t.user&&{user:op(t.user,e,n)},...t.contexts&&{contexts:op(t.contexts,e,n)},...t.extra&&{extra:op(t.extra,e,n)}};t.contexts?.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=op(t.contexts.trace.data,e,n)));t.spans&&(r.spans=t.spans.map(t=>({...t,...t.data&&{data:op(t.data,e,n)}})));t.contexts?.flags&&r.contexts&&(r.contexts.flags=op(t.contexts.flags,3,n));return r}(t,o,a):t))}function Mp(t,e){return Ch().captureEvent(t,e)}function Rp(t){const e=Ph(),n=Ch(),{userAgent:r}=Zl.navigator||{},i=hh({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),s=e.getSession();return"ok"===s?.status&&ph(s,{status:"exited"}),Np(),e.setSession(i),i}function Np(){const t=Ph(),e=Ch().getSession()||t.getSession();e&&function(t){let e={};"ok"===t.status&&(e={status:"exited"}),ph(t,e)}(e),Ip(),t.setSession()}function Ip(){const t=Ph(),e=Oh(),n=t.getSession();n&&e&&e.captureSession(n)}function Dp(t=!1){t?Np():Ip()}function Up(t,e,n){return e||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){const n={sentry_version:"7"};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}(t,n)}`}const $p=[];function jp(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;if(e.forEach(t=>{t.isDefaultInstance=!0}),Array.isArray(n))r=[...e,...n];else if("function"==typeof n){const t=n(e);r=Array.isArray(t)?t:[t]}else r=e;return function(t){const e={};return t.forEach(t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)}),Object.values(e)}(r)}function Bp(t,e){for(const n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function Fp(t,e,n){if(n[e.name])Ql&&ld.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,-1===$p.indexOf(e.name)&&"function"==typeof e.setupOnce&&(e.setupOnce(),$p.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(e,r)=>n(e,r,t))}if("function"==typeof e.processEvent){const n=e.processEvent.bind(e),r=Object.assign((e,r)=>n(e,r,t),{id:e.name});t.addEventProcessor(r)}Ql&&ld.log(`Integration installed: ${e.name}`)}}function Gp(t,e){const n=e??function(t){return zp().get(t)}(t)??[];if(0===n.length)return;const r=t.getOptions(),i=function(t,e,n,r){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=Bh(r)),up(i,[(s=t,[{type:"log",item_count:s.length,content_type:"application/vnd.sentry.items.log+json"},{items:s}])]);var s}(n,r._metadata,r.tunnel,t.getDsn());zp().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function zp(){return rd("clientToLogBufferMap",()=>new WeakMap)}function Vp(t,e){const n=e??function(t){return Hp().get(t)}(t)??[];if(0===n.length)return;const r=t.getOptions(),i=function(t,e,n,r){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=Bh(r)),up(i,[(s=t,[{type:"trace_metric",item_count:s.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:s}])]);var s}(n,r._metadata,r.tunnel,t.getDsn());Hp().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(i)}function Hp(){return rd("clientToMetricBufferMap",()=>new WeakMap)}function Wp(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}const qp="Not capturing exception because it's already been captured.",Kp="Discarded session because of missing or non-string release",Xp=Symbol.for("SentryInternalError"),Yp=Symbol.for("SentryDoNotSendEventError");function Jp(t){return{message:t,[Xp]:!0}}function Qp(t){return{message:t,[Yp]:!0}}function Zp(t){return!!t&&"object"==typeof t&&Xp in t}function tm(t){return!!t&&"object"==typeof t&&Yp in t}function em(t,e,n,r,i){let s,o=0;t.on(n,()=>{o=0,clearTimeout(s)}),t.on(e,e=>{o+=r(e),o>=8e5?i(t):(clearTimeout(s),s=setTimeout(()=>{i(t)},5e3))}),t.on("flush",()=>{i(t)})}class nm{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=zh(t.dsn):Ql&&ld.warn("No DSN provided, client will not send events."),this._dsn){const e=Up(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}this._options.enableLogs&&em(this,"afterCaptureLog","flushLogs",om,Gp),this._options._experiments?.enableMetrics&&em(this,"afterCaptureMetric","flushMetrics",sm,Vp)}captureException(t,e,n){const r=rh();if(ch(t))return Ql&&ld.log(qp),r;const i={event_id:r,...e};return this._process(this.eventFromException(t,i).then(t=>this._captureEvent(t,i,n))),i.event_id}captureMessage(t,e,n,r){const i={event_id:rh(),...n},s=Nd(t)?t:String(t),o=Id(t)?this.eventFromMessage(s,e,i):this.eventFromException(t,i);return this._process(o.then(t=>this._captureEvent(t,i,r))),i.event_id}captureEvent(t,e,n){const r=rh();if(e?.originalException&&ch(e.originalException))return Ql&&ld.log(qp),r;const i={event_id:r,...e},s=t.sdkProcessingMetadata||{},o=s.capturedSpanScope,a=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,o||n,a)),i.event_id}captureSession(t){this.sendSession(t),ph(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const e=this._transport;if(!e)return!0;this.emit("flush");const n=await this._isClientDoneProcessing(t),r=await e.flush(t);return n&&r}async close(t){const e=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),e}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const e=this._integrations[t.name];Fp(this,t,this._integrations),e||Bp(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=vp(t,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])n=lp(n,mp(r));this.sendEnvelope(n).then(e=>this.emit("afterSendEvent",t,e))}sendSession(t){const{release:e,environment:n=rp}=this._options;if("aggregates"in t){const r=t.attrs||{};if(!r.release&&!e)return void(Ql&&ld.warn(Kp));r.release=r.release||e,r.environment=r.environment||n,t.attrs=r}else{if(!t.release&&!e)return void(Ql&&ld.warn(Kp));t.release=t.release||e,t.environment=t.environment||n}this.emit("beforeSendSession",t);const r=function(t,e,n,r){const i=_p(n);return up({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:Bh(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,e,n=1){if(this._options.sendClientReports){const r=`${t}:${e}`;Ql&&ld.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(t,e){const n=this._hooks[t]=this._hooks[t]||new Set,r=(...t)=>e(...t);return n.add(r),()=>{n.delete(r)}}emit(t,...e){const n=this._hooks[t];n&&n.forEach(t=>t(...e))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(e){return Ql&&ld.error("Error while sending envelope:",e),{}}return Ql&&ld.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach(e=>{e&&Fp(t,e,n)}),n}(this,t),Bp(this,t)}_updateSessionFromEvent(t,e){let n="fatal"===e.level,r=!1;const i=e.exception?.values;if(i){r=!0;for(const t of i){const e=t.mechanism;if(!1===e?.handled){n=!0;break}}}const s="ok"===t.status;(s&&0===t.errors||s&&n)&&(ph(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}async _isClientDoneProcessing(t){let e=0;for(;!t||e<t;){if(await new Promise(t=>setTimeout(t,1)),!this._numProcessing)return!0;e++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r){const i=this.getOptions(),s=Object.keys(this._integrations);return!e.integrations&&s?.length&&(e.integrations=s),this.emit("preprocessEvent",t,e),t.type||r.setLastEventId(t.event_id||e.event_id),Lp(i,t,e,n,this,r).then(t=>{if(null===t)return t;this.emit("postprocessEvent",t,e),t.contexts={trace:kh(n),...t.contexts};const r=function(t,e){const n=e.getPropagationContext();return n.dsc||ip(n.traceId,t)}(this,n);return t.sdkProcessingMetadata={dynamicSamplingContext:r,...t.sdkProcessingMetadata},t})}_captureEvent(t,e={},n=Ch(),r=Ph()){return Ql&&rm(t)&&ld.log(`Captured error event \`${Wp(t)[0]||"<unknown>"}\``),this._processEvent(t,e,n,r).then(t=>t.event_id,t=>{Ql&&(tm(t)?ld.log(t.message):Zp(t)?ld.warn(t.message):ld.warn(t))})}_processEvent(t,e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=im(t),a=rm(t),c=t.type||"error",u=`before send for type \`${c}\``,l=void 0===s?void 0:function(t){if("boolean"==typeof t)return Number(t);const e="string"==typeof t?parseFloat(t):t;return"number"!=typeof e||isNaN(e)||e<0||e>1?void 0:e}(s);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),yp(Qp(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));const d="replay_event"===c?"replay":c;return this._prepareEvent(t,e,n,r).then(t=>{if(null===t)throw this.recordDroppedEvent("event_processor",d),Qp("An event processor returned `null`, will not send event.");if(e.data&&!0===e.data.__sentry__)return t;const n=function(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o,ignoreSpans:a}=e;let c=n;if(rm(c)&&i)return i(c,r);if(im(c)){if(o||a){const e=function(t){const{trace_id:e,parent_span_id:n,span_id:r,status:i,origin:s,data:o,op:a}=t.contexts?.trace??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:i,timestamp:t.timestamp,trace_id:e??"",origin:s,profile_id:o?.[Lh],exclusive_time:o?.[Mh],measurements:t.measurements,is_segment:!0}}(c);if(a?.length&&tp(e,a))return null;if(o){const t=o(e);t?c=mh(n,{type:"transaction",timestamp:(u=t).timestamp,start_timestamp:u.start_timestamp,transaction:u.description,contexts:{trace:{trace_id:u.trace_id,span_id:u.span_id,parent_span_id:u.parent_span_id,op:u.op,status:u.status,origin:u.origin,data:{...u.data,...u.profile_id&&{[Lh]:u.profile_id},...u.exclusive_time&&{[Mh]:u.exclusive_time}}}},measurements:u.measurements}):Qh()}if(c.spans){const e=[],n=c.spans;for(const t of n)if(a?.length&&tp(t,a))ep(n,t);else if(o){const n=o(t);n?e.push(n):(Qh(),e.push(t))}else e.push(t);const r=c.spans.length-e.length;r&&t.recordDroppedEvent("before_send","span",r),c.spans=e}}if(s){if(c.spans){const t=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:t}}return s(c,r)}}var u;return c}(this,i,t,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if($d(t))return t.then(t=>{if(!Dd(t)&&null!==t)throw Jp(n);return t},t=>{throw Jp(`${e} rejected with ${t}`)});if(!Dd(t)&&null!==t)throw Jp(n);return t}(n,u)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",d),o){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw Qp(`${u} returned \`null\`, will not send event.`)}const s=n.getSession()||r.getSession();if(a&&s&&this._updateSessionFromEvent(s,i),o){const t=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const c=i.transaction_info;if(o&&c&&i.transaction!==t.transaction){const t="custom";i.transaction_info={...c,source:t}}return this.sendEvent(i,e),i}).then(null,t=>{if(tm(t)||Zp(t))throw t;throw this.captureException(t,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:t}),Jp(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)})}_process(t){this._numProcessing++,t.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([t,e])=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e}})}_flushOutcomes(){Ql&&ld.log("Flushing outcomes...");const t=this._clearOutcomes();if(0===t.length)return void(Ql&&ld.log("No outcomes to send"));if(!this._dsn)return void(Ql&&ld.log("No dsn provided, will not send outcomes"));Ql&&ld.log("Sending outcomes:",t);const e=(n=t,up((r=this._options.tunnel&&Bh(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:uh(),discarded_events:n}]]));var n,r;this.sendEnvelope(e)}}function rm(t){return void 0===t.type}function im(t){return"transaction"===t.type}function sm(t){let e=0;return t.name&&(e+=2*t.name.length),"string"==typeof t.value?e+=2*t.value.length:e+=8,e+am(t.attributes)}function om(t){let e=0;return t.message&&(e+=2*t.message.length),e+am(t.attributes)}function am(t){if(!t)return 0;let e=0;return Object.values(t).forEach(t=>{Array.isArray(t)?e+=t.length*cm(t[0]):Id(t)?e+=cm(t):e+=100}),e}function cm(t){return"string"==typeof t?2*t.length:"number"==typeof t?8:"boolean"==typeof t?4:0}function um(t,e){!0===e.debug&&(Ql?ld.enable():od(()=>{}));Ch().update(e.initialScope);const n=new t(e);return function(t){Ch().setClient(t)}(n),n.init(),n}const lm=Symbol.for("SentryBufferFullError");function dm(t=100){const e=new Set;function n(t){e.delete(t)}return{get $(){return Array.from(e)},add:function(r){if(!(e.size<t))return yp(lm);const i=r();return e.add(i),i.then(()=>n(i),()=>n(i)),i},drain:function(t){if(!e.size)return bp(!0);const n=Promise.allSettled(Array.from(e)).then(()=>!0);if(!t)return n;const r=[n,new Promise(e=>setTimeout(()=>e(!1),t))];return Promise.race(r)}}}function hm(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(s)for(const a of s.trim().split(",")){const[t,e,,,n]=a.split(":",5),s=parseInt(t,10),o=1e3*(isNaN(s)?60:s);if(e)for(const a of e.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(i[a]=r+o);else i.all=r+o}else o?i.all=r+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${t}`);return isNaN(r)?6e4:r-e}(o,r):429===e&&(i.all=r+6e4);return i}function pm(t,e,n=dm(t.bufferSize||64)){let r={};return{send:function(i){const s=[];if(dp(i,(e,n)=>{const i=gp(n);!function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(r,i)?s.push(e):t.recordDroppedEvent("ratelimit_backoff",i)}),0===s.length)return Promise.resolve({});const o=up(i[0],s),a=e=>{dp(o,(n,r)=>{t.recordDroppedEvent(e,gp(r))})};return n.add(()=>e({body:pp(o)}).then(t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&Ql&&ld.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=hm(r,t),t),t=>{throw a("network_error"),Ql&&ld.error("Encountered error running transport request:",t),t})).then(t=>t,t=>{if(t===lm)return Ql&&ld.error("Skipped sending event because buffer is full."),a("queue_overflow"),Promise.resolve({});throw t})},flush:t=>n.drain(t)}}function mm(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function fm(t){"aggregates"in t?void 0===t.attrs?.ip_address&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):void 0===t.ipAddress&&(t.ipAddress="{{auto}}")}const gm=100;function _m(t,e){const n=Oh(),r=Ph();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=gm}=n.getOptions();if(s<=0)return;const o={timestamp:uh(),...t},a=i?od(()=>i(o,e)):o;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,e),r.addBreadcrumb(a,s))}let vm;const bm=new WeakMap,ym=()=>({name:"FunctionToString",setupOnce(){vm=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Qd(this),n=bm.has(Oh())&&void 0!==e?e:this;return vm.apply(n,t)}}catch{}},setup(t){bm.set(t,!0)}}),wm=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Sm=(t={})=>{let e;return{name:"EventFilters",setup(n){const r=n.getOptions();e=Em(t,r)},processEvent(n,r,i){if(!e){const n=i.getOptions();e=Em(t,n)}return function(t,e){if(t.type){if("transaction"===t.type&&function(t,e){if(!e?.length)return!1;const n=t.transaction;return!!n&&Kd(n,e)}(t,e.ignoreTransactions))return Ql&&ld.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${sh(t)}`),!0}else{if(function(t,e){if(!e?.length)return!1;return Wp(t).some(t=>Kd(t,e))}(t,e.ignoreErrors))return Ql&&ld.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${sh(t)}`),!0;if(function(t){if(!t.exception?.values?.length)return!1;return!t.message&&!t.exception.values.some(t=>t.stacktrace||t.type&&"Error"!==t.type||t.value)}(t))return Ql&&ld.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${sh(t)}`),!0;if(function(t,e){if(!e?.length)return!1;const n=Tm(t);return!!n&&Kd(n,e)}(t,e.denyUrls))return Ql&&ld.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${sh(t)}.\nUrl: ${Tm(t)}`),!0;if(!function(t,e){if(!e?.length)return!0;const n=Tm(t);return!n||Kd(n,e)}(t,e.allowUrls))return Ql&&ld.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${sh(t)}.\nUrl: ${Tm(t)}`),!0}return!1}(n,e)?null:n}}},xm=(t={})=>({...Sm(t),name:"InboundFilters"});function Em(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:wm],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function Tm(t){try{const e=[...t.exception?.values??[]].reverse().find(t=>void 0===t.mechanism?.parent_id&&t.stacktrace?.frames?.length),n=e?.stacktrace?.frames;return n?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{return Ql&&ld.error(`Cannot extract url for event ${sh(t)}`),null}}function Am(t,e,n,r,i,s){if(!i.exception?.values||!s||!jd(s.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=Cm(t,e,r,s.originalException,n,i.exception.values,o,0))}function Cm(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(jd(r[i],Error)){Pm(o,a);const s=t(e,r[i]),u=c.length;Om(s,i,u,a),c=Cm(t,e,n,r[i],i,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach((r,s)=>{if(jd(r,Error)){Pm(o,a);const u=t(e,r),l=c.length;Om(u,`errors[${s}]`,l,a),c=Cm(t,e,n,r,i,[u,...c],u,l)}}),c}function Pm(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:e}}function Om(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function km(){"console"in Zl&&id.forEach(function(t){t in Zl.console&&Xd(Zl.console,t,function(e){return sd[t]=e,function(...e){xd("console",{args:e,level:t});const n=sd[t];n?.apply(Zl.console,e)}})})}function Lm(t){return"warn"===t?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Mm=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Nm(t,e))return!1;if(!Rm(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=Im(e),r=Im(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Nm(t,e))return!1;if(!Rm(t,e))return!1;return!0}(t,e))return!0;return!1}(e,t))return Ql&&ld.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function Rm(t,e){let n=vd(t),r=vd(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const t=r[i],e=n[i];if(t.filename!==e.filename||t.lineno!==e.lineno||t.colno!==e.colno||t.function!==e.function)return!1}return!0}function Nm(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch{return!1}}function Im(t){return t.exception?.values?.[0]}function Dm(t){return void 0===t?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const Um=Zl;function $m(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function jm(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Um))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if($m(Um.fetch))return!0;let t=!1;const e=Um.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow?.fetch&&(t=$m(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){Ql&&ld.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Bm(t,e){const n="fetch";wd(n,t),Sd(n,()=>function(t,e=!1){if(e&&!jm())return;Xd(Zl,"fetch",function(t){return function(...e){const n=new Error,{method:r,url:i}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:Gm(e),method:Fm(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:Gm(e),method:Fm(e,"method")?String(e.method).toUpperCase():"GET"}}(e),s={args:e,fetchData:{method:r,url:i},startTimestamp:1e3*dh(),virtualError:n,headers:zm(e)};return xd("fetch",{...s}),t.apply(Zl,e).then(async t=>(xd("fetch",{...s,endTimestamp:1e3*dh(),response:t}),t),t=>{if(xd("fetch",{...s,endTimestamp:1e3*dh(),error:t}),Od(t)&&void 0===t.stack&&(t.stack=n.stack,Yd(t,"framesToPop",1)),t instanceof TypeError&&("Failed to fetch"===t.message||"Load failed"===t.message||"NetworkError when attempting to fetch resource."===t.message))try{const e=new URL(s.fetchData.url);t.message=`${t.message} (${e.host})`}catch{}throw t})}})}(0,e))}function Fm(t,e){return!!t&&"object"==typeof t&&!!t[e]}function Gm(t){return"string"==typeof t?t:t?Fm(t,"url")?t.url:t.toString?t.toString():"":""}function zm(t){const[e,n]=t;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(r=e,"undefined"!=typeof Request&&jd(r,Request))return new Headers(e.headers)}catch{}var r}const Vm=Zl;let Hm=0;function Wm(){return Hm>0}function qm(t,e={}){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return"function"==typeof e?e:t;if(Qd(t))return t}catch{return t}const n=function(...n){try{const r=n.map(t=>qm(t,e));return t.apply(this,r)}catch(r){throw Hm++,setTimeout(()=>{Hm--}),function(...t){const e=Ah(ed());if(2===t.length){const[n,r]=t;return n?e.withSetScope(n,r):e.withScope(r)}e.withScope(t[0])}(t=>{var i;t.addEventProcessor(t=>(e.mechanism&&(oh(t,void 0),ah(t,e.mechanism)),t.extra={...t.extra,arguments:n},t)),i=r,Ch().captureException(i,void 0)}),r}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}catch{}Jd(n,t),Yd(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch{}return n}function Km(t,e){const n=Jm(t,e),r={type:tf(e),value:ef(e)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Xm(t,e,n,r){const i=Oh(),s=i?.getOptions().normalizeDepth,o=function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}return}(e),a={__serialized__:ap(e,s)};if(o)return{exception:{values:[Km(t,o)]},extra:a};const c={exception:{values:[{type:Ud(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:sf(e,{isUnhandledRejection:r})}]},extra:a};if(n){const e=Jm(t,n);e.length&&(c.exception.values[0].stacktrace={frames:e})}return c}function Ym(t,e){return{exception:{values:[Km(t,e)]}}}function Jm(t,e){const n=e.stacktrace||e.stack||"",r=function(t){if(t&&Qm.test(t.message))return 1;return 0}(e),i=function(t){if("number"==typeof t.framesToPop)return t.framesToPop;return 0}(e);try{return t(n,r,i)}catch{}return[]}const Qm=/Minified React error #\d+;/i;function Zm(t){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&t instanceof WebAssembly.Exception}function tf(t){const e=t?.name;if(!e&&Zm(t)){return t.message&&Array.isArray(t.message)&&2==t.message.length?t.message[0]:"WebAssembly.Exception"}return e}function ef(t){const e=t?.message;return Zm(t)?Array.isArray(t.message)&&2==t.message.length?t.message[1]:"wasm exception":e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function nf(t,e,n,r,i){let s;if(Ld(e)&&e.error){return Ym(t,e.error)}if(Md(e)||kd(e,"DOMException")){const i=e;if("stack"in e)s=Ym(t,e);else{const e=i.name||(Md(i)?"DOMError":"DOMException"),o=i.message?`${e}: ${i.message}`:e;s=rf(t,o,n,r),oh(s,o)}return"code"in i&&(s.tags={...s.tags,"DOMException.code":`${i.code}`}),s}if(Od(e))return Ym(t,e);if(Dd(e)||Ud(e)){return s=Xm(t,e,n,i),ah(s,{synthetic:!0}),s}return s=rf(t,e,n,r),oh(s,`${e}`),ah(s,{synthetic:!0}),s}function rf(t,e,n,r){const i={};if(r&&n){const r=Jm(t,n);r.length&&(i.exception={values:[{value:e,stacktrace:{frames:r}}]}),ah(i,{synthetic:!0})}if(Nd(e)){const{__sentry_template_string__:t,__sentry_template_values__:n}=e;return i.logentry={message:t,params:n},i}return i.message=e,i}function sf(t,{isUnhandledRejection:e}){const n=function(t,e=40){const n=Object.keys(Zd(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return Hd(r,e);for(let i=n.length;i>0;i--){const t=n.slice(0,i).join(", ");if(!(t.length>e))return i===n.length?t:Hd(t,e)}return""}(t),r=e?"promise rejection":"exception";if(Ld(t))return`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``;if(Ud(t)){return`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}class of extends nm{constructor(t){const e=(n=t,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Vm.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...n});var n;!function(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(t=>({name:`${r}:@sentry/${t}`,version:td})),version:td}),t._metadata=i}(e,"browser",["browser"],Vm.SENTRY_SDK_SOURCE||"npm"),e._metadata?.sdk&&(e._metadata.sdk.settings={infer_ip:e.sendDefaultPii?"auto":"never",...e._metadata.sdk.settings}),super(e);const{sendDefaultPii:r,sendClientReports:i,enableLogs:s,_experiments:o}=this._options;Vm.document&&(i||s||o?.enableMetrics)&&Vm.document.addEventListener("visibilitychange",()=>{"hidden"===Vm.document.visibilityState&&(i&&this._flushOutcomes(),s&&Gp(this),o?.enableMetrics&&Vp(this))}),r&&this.on("beforeSendSession",fm)}eventFromException(t,e){return function(t,e,n,r){const i=nf(t,e,n?.syntheticException||void 0,r);return ah(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),bp(i)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return function(t,e,n="info",r,i){const s=rf(t,e,r?.syntheticException||void 0,i);return s.level=n,r?.event_id&&(s.event_id=r.event_id),bp(s)}(this._options.stackParser,t,e,n,this._options.attachStacktrace)}_prepareEvent(t,e,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n,r)}}const af="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,cf=Zl;let uf,lf,df,hf;function pf(){if(!cf.document)return;const t=xd.bind(null,"dom"),e=mf(t,!0);cf.document.addEventListener("click",e,!1),cf.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(e=>{const n=cf,r=n[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Xd(r,"addEventListener",function(e){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=r[n]=r[n]||{refCount:0};if(!s.handler){const r=mf(t);s.handler=r,e.call(this,n,r,i)}s.refCount++}catch{}return e.call(this,n,r,i)}}),Xd(r,"removeEventListener",function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{const n=this.__sentry_instrumentation_handlers__||{},i=n[e];i&&(i.refCount--,i.refCount<=0&&(t.call(this,e,i.handler,r),i.handler=void 0,delete n[e]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return t.call(this,e,n,r)}}))})}function mf(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(t){try{return t.target}catch{return null}}(n);if(function(t,e){return"keypress"===t&&(!e?.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,r))return;Yd(n,"_sentryCaptured",!0),r&&!r._sentryId&&Yd(r,"_sentryId",rh());const i="keypress"===n.type?"input":n.type;if(!function(t){if(t.type!==lf)return!1;try{if(!t.target||t.target._sentryId!==df)return!1}catch{}return!0}(n)){t({event:n,name:i,global:e}),lf=n.type,df=r?r._sentryId:void 0}clearTimeout(uf),uf=cf.setTimeout(()=>{df=void 0,lf=void 0},1e3)}}function ff(t){const e="history";wd(e,t),Sd(e,gf)}function gf(){function t(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const r=hf,i=function(t){try{return new URL(t,cf.location.origin).toString()}catch{return t}}(String(n));if(hf=i,r===i)return t.apply(this,e);xd("history",{from:r,to:i})}return t.apply(this,e)}}cf.addEventListener("popstate",()=>{const t=cf.location.href,e=hf;if(hf=t,e===t)return;xd("history",{from:e,to:t})}),"history"in Um&&Um.history&&(Xd(cf.history,"pushState",t),Xd(cf.history,"replaceState",t))}const _f={};const vf="__sentry_xhr_v3__";function bf(){if(!cf.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(t,e,n){const r=new Error,i=1e3*dh(),s=Rd(n[0])?n[0].toUpperCase():void 0,o=function(t){if(Rd(t))return t;try{return t.toString()}catch{}return}(n[1]);if(!s||!o)return t.apply(e,n);e[vf]={method:s,url:o,request_headers:{}},"POST"===s&&o.match(/sentry_key/)&&(e.__sentry_own_request__=!0);const a=()=>{const t=e[vf];if(t&&4===e.readyState){try{t.status_code=e.status}catch{}xd("xhr",{endTimestamp:1e3*dh(),startTimestamp:i,xhr:e,virtualError:r})}};return"onreadystatechange"in e&&"function"==typeof e.onreadystatechange?e.onreadystatechange=new Proxy(e.onreadystatechange,{apply:(t,e,n)=>(a(),t.apply(e,n))}):e.addEventListener("readystatechange",a),e.setRequestHeader=new Proxy(e.setRequestHeader,{apply(t,e,n){const[r,i]=n,s=e[vf];return s&&Rd(r)&&Rd(i)&&(s.request_headers[r.toLowerCase()]=i),t.apply(e,n)}}),t.apply(e,n)}}),t.send=new Proxy(t.send,{apply(t,e,n){const r=e[vf];if(!r)return t.apply(e,n);void 0!==n[0]&&(r.body=n[0]);return xd("xhr",{startTimestamp:1e3*dh(),xhr:e}),t.apply(e,n)}})}function yf(t,e=function(t){const e=_f[t];if(e)return e;let n=cf[t];if($m(n))return _f[t]=n.bind(cf);const r=cf.document;if(r&&"function"==typeof r.createElement)try{const e=r.createElement("iframe");e.hidden=!0,r.head.appendChild(e);const i=e.contentWindow;i?.[t]&&(n=i[t]),r.head.removeChild(e)}catch(i){af&&ld.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n?_f[t]=n.bind(cf):n}("fetch")){let n=0,r=0;return pm(t,async function(i){const s=i.body.length;n+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const n=await e(t.url,o);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")}}}catch(a){throw _f["fetch"]=void 0,a}finally{n-=s,r--}})}function wf(t,e,n,r){const i={filename:t,function:"<anonymous>"===e?dd:e,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}const Sf=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,xf=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ef=/\((\S*)(?::(\d+))(?::(\d+))\)/,Tf=/at (.+?) ?\(data:(.+?),/,Af=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Cf=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Pf=md(...[[30,t=>{const e=t.match(Tf);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=Sf.exec(t);if(n){const[,t,e,r]=n;return wf(t,dd,+e,+r)}const r=xf.exec(t);if(r){if(r[2]&&0===r[2].indexOf("eval")){const t=Ef.exec(r[2]);t&&(r[2]=t[1],r[3]=t[2],r[4]=t[3])}const[t,e]=Of(r[1]||dd,r[2]);return wf(e,t,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,t=>{const e=Af.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=Cf.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||dd;return[n,t]=Of(n,t),wf(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]]),Of=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:dd,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},kf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Lf=1024,Mf=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(t){var n;e.console&&function(t){const e="console";wd(e,t),Sd(e,km)}(function(t){return function(e){if(Oh()!==t)return;const n={category:"console",data:{arguments:e.args,logger:"console"},level:Lm(e.level),message:Wd(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${Wd(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}_m(n,{input:e.args,level:e.level})}}(t)),e.dom&&(n=function(t,e){return function(n){if(Oh()!==t)return;let r,i,s="object"==typeof e?e.serializeAttribute:void 0,o="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;o&&o>Lf&&(kf&&ld.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=Lf),"string"==typeof s&&(s=[s]);try{const t=n.event,e=function(t){return!!t&&!!t.target}(t)?t.target:t;r=Gd(e,{keyAttrs:s,maxStringLength:o}),i=function(t){if(!Fd.HTMLElement)return null;let e=t;for(let n=0;n<5;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}(e)}catch{r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};i&&(a.data={"ui.component_name":i}),_m(a,{event:n.event,name:n.name,global:n.global})}}(t,e.dom),wd("dom",n),Sd("dom",pf)),e.xhr&&function(t){wd("xhr",t),Sd("xhr",bf)}(function(t){return function(e){if(Oh()!==t)return;const{startTimestamp:n,endTimestamp:r}=e,i=e.xhr[vf];if(!n||!r||!i)return;const{method:s,url:o,status_code:a,body:c}=i,u={method:s,url:o,status_code:a},l={xhr:e.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:u,type:"http",level:Dm(a)};t.emit("beforeOutgoingRequestBreadcrumb",d,l),_m(d,l)}}(t)),e.fetch&&Bm(function(t){return function(e){if(Oh()!==t)return;const{startTimestamp:n,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.fetchData.method,e.fetchData.url,e.error){const i=e.fetchData,s={data:e.error,input:e.args,startTimestamp:n,endTimestamp:r},o={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",o,s),_m(o,s)}else{const i=e.response,s={...e.fetchData,status_code:i?.status};e.fetchData.request_body_size,e.fetchData.response_body_size;const o={input:e.args,response:i,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:s,type:"http",level:Dm(s.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",a,o),_m(a,o)}}}(t)),e.history&&ff(function(t){return function(e){if(Oh()!==t)return;let n=e.from,r=e.to;const i=mm(Vm.location.href);let s=n?mm(n):void 0;const o=mm(r);s?.path||(s=i),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),i.protocol===s.protocol&&i.host===s.host&&(n=s.relative),_m({category:"navigation",data:{from:n,to:r}})}}(t)),e.sentry&&t.on("beforeSendEvent",function(t){return function(e){Oh()===t&&_m({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:sh(e)},{event:e})}}(t))}}};const Rf=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Nf=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&Xd(Vm,"setTimeout",If),e.setInterval&&Xd(Vm,"setInterval",If),e.requestAnimationFrame&&Xd(Vm,"requestAnimationFrame",Df),e.XMLHttpRequest&&"XMLHttpRequest"in Vm&&Xd(XMLHttpRequest.prototype,"send",Uf);const t=e.eventTarget;if(t){(Array.isArray(t)?t:Rf).forEach(t=>function(t,e){const n=Vm,r=n[t]?.prototype;if(!r?.hasOwnProperty?.("addEventListener"))return;Xd(r,"addEventListener",function(n){return function(r,i,s){try{"function"==typeof i.handleEvent&&(i.handleEvent=qm(i.handleEvent,{mechanism:{data:{handler:_d(i),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&function(t,e,n){t&&"object"==typeof t&&"removeEventListener"in t&&"function"==typeof t.removeEventListener&&t.removeEventListener(e,n)}(this,r,i),n.apply(this,[r,qm(i,{mechanism:{data:{handler:_d(i),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),s])}}),Xd(r,"removeEventListener",function(t){return function(e,n,r){try{const i=n.__sentry_wrapped__;i&&t.call(this,e,i,r)}catch{}return t.call(this,e,n,r)}})}(t,e))}}}};function If(t){return function(...e){const n=e[0];return e[0]=qm(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${_d(t)}`}}),t.apply(this,e)}}function Df(t){return function(e){return t.apply(this,[qm(e,{mechanism:{data:{handler:_d(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Uf(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(t=>{t in n&&"function"==typeof n[t]&&Xd(n,t,function(e){const n={mechanism:{data:{handler:_d(e)},handled:!1,type:`auto.browser.browserapierrors.xhr.${t}`}},r=Qd(e);return r&&(n.mechanism.data.handler=_d(r)),qm(e,n)})}),t.apply(this,e)}}const $f=()=>({name:"BrowserSession",setupOnce(){void 0!==Vm.document?(Rp({ignoreDuration:!0}),Dp(),ff(({from:t,to:e})=>{void 0!==t&&t!==e&&(Rp({ignoreDuration:!0}),Dp())})):kf&&ld.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),jf=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(!function(t){!function(t){const e="error";wd(e,t),Sd(e,Td)}(e=>{const{stackParser:n,attachStacktrace:r}=Ff();if(Oh()!==t||Wm())return;const{msg:i,url:s,line:o,column:a,error:c}=e,u=function(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=function(t){if(!Rd(t)||0===t.length)return;if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/);return`<data:${e?e[1]:"text/javascript"}${t.includes("base64,")?",base64":""}>`}return t.slice(0,1024)}(e)??Vd();0===c.length&&c.push({colno:u,filename:d,function:dd,in_app:!0,lineno:l});return t}(nf(n,c||i,void 0,r,!1),s,o,a);u.level="error",Mp(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}(t),Bf("onerror")),e.onunhandledrejection&&(!function(t){!function(t){const e="unhandledrejection";wd(e,t),Sd(e,Cd)}(e=>{const{stackParser:n,attachStacktrace:r}=Ff();if(Oh()!==t||Wm())return;const i=function(t){if(Id(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}(e),s=Id(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:nf(n,i,void 0,r,!0);s.level="error",Mp(s,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}(t),Bf("onunhandledrejection"))}}};function Bf(t){kf&&ld.log(`Global Handler attached: ${t}`)}function Ff(){const t=Oh();return t?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Gf=()=>({name:"HttpContext",preprocessEvent(t){if(!Vm.navigator&&!Vm.location&&!Vm.document)return;const e=function(){const t=Vd(),{referrer:e}=Vm.document||{},{userAgent:n}=Vm.navigator||{};return{url:t,headers:{...e&&{Referer:e},...n&&{"User-Agent":n}}}}(),n={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:n}}}),zf=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(t,r,i){Am(Km,i.getOptions().stackParser,n,e,t,r)}}};function Vf(){return!!function(){if(void 0===Vm.window)return!1;const t=Vm;if(t.nw)return!1;const e=t.chrome||t.browser;if(!e?.runtime?.id)return!1;const n=Vd(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Vm===Vm.top&&r.some(t=>n.startsWith(`${t}://`)))}()&&(kf&&od(()=>{}),!0)}function Hf(t){return[xm(),ym(),Nf(),Mf(),jf(),zf(),Mm(),Gf(),$f()]}const Wf=()=>{const t=Hf().filter(t=>!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(t.name));!function(t={}){const e=!t.skipBrowserExtensionCheck&&Vf(),n={...t,enabled:!e&&t.enabled,stackParser:(r=t.stackParser||Pf,Array.isArray(r)?md(...r):r),integrations:jp({integrations:t.integrations,defaultIntegrations:null==t.defaultIntegrations?Hf():t.defaultIntegrations}),transport:t.transport||yf};var r;um(of,n)}({dsn:"https://60bea3ee4ef1022e4035b23ba50f44d0@o1158394.ingest.us.sentry.io/4509876992278529",transport:yf,stackParser:Pf,integrations:t,beforeSend:t=>(t.contexts={...t.contexts,extension:{id:chrome.runtime.id,version:chrome.runtime.getManifest().version,environment:"production"}},t)})};export{Jl as P,Ct as S,Yl as a,Xl as g,Wf as i,Kl as w};
